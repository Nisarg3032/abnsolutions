"use strict";var oR=Object.defineProperty,aR=Object.defineProperties,uR=Object.getOwnPropertyDescriptors,Px=Object.getOwnPropertySymbols,cR=Object.prototype.hasOwnProperty,lR=Object.prototype.propertyIsEnumerable,Nx=(We,ve,P)=>ve in We?oR(We,ve,{enumerable:!0,configurable:!0,writable:!0,value:P}):We[ve]=P,kx=(We,ve)=>{for(var P in ve||(ve={}))cR.call(ve,P)&&Nx(We,P,ve[P]);if(Px)for(var P of Px(ve))lR.call(ve,P)&&Nx(We,P,ve[P]);return We},Fx=(We,ve)=>aR(We,uR(ve));(self.webpackChunkabn=self.webpackChunkabn||[]).push([[179],{2011:(We,ve,P)=>{P.d(ve,{Dh:()=>se,GT:()=>ge,cc:()=>Ee,hO:()=>Be,on:()=>$,pX:()=>re,xv:()=>le});var l=P(5e3),J=P(127),N=P(5813);We=P.hmd(We);const ie=["ngOnDestroy"],re=(fe,Me,Ve,Ne={})=>new Proxy(fe,{get:(Ke,Ce)=>Ve.runOutsideAngular(()=>{var Qe;if(fe[Ce])return(null===(Qe=null==Ne?void 0:Ne.spy)||void 0===Qe?void 0:Qe.get)&&Ne.spy.get(Ce,fe[Ce]),fe[Ce];if(ie.indexOf(Ce)>-1)return()=>{};const ze=Me.toPromise().then(ye=>{const Z=ye&&ye[Ce];return"function"==typeof Z?Z.bind(ye):Z&&Z.then?Z.then(X=>Ve.run(()=>X)):Ve.run(()=>Z)});return new Proxy(()=>{},{get:(ye,Z)=>ze[Z],apply:(ye,Z,X)=>ze.then(ce=>{var pe;const Se=ce&&ce(...X);return(null===(pe=null==Ne?void 0:Ne.spy)||void 0===pe?void 0:pe.apply)&&Ne.spy.apply(Ce,X,Se),Se})})})}),ge=(fe,Me)=>{Me.forEach(Ve=>{Object.getOwnPropertyNames(Ve.prototype||Ve).forEach(Ne=>{Object.defineProperty(fe.prototype,Ne,Object.getOwnPropertyDescriptor(Ve.prototype||Ve,Ne))})})};class ue{constructor(Me){return Me}}const se=new l.OlP("angularfire2.app.options"),le=new l.OlP("angularfire2.app.name");function $(fe,Me,Ve){const Ke="object"==typeof Ve&&Ve||{};Ke.name=Ke.name||"string"==typeof Ve&&Ve||"[DEFAULT]";const Qe=J.Z.apps.filter(ze=>ze&&ze.name===Ke.name)[0]||Me.runOutsideAngular(()=>J.Z.initializeApp(fe,Ke));try{JSON.stringify(fe)!==JSON.stringify(Qe.options)&&q("error",`${Qe.name} Firebase App already initialized with different options${We.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ze){}return new ue(Qe)}const q=(fe,...Me)=>{(0,l.X6Q)()&&"undefined"!=typeof console&&console[fe](...Me)},ee={provide:ue,useFactory:$,deps:[se,l.R0b,[new l.FiY,le]]};let Be=(()=>{class fe{constructor(Ve){J.Z.registerVersion("angularfire",N.q4.full,"core"),J.Z.registerVersion("angularfire",N.q4.full,"app-compat"),J.Z.registerVersion("angular",l.q4F.full,Ve.toString())}static initializeApp(Ve,Ne){return{ngModule:fe,providers:[{provide:se,useValue:Ve},{provide:le,useValue:Ne}]}}}return fe.\u0275fac=function(Ve){return new(Ve||fe)(l.LFG(l.Lbi))},fe.\u0275mod=l.oAB({type:fe}),fe.\u0275inj=l.cJS({providers:[ee]}),fe})();function Ee(fe,Me,Ve,Ne,Ke){const[,Ce,Qe]=globalThis.\u0275AngularfireInstanceCache.find(ze=>ze[0]===fe)||[];if(Ce)return function Oe(fe,Me){try{return fe.toString()===Me.toString()}catch(Ve){return fe===Me}}(Ke,Qe)||(de("error",`${Me} was already initialized on the ${Ve} Firebase App with different settings.${Le?" You may need to reload as Firebase is not HMR aware.":""}`),de("warn",{is:Ke,was:Qe})),Ce;{const ze=Ne();return globalThis.\u0275AngularfireInstanceCache.push([fe,ze,Ke]),ze}}const Le=!!We.hot,de=(fe,...Me)=>{(0,l.X6Q)()&&"undefined"!=typeof console&&console[fe](...Me)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(We,ve,P)=>{P.d(ve,{q4:()=>Dc,iC:()=>Xo,HU:()=>Au,vb:()=>zn,JM:()=>xc});var l=P(5e3),J=P(5867),N=P(5861),ie=P(9681),re=P(2090),ge=P(4859),ue=P(1877),se=P(8766);const le="@firebase/installations",$="0.5.12",ee=`w:${$}`,Be="FIS_v2",Me=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ve(I){return I instanceof re.ZR&&I.code.includes("request-failed")}function Ne({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Ke(I){return{token:I.token,requestStatus:2,expiresIn:ce(I.expiresIn),creationTime:Date.now()}}function Ce(I,T){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,N.Z)(function*(I,T){const F=(yield T.json()).error;return Me.create("request-failed",{requestName:I,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function ze({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function ye(I,{refreshToken:T}){const O=ze(I);return O.append("Authorization",function pe(I){return`${Be} ${I}`}(T)),O}function Z(I){return X.apply(this,arguments)}function X(){return(X=(0,N.Z)(function*(I){const T=yield I();return T.status>=500&&T.status<600?I():T})).apply(this,arguments)}function ce(I){return Number(I.replace("s","000"))}function Se(I,T){return te.apply(this,arguments)}function te(){return(te=(0,N.Z)(function*({appConfig:I,heartbeatServiceProvider:T},{fid:O}){const F=Ne(I),W=ze(I),oe=T.getImmediate({optional:!0});if(oe){const ht=yield oe.getHeartbeatsHeader();ht&&W.append("x-firebase-client",ht)}const Ue={method:"POST",headers:W,body:JSON.stringify({fid:O,authVersion:Be,appId:I.appId,sdkVersion:ee})},ot=yield Z(()=>fetch(F,Ue));if(ot.ok){const ht=yield ot.json();return{fid:ht.fid||O,registrationStatus:2,refreshToken:ht.refreshToken,authToken:Ke(ht.authToken)}}throw yield Ce("Create Installation",ot)})).apply(this,arguments)}function ft(I){return new Promise(T=>{setTimeout(T,I)})}const _n=/^[cdef][\w-]{21}$/;function yt(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const O=function vn(I){return function Rt(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return _n.test(O)?O:""}catch(I){return""}}function Jt(I){return`${I.appName}!${I.appId}`}const sr=new Map;function rn(I,T){const O=Jt(I);Hn(O,T),function vs(I,T){const O=function Ht(){return!Cr&&"BroadcastChannel"in self&&(Cr=new BroadcastChannel("[Firebase] FID Change"),Cr.onmessage=I=>{Hn(I.data.key,I.data.fid)}),Cr}();O&&O.postMessage({key:I,fid:T}),function An(){0===sr.size&&Cr&&(Cr.close(),Cr=null)}()}(O,T)}function Hn(I,T){const O=sr.get(I);if(O)for(const F of O)F(T)}let Cr=null;const _r="firebase-installations-store";let Re=null;function st(){return Re||(Re=(0,se.X3)("firebase-installations-database",1,{upgrade:(I,T)=>{0===T&&I.createObjectStore(_r)}})),Re}function Sn(I,T){return xn.apply(this,arguments)}function xn(){return(xn=(0,N.Z)(function*(I,T){const O=Jt(I),W=(yield st()).transaction(_r,"readwrite"),oe=W.objectStore(_r),we=yield oe.get(O);return yield oe.put(T,O),yield W.done,(!we||we.fid!==T.fid)&&rn(I,T.fid),T})).apply(this,arguments)}function Xt(I){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,N.Z)(function*(I){const T=Jt(I),F=(yield st()).transaction(_r,"readwrite");yield F.objectStore(_r).delete(T),yield F.done})).apply(this,arguments)}function zs(I,T){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,N.Z)(function*(I,T){const O=Jt(I),W=(yield st()).transaction(_r,"readwrite"),oe=W.objectStore(_r),we=yield oe.get(O),Ue=T(we);return void 0===Ue?yield oe.delete(O):yield oe.put(Ue,O),yield W.done,Ue&&(!we||we.fid!==Ue.fid)&&rn(I,Ue.fid),Ue})).apply(this,arguments)}function wn(I){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,N.Z)(function*(I){let T;const O=yield zs(I.appConfig,F=>{const W=lu(F),oe=Gt(I,W);return T=oe.registrationPromise,oe.installationEntry});return""===O.fid?{installationEntry:yield T}:{installationEntry:O,registrationPromise:T}})).apply(this,arguments)}function lu(I){return sn(I||{fid:yt(),registrationStatus:0})}function Gt(I,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Me.create("app-offline"))};const O={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},F=function it(I,T){return pt.apply(this,arguments)}(I,O);return{installationEntry:O,registrationPromise:F}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:ws(I)}:{installationEntry:T}}function pt(){return(pt=(0,N.Z)(function*(I,T){try{const O=yield Se(I,T);return Sn(I.appConfig,O)}catch(O){throw Ve(O)&&409===O.customData.serverCode?yield Xt(I.appConfig):yield Sn(I.appConfig,{fid:T.fid,registrationStatus:0}),O}})).apply(this,arguments)}function ws(I){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,N.Z)(function*(I){let T=yield Ft(I.appConfig);for(;1===T.registrationStatus;)yield ft(100),T=yield Ft(I.appConfig);if(0===T.registrationStatus){const{installationEntry:O,registrationPromise:F}=yield wn(I);return F||O}return T})).apply(this,arguments)}function Ft(I){return zs(I,T=>{if(!T)throw Me.create("installation-not-found");return sn(T)})}function sn(I){return function $t(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Kr(I,T){return ut.apply(this,arguments)}function ut(){return(ut=(0,N.Z)(function*({appConfig:I,heartbeatServiceProvider:T},O){const F=Di(I,O),W=ye(I,O),oe=T.getImmediate({optional:!0});if(oe){const ht=yield oe.getHeartbeatsHeader();ht&&W.append("x-firebase-client",ht)}const Ue={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:ee,appId:I.appId}})},ot=yield Z(()=>fetch(F,Ue));if(ot.ok)return Ke(yield ot.json());throw yield Ce("Generate Auth Token",ot)})).apply(this,arguments)}function Di(I,{fid:T}){return`${Ne(I)}/${T}/authTokens:generate`}function U(I){return H.apply(this,arguments)}function H(){return(H=(0,N.Z)(function*(I,T=!1){let O;const F=yield zs(I.appConfig,oe=>{if(!gt(oe))throw Me.create("not-registered");const we=oe.authToken;if(!T&&qt(we))return oe;if(1===we.requestStatus)return O=V(I,T),oe;{if(!navigator.onLine)throw Me.create("app-offline");const Ue=Vr(oe);return O=Ae(I,Ue),Ue}});return O?yield O:F.authToken})).apply(this,arguments)}function V(I,T){return B.apply(this,arguments)}function B(){return(B=(0,N.Z)(function*(I,T){let O=yield G(I.appConfig);for(;1===O.authToken.requestStatus;)yield ft(100),O=yield G(I.appConfig);const F=O.authToken;return 0===F.requestStatus?U(I,T):F})).apply(this,arguments)}function G(I){return zs(I,T=>{if(!gt(T))throw Me.create("not-registered");return function Pt(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Ae(I,T){return $e.apply(this,arguments)}function $e(){return($e=(0,N.Z)(function*(I,T){try{const O=yield Kr(I,T),F=Object.assign(Object.assign({},T),{authToken:O});return yield Sn(I.appConfig,F),O}catch(O){if(!Ve(O)||401!==O.customData.serverCode&&404!==O.customData.serverCode){const F=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Sn(I.appConfig,F)}else yield Xt(I.appConfig);throw O}})).apply(this,arguments)}function gt(I){return void 0!==I&&2===I.registrationStatus}function qt(I){return 2===I.requestStatus&&!function tn(I){const T=Date.now();return T<I.creationTime||I.creationTime+I.expiresIn<T+36e5}(I)}function Vr(I){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:T})}function Xi(){return(Xi=(0,N.Z)(function*(I){const T=I,{installationEntry:O,registrationPromise:F}=yield wn(T);return F?F.catch(console.error):U(T).catch(console.error),O.fid})).apply(this,arguments)}function Ao(){return(Ao=(0,N.Z)(function*(I,T=!1){const O=I;return yield On(O),(yield U(O,T)).token})).apply(this,arguments)}function On(I){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,N.Z)(function*(I){const{registrationPromise:T}=yield wn(I);T&&(yield T)})).apply(this,arguments)}function Ws(I){return Me.create("missing-app-config-values",{valueName:I})}const Ur="installations",xt=I=>{const T=I.getProvider("app").getImmediate(),O=function ar(I){if(!I||!I.options)throw Ws("App Configuration");if(!I.name)throw Ws("App Name");const T=["projectId","apiKey","appId"];for(const O of T)if(!I.options[O])throw Ws(O);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(T);return{app:T,appConfig:O,heartbeatServiceProvider:(0,ie._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},en=I=>{const T=I.getProvider("app").getImmediate(),O=(0,ie._getProvider)(T,Ur).getImmediate();return{getId:()=>function Ti(I){return Xi.apply(this,arguments)}(O),getToken:W=>function To(I){return Ao.apply(this,arguments)}(O,W)}};(function Jn(){(0,ie._registerComponent)(new ge.wA(Ur,xt,"PUBLIC")),(0,ie._registerComponent)(new ge.wA("installations-internal",en,"PRIVATE"))})(),(0,ie.registerVersion)(le,$),(0,ie.registerVersion)(le,$,"esm2017");const ur="@firebase/remote-config",fn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Wp{constructor(T,O,F,W){this.client=T,this.storage=O,this.storageCache=F,this.logger=W}isCachedDataFresh(T,O){if(!O)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-O,W=F<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${W}.`),W}fetch(T){var O=this;return(0,N.Z)(function*(){const[F,W]=yield Promise.all([O.storage.getLastSuccessfulFetchTimestampMillis(),O.storage.getLastSuccessfulFetchResponse()]);if(W&&O.isCachedDataFresh(T.cacheMaxAgeMillis,F))return W;T.eTag=W&&W.eTag;const oe=yield O.client.fetch(T),we=[O.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===oe.status&&we.push(O.storage.setLastSuccessfulFetchResponse(oe)),yield Promise.all(we),oe})()}}function $h(I=navigator){return I.languages&&I.languages[0]||I.language}class di{constructor(T,O,F,W,oe,we){this.firebaseInstallations=T,this.sdkVersion=O,this.namespace=F,this.projectId=W,this.apiKey=oe,this.appId=we}fetch(T){var O=this;return(0,N.Z)(function*(){var F,W,oe;const[we,Ue]=yield Promise.all([O.firebaseInstallations.getId(),O.firebaseInstallations.getToken()]),ht=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${O.projectId}/namespaces/${O.namespace}:fetch?key=${O.apiKey}`,Ct={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},at={sdk_version:O.sdkVersion,app_instance_id:we,app_instance_id_token:Ue,app_id:O.appId,language_code:$h()},Dn={method:"POST",headers:Ct,body:JSON.stringify(at)},Un=fetch(ht,Dn),Vi=new Promise((na,ds)=>{T.signal.addEventListener(()=>{const Oc=new Error("The operation was aborted.");Oc.name="AbortError",ds(Oc)})});let ea;try{yield Promise.race([Un,Vi]),ea=yield Un}catch(na){let ds="fetch-client-network";throw"AbortError"===(null===(F=na)||void 0===F?void 0:F.name)&&(ds="fetch-timeout"),fn.create(ds,{originalErrorMessage:null===(W=na)||void 0===W?void 0:W.message})}let ta=ea.status;const Ls=ea.headers.get("ETag")||void 0;let ls,Ui;if(200===ea.status){let na;try{na=yield ea.json()}catch(ds){throw fn.create("fetch-client-parse",{originalErrorMessage:null===(oe=ds)||void 0===oe?void 0:oe.message})}ls=na.entries,Ui=na.state}if("INSTANCE_STATE_UNSPECIFIED"===Ui?ta=500:"NO_CHANGE"===Ui?ta=304:("NO_TEMPLATE"===Ui||"EMPTY_CONFIG"===Ui)&&(ls={}),304!==ta&&200!==ta)throw fn.create("fetch-status",{httpStatus:ta});return{status:ta,eTag:Ls,config:ls}})()}}class ba{constructor(T,O){this.client=T,this.storage=O}fetch(T){var O=this;return(0,N.Z)(function*(){const F=(yield O.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return O.attemptFetch(T,F)})()}attemptFetch(T,{throttleEndTimeMillis:O,backoffCount:F}){var W=this;return(0,N.Z)(function*(){yield function Zh(I,T){return new Promise((O,F)=>{const W=Math.max(T-Date.now(),0),oe=setTimeout(O,W);I.addEventListener(()=>{clearTimeout(oe),F(fn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,O);try{const oe=yield W.client.fetch(T);return yield W.storage.deleteThrottleMetadata(),oe}catch(oe){if(!function Kp(I){if(!(I instanceof re.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}(oe))throw oe;const we={throttleEndTimeMillis:Date.now()+(0,re.$s)(F),backoffCount:F+1};return yield W.storage.setThrottleMetadata(we),W.attemptFetch(T,we)}})()}}class Gh{constructor(T,O,F,W,oe){this.app=T,this._client=O,this._storageCache=F,this._storage=W,this._logger=oe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ea(I,T){var O;const F=I.target.error||void 0;return fn.create(T,{originalErrorMessage:F&&(null===(O=F)||void 0===O?void 0:O.message)})}const Mo="app_namespace_store";class cc{constructor(T,O,F,W=function $l(){return new Promise((I,T)=>{var O;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=W=>{T(Ea(W,"storage-open"))},F.onsuccess=W=>{I(W.target.result)},F.onupgradeneeded=W=>{0===W.oldVersion&&W.target.result.createObjectStore(Mo,{keyPath:"compositeKey"})}}catch(F){T(fn.create("storage-open",{originalErrorMessage:null===(O=F)||void 0===O?void 0:O.message}))}})}()){this.appId=T,this.appName=O,this.namespace=F,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var O=this;return(0,N.Z)(function*(){const F=yield O.openDbPromise;return new Promise((W,oe)=>{var we;const ot=F.transaction([Mo],"readonly").objectStore(Mo),ht=O.createCompositeKey(T);try{const Ct=ot.get(ht);Ct.onerror=at=>{oe(Ea(at,"storage-get"))},Ct.onsuccess=at=>{const Dn=at.target.result;W(Dn?Dn.value:void 0)}}catch(Ct){oe(fn.create("storage-get",{originalErrorMessage:null===(we=Ct)||void 0===we?void 0:we.message}))}})})()}set(T,O){var F=this;return(0,N.Z)(function*(){const W=yield F.openDbPromise;return new Promise((oe,we)=>{var Ue;const ht=W.transaction([Mo],"readwrite").objectStore(Mo),Ct=F.createCompositeKey(T);try{const at=ht.put({compositeKey:Ct,value:O});at.onerror=Dn=>{we(Ea(Dn,"storage-set"))},at.onsuccess=()=>{oe()}}catch(at){we(fn.create("storage-set",{originalErrorMessage:null===(Ue=at)||void 0===Ue?void 0:Ue.message}))}})})()}delete(T){var O=this;return(0,N.Z)(function*(){const F=yield O.openDbPromise;return new Promise((W,oe)=>{var we;const ot=F.transaction([Mo],"readwrite").objectStore(Mo),ht=O.createCompositeKey(T);try{const Ct=ot.delete(ht);Ct.onerror=at=>{oe(Ea(at,"storage-delete"))},Ct.onsuccess=()=>{W()}}catch(Ct){oe(fn.create("storage-delete",{originalErrorMessage:null===(we=Ct)||void 0===we?void 0:we.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Zl{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,N.Z)(function*(){const O=T.storage.getLastFetchStatus(),F=T.storage.getLastSuccessfulFetchTimestampMillis(),W=T.storage.getActiveConfig(),oe=yield O;oe&&(T.lastFetchStatus=oe);const we=yield F;we&&(T.lastSuccessfulFetchTimestampMillis=we);const Ue=yield W;Ue&&(T.activeConfig=Ue)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Hl(){return dc.apply(this,arguments)}function dc(){return(dc=(0,N.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(I){return!1}})).apply(this,arguments)}!function Qp(){(0,ie._registerComponent)(new ge.wA("remote-config",function I(T,{instanceIdentifier:O}){const F=T.getProvider("app").getImmediate(),W=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw fn.create("registration-window");if(!(0,re.hl)())throw fn.create("indexed-db-unavailable");const{projectId:oe,apiKey:we,appId:Ue}=F.options;if(!oe)throw fn.create("registration-project-id");if(!we)throw fn.create("registration-api-key");if(!Ue)throw fn.create("registration-app-id");const ot=new cc(Ue,F.name,O=O||"firebase"),ht=new Zl(ot),Ct=new ue.Yd(ur);Ct.logLevel=ue.in.ERROR;const at=new di(W,ie.SDK_VERSION,O,oe,we,Ue),Dn=new ba(at,ot),Un=new Wp(Dn,ot,ht,Ct),Vi=new Gh(F,Un,ht,ot,Ct);return function on(I){const T=(0,re.m9)(I);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Vi),Vi},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(ur,"0.3.11"),(0,ie.registerVersion)(ur,"0.3.11","esm2017")}();const Gl="/firebase-messaging-sw.js",Ys="/firebase-cloud-messaging-push-scope",du="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Qs="google.c.a.c_id",qh="google.c.a.c_l",ql="google.c.a.ts",Oo="google.c.a.e";var Ts=(()=>{return(I=Ts||(Ts={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Ts;var I})();function hi(I){const T=new Uint8Array(I);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Mi(I){const O=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(O),W=new Uint8Array(F.length);for(let oe=0;oe<F.length;++oe)W[oe]=F.charCodeAt(oe);return W}const Br="fcm_token_details_db",zl="fcm_token_object_Store";function hu(I){return Wl.apply(this,arguments)}function Wl(){return Wl=(0,N.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(oe=>oe.name).includes(Br))return null;let T=null;return(yield(0,se.X3)(Br,5,{upgrade:(F=(0,N.Z)(function*(W,oe,we,Ue){var ot;if(oe<2||!W.objectStoreNames.contains(zl))return;const ht=Ue.objectStore(zl),Ct=yield ht.index("fcmSenderId").get(I);if(yield ht.clear(),Ct)if(2===oe){const at=Ct;if(!at.auth||!at.p256dh||!at.endpoint)return;T={token:at.fcmToken,createTime:null!==(ot=at.createTime)&&void 0!==ot?ot:Date.now(),subscriptionOptions:{auth:at.auth,p256dh:at.p256dh,endpoint:at.endpoint,swScope:at.swScope,vapidKey:"string"==typeof at.vapidKey?at.vapidKey:hi(at.vapidKey)}}}else if(3===oe){const at=Ct;T={token:at.fcmToken,createTime:at.createTime,subscriptionOptions:{auth:hi(at.auth),p256dh:hi(at.p256dh),endpoint:at.endpoint,swScope:at.swScope,vapidKey:hi(at.vapidKey)}}}else if(4===oe){const at=Ct;T={token:at.fcmToken,createTime:at.createTime,subscriptionOptions:{auth:hi(at.auth),p256dh:hi(at.p256dh),endpoint:at.endpoint,swScope:at.swScope,vapidKey:hi(at.vapidKey)}}}}),function(oe,we,Ue,ot){return F.apply(this,arguments)})})).close(),yield(0,se.Lj)(Br),yield(0,se.Lj)("fcm_vapid_details_db"),yield(0,se.Lj)("undefined"),Ta(T)?T:null;var F}),Wl.apply(this,arguments)}function Ta(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:T}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Oi="firebase-messaging-store";let As=null;function bn(){return As||(As=(0,se.X3)("firebase-messaging-database",1,{upgrade:(I,T)=>{0===T&&I.createObjectStore(Oi)}})),As}function Kl(I){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,N.Z)(function*(I){const T=Dr(I),F=yield(yield bn()).transaction(Oi).objectStore(Oi).get(T);if(F)return F;{const W=yield hu(I.appConfig.senderId);if(W)return yield ns(I,W),W}})).apply(this,arguments)}function ns(I,T){return cr.apply(this,arguments)}function cr(){return(cr=(0,N.Z)(function*(I,T){const O=Dr(I),W=(yield bn()).transaction(Oi,"readwrite");return yield W.objectStore(Oi).put(T,O),yield W.done,T})).apply(this,arguments)}function Jr(I){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,N.Z)(function*(I){const T=Dr(I),F=(yield bn()).transaction(Oi,"readwrite");yield F.objectStore(Oi).delete(T),yield F.done})).apply(this,arguments)}function Dr({appConfig:I}){return I.appId}const Fn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ro(I,T){return hc.apply(this,arguments)}function hc(){return(hc=(0,N.Z)(function*(I,T){var O;const F=yield Po(I),W=Aa(T),oe={method:"POST",headers:F,body:JSON.stringify(W)};let we;try{we=yield(yield fetch(Xs(I.appConfig),oe)).json()}catch(Ue){throw Fn.create("token-subscribe-failed",{errorInfo:null===(O=Ue)||void 0===O?void 0:O.toString()})}if(we.error)throw Fn.create("token-subscribe-failed",{errorInfo:we.error.message});if(!we.token)throw Fn.create("token-subscribe-no-token");return we.token})).apply(this,arguments)}function lr(I,T){return Js.apply(this,arguments)}function Js(){return(Js=(0,N.Z)(function*(I,T){var O;const F=yield Po(I),W=Aa(T.subscriptionOptions),oe={method:"PATCH",headers:F,body:JSON.stringify(W)};let we;try{we=yield(yield fetch(`${Xs(I.appConfig)}/${T.token}`,oe)).json()}catch(Ue){throw Fn.create("token-update-failed",{errorInfo:null===(O=Ue)||void 0===O?void 0:O.toString()})}if(we.error)throw Fn.create("token-update-failed",{errorInfo:we.error.message});if(!we.token)throw Fn.create("token-update-no-token");return we.token})).apply(this,arguments)}function xs(I,T){return lt.apply(this,arguments)}function lt(){return(lt=(0,N.Z)(function*(I,T){var O;const W={method:"DELETE",headers:yield Po(I)};try{const we=yield(yield fetch(`${Xs(I.appConfig)}/${T}`,W)).json();if(we.error)throw Fn.create("token-unsubscribe-failed",{errorInfo:we.error.message})}catch(oe){throw Fn.create("token-unsubscribe-failed",{errorInfo:null===(O=oe)||void 0===O?void 0:O.toString()})}})).apply(this,arguments)}function Xs({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Po(I){return dr.apply(this,arguments)}function dr(){return(dr=(0,N.Z)(function*({appConfig:I,installations:T}){const O=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${O}`})})).apply(this,arguments)}function Aa({p256dh:I,auth:T,endpoint:O,vapidKey:F}){const W={web:{endpoint:O,auth:T,p256dh:I}};return F!==du&&(W.web.applicationPubKey=F),W}const fc=6048e5;function fu(I){return No.apply(this,arguments)}function No(){return(No=(0,N.Z)(function*(I){const T=yield vr(I.swRegistration,I.vapidKey),O={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:T.endpoint,auth:hi(T.getKey("auth")),p256dh:hi(T.getKey("p256dh"))},F=yield Kl(I.firebaseDependencies);if(F){if(pu(F.subscriptionOptions,O))return Date.now()>=F.createTime+fc?zh(I,{token:F.token,createTime:Date.now(),subscriptionOptions:O}):F.token;try{yield xs(I.firebaseDependencies,F.token)}catch(W){console.warn(W)}return ko(I.firebaseDependencies,O)}return ko(I.firebaseDependencies,O)})).apply(this,arguments)}function Ie(I){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,N.Z)(function*(I){const T=yield Kl(I.firebaseDependencies);T&&(yield xs(I.firebaseDependencies,T.token),yield Jr(I.firebaseDependencies));const O=yield I.swRegistration.pushManager.getSubscription();return!O||O.unsubscribe()})).apply(this,arguments)}function zh(I,T){return an.apply(this,arguments)}function an(){return(an=(0,N.Z)(function*(I,T){try{const O=yield lr(I.firebaseDependencies,T),F=Object.assign(Object.assign({},T),{token:O,createTime:Date.now()});return yield ns(I.firebaseDependencies,F),O}catch(O){throw yield Ie(I),O}})).apply(this,arguments)}function ko(I,T){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,N.Z)(function*(I,T){const F={token:yield Ro(I,T),createTime:Date.now(),subscriptionOptions:T};return yield ns(I,F),F.token})).apply(this,arguments)}function vr(I,T){return rs.apply(this,arguments)}function rs(){return(rs=(0,N.Z)(function*(I,T){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Mi(T)})})).apply(this,arguments)}function pu(I,T){return T.vapidKey===I.vapidKey&&T.endpoint===I.endpoint&&T.auth===I.auth&&T.p256dh===I.p256dh}function gu(I){const T={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Yl(I,T){if(!T.notification)return;I.notification={};const O=T.notification.title;O&&(I.notification.title=O);const F=T.notification.body;F&&(I.notification.body=F);const W=T.notification.image;W&&(I.notification.image=W)}(T,I),function Fo(I,T){!T.data||(I.data=T.data)}(T,I),function eo(I,T){var O,F,W,oe,we;if(!T.fcmOptions&&!(null===(O=T.notification)||void 0===O?void 0:O.click_action))return;I.fcmOptions={};const Ue=null!==(W=null===(F=T.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==W?W:null===(oe=T.notification)||void 0===oe?void 0:oe.click_action;Ue&&(I.fcmOptions.link=Ue);const ot=null===(we=T.fcmOptions)||void 0===we?void 0:we.analytics_label;ot&&(I.fcmOptions.analyticsLabel=ot)}(T,I),T}function Gn(I){return"object"==typeof I&&!!I&&Qs in I}function fi(I,T){const O=[];for(let F=0;F<I.length;F++)O.push(I.charAt(F)),F<T.length&&O.push(T.charAt(F));return O.join("")}function Pi(I){return Fn.create("missing-app-config-values",{valueName:I})}fi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),fi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class pi{constructor(T,O,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function mu(I){if(!I||!I.options)throw Pi("App Configuration Object");if(!I.name)throw Pi("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:O}=I;for(const F of T)if(!O[F])throw Pi(F);return{appName:I.name,projectId:O.projectId,apiKey:O.apiKey,appId:O.appId,senderId:O.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:W,installations:O,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Ql(I){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,N.Z)(function*(I){var T;try{I.swRegistration=yield navigator.serviceWorker.register(Gl,{scope:Ys}),I.swRegistration.update().catch(()=>{})}catch(O){throw Fn.create("failed-service-worker-registration",{browserErrorMessage:null===(T=O)||void 0===T?void 0:T.message})}})).apply(this,arguments)}function Wh(I,T){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,N.Z)(function*(I,T){if(!T&&!I.swRegistration&&(yield Ql(I)),T||!I.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Fn.create("invalid-sw-registration");I.swRegistration=T}})).apply(this,arguments)}function Vo(I,T){return to.apply(this,arguments)}function to(){return(to=(0,N.Z)(function*(I,T){T?I.vapidKey=T:I.vapidKey||(I.vapidKey=du)})).apply(this,arguments)}function xa(){return(xa=(0,N.Z)(function*(I,T){if(!navigator)throw Fn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Fn.create("permission-blocked");return yield Vo(I,null==T?void 0:T.vapidKey),yield Wh(I,null==T?void 0:T.serviceWorkerRegistration),fu(I)})).apply(this,arguments)}function pc(I,T,O){return gc.apply(this,arguments)}function gc(){return(gc=(0,N.Z)(function*(I,T,O){const F=Bo(T);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:O[Qs],message_name:O[qh],message_time:O[ql],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Bo(I){switch(I){case Ts.NOTIFICATION_CLICKED:return"notification_open";case Ts.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ma(){return(Ma=(0,N.Z)(function*(I,T){const O=T.data;if(!O.isFirebaseMessaging)return;I.onMessageHandler&&O.messageType===Ts.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(gu(O)):I.onMessageHandler.next(gu(O)));const F=O.data;Gn(F)&&"1"===F[Oo]&&(yield pc(I,O.messageType,F))})).apply(this,arguments)}const yu="@firebase/messaging",_u=I=>{const T=new pi(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",O=>function Kh(I,T){return Ma.apply(this,arguments)}(T,O)),T},Jl=I=>{const T=I.getProvider("messaging").getImmediate();return{getToken:F=>function Uo(I,T){return xa.apply(this,arguments)}(T,F)}};function Ln(){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,N.Z)(function*(){try{yield(0,re.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Xp(){(0,ie._registerComponent)(new ge.wA("messaging",_u,"PUBLIC")),(0,ie._registerComponent)(new ge.wA("messaging-internal",Jl,"PRIVATE")),(0,ie.registerVersion)(yu,"0.9.16"),(0,ie.registerVersion)(yu,"0.9.16","esm2017")}();const Os="analytics",vu="firebase_id",ed="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",is="https://www.googletagmanager.com/gtag/js",In=new ue.Yd("@firebase/analytics");function ef(I){return Promise.all(I.map(T=>T.catch(O=>O)))}function td(I,T){const O=document.createElement("script");O.src=`${is}?l=${I}&id=${T}`,O.async=!0,document.head.appendChild(O)}function nd(I,T,O,F,W,oe){return _c.apply(this,arguments)}function _c(){return(_c=(0,N.Z)(function*(I,T,O,F,W,oe){const we=F[W];try{if(we)yield T[we];else{const ot=(yield ef(O)).find(ht=>ht.measurementId===W);ot&&(yield T[ot.appId])}}catch(Ue){In.error(Ue)}I("config",W,oe)})).apply(this,arguments)}function rd(I,T,O,F,W){return tf.apply(this,arguments)}function tf(){return(tf=(0,N.Z)(function*(I,T,O,F,W){try{let oe=[];if(W&&W.send_to){let we=W.send_to;Array.isArray(we)||(we=[we]);const Ue=yield ef(O);for(const ot of we){const ht=Ue.find(at=>at.measurementId===ot),Ct=ht&&T[ht.appId];if(!Ct){oe=[];break}oe.push(Ct)}}0===oe.length&&(oe=Object.values(T)),yield Promise.all(oe),I("event",F,W||{})}catch(oe){In.error(oe)}})).apply(this,arguments)}function mn(){const I=window.document.getElementsByTagName("script");for(const T of Object.values(I))if(T.src&&T.src.includes(is))return T;return null}const Je=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),nf=new class hr{constructor(T={},O=1e3){this.throttleMetadata=T,this.intervalMillis=O}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,O){this.throttleMetadata[T]=O}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Na(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function id(I){return ka.apply(this,arguments)}function ka(){return(ka=(0,N.Z)(function*(I){var T;const{appId:O,apiKey:F}=I,W={method:"GET",headers:Na(F)},oe=ed.replace("{app-id}",O),we=yield fetch(oe,W);if(200!==we.status&&304!==we.status){let Ue="";try{const ot=yield we.json();(null===(T=ot.error)||void 0===T?void 0:T.message)&&(Ue=ot.error.message)}catch(ot){}throw Je.create("config-fetch-failed",{httpStatus:we.status,responseMessage:Ue})}return we.json()})).apply(this,arguments)}function eg(I){return vc.apply(this,arguments)}function vc(){return(vc=(0,N.Z)(function*(I,T=nf,O){const{appId:F,apiKey:W,measurementId:oe}=I.options;if(!F)throw Je.create("no-app-id");if(!W){if(oe)return{measurementId:oe,appId:F};throw Je.create("no-api-key")}const we=T.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ue=new Iu;return setTimeout((0,N.Z)(function*(){Ue.abort()}),void 0!==O?O:6e4),jo({appId:F,apiKey:W,measurementId:oe},we,Ue,T)})).apply(this,arguments)}function jo(I,T,O){return It.apply(this,arguments)}function It(){return(It=(0,N.Z)(function*(I,{throttleEndTimeMillis:T,backoffCount:O},F,W=nf){var oe,we;const{appId:Ue,measurementId:ot}=I;try{yield no(F,T)}catch(ht){if(ot)return In.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ot} provided in the "measurementId" field in the local Firebase config. [${null===(oe=ht)||void 0===oe?void 0:oe.message}]`),{appId:Ue,measurementId:ot};throw ht}try{const ht=yield id(I);return W.deleteThrottleMetadata(Ue),ht}catch(ht){const Ct=ht;if(!ro(Ct)){if(W.deleteThrottleMetadata(Ue),ot)return In.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ot} provided in the "measurementId" field in the local Firebase config. [${null==Ct?void 0:Ct.message}]`),{appId:Ue,measurementId:ot};throw ht}const at=503===Number(null===(we=null==Ct?void 0:Ct.customData)||void 0===we?void 0:we.httpStatus)?(0,re.$s)(O,W.intervalMillis,30):(0,re.$s)(O,W.intervalMillis),Dn={throttleEndTimeMillis:Date.now()+at,backoffCount:O+1};return W.setThrottleMetadata(Ue,Dn),In.debug(`Calling attemptFetch again in ${at} millis`),jo(I,Dn,F,W)}})).apply(this,arguments)}function no(I,T){return new Promise((O,F)=>{const W=Math.max(T-Date.now(),0),oe=setTimeout(O,W);I.addEventListener(()=>{clearTimeout(oe),F(Je.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function ro(I){if(!(I instanceof re.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Iu{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let $o,os;function Zo(){return(Zo=(0,N.Z)(function*(I,T,O,F,W){if(W&&W.global)I("event",O,F);else{const oe=yield T;I("event",O,Object.assign(Object.assign({},F),{send_to:oe}))}})).apply(this,arguments)}function zo(I){os=I}function so(I){$o=I}function Ni(){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,N.Z)(function*(){var I;if(!(0,re.hl)())return In.warn(Je.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(T){return In.warn(Je.create("indexeddb-unavailable",{errorInfo:null===(I=T)||void 0===I?void 0:I.toString()}).message),!1}return!0})).apply(this,arguments)}function as(){return(as=(0,N.Z)(function*(I,T,O,F,W,oe,we){var Ue;const ot=eg(I);ot.then(Un=>{O[Un.measurementId]=Un.appId,I.options.measurementId&&Un.measurementId!==I.options.measurementId&&In.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Un.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Un=>In.error(Un)),T.push(ot);const ht=Ni().then(Un=>{if(Un)return F.getId()}),[Ct,at]=yield Promise.all([ot,ht]);mn()||td(oe,Ct.measurementId),os&&(W("consent","default",os),zo(void 0)),W("js",new Date);const Dn=null!==(Ue=null==we?void 0:we.config)&&void 0!==Ue?Ue:{};return Dn.origin="firebase",Dn.update=!0,null!=at&&(Dn[vu]=at),W("config",Ct.measurementId,Dn),$o&&(W("set",$o),so(void 0)),Ct.measurementId})).apply(this,arguments)}class tr{constructor(T){this.app=T}_delete(){return delete Bt[this.app.options.appId],Promise.resolve()}}let Bt={},ki=[];const us={};let Sr,yn,cs="dataLayer",Fa=!1;function sd(I,T,O){!function Wo(){const I=[];if((0,re.ru)()&&I.push("This is a browser extension environment."),(0,re.zI)()||I.push("Cookies are not available."),I.length>0){const T=I.map((F,W)=>`(${W+1}) ${F}`).join(" "),O=Je.create("invalid-analytics-context",{errorInfo:T});In.warn(O.message)}}();const F=I.options.appId;if(!F)throw Je.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Je.create("no-api-key");In.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Bt[F])throw Je.create("already-exists",{id:F});if(!Fa){!function bu(I){let T=[];Array.isArray(window[I])?T=window[I]:window[I]=T}(cs);const{wrappedGtag:oe,gtagCore:we}=function Eu(I,T,O,F,W){let oe=function(...we){window[F].push(arguments)};return window[W]&&"function"==typeof window[W]&&(oe=window[W]),window[W]=function Pa(I,T,O,F){function oe(){return(oe=(0,N.Z)(function*(we,Ue,ot){try{"event"===we?yield rd(I,T,O,Ue,ot):"config"===we?yield nd(I,T,O,F,Ue,ot):"consent"===we?I("consent","update",ot):I("set",Ue)}catch(ht){In.error(ht)}})).apply(this,arguments)}return function W(we,Ue,ot){return oe.apply(this,arguments)}}(oe,I,T,O),{gtagCore:oe,wrappedGtag:window[W]}}(Bt,ki,us,cs,"gtag");yn=oe,Sr=we,Fa=!0}return Bt[F]=function Ec(I,T,O,F,W,oe,we){return as.apply(this,arguments)}(I,ki,us,T,Sr,cs,O),new tr(I)}function tg(){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,N.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(I){return!1}})).apply(this,arguments)}const sf="@firebase/analytics";!function Li(){(0,ie._registerComponent)(new ge.wA(Os,(T,{options:O})=>sd(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),O),"PUBLIC")),(0,ie._registerComponent)(new ge.wA("analytics-internal",function I(T){try{const O=T.getProvider(Os).getImmediate();return{logEvent:(F,W,oe)=>function Yo(I,T,O,F){I=(0,re.m9)(I),function er(I,T,O,F,W){return Zo.apply(this,arguments)}(yn,Bt[I.app.options.appId],T,O,F).catch(W=>In.error(W))}(O,F,W,oe)}}catch(O){throw Je.create("interop-component-reg-failed",{reason:O})}},"PRIVATE")),(0,ie.registerVersion)(sf,"0.8.0"),(0,ie.registerVersion)(sf,"0.8.0","esm2017")}();var od=P(4408),Ns=P(7565);const ad=new class Cc extends Ns.v{}(class Du extends od.o{constructor(T,O){super(T,O),this.scheduler=T,this.work=O}schedule(T,O=0){return O>0?super.schedule(T,O):(this.delay=O,this.state=T,this.scheduler.flush(this),this)}execute(T,O){return O>0||this.closed?super.execute(T,O):this._execute(T,O)}requestAsyncId(T,O,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(T,O,F):T.flush(this)}});var ng=P(4986),rg=P(8505),Qo=P(9468),dt=P(5363);const Dc=new l.GfV("7.2.0"),La="__angularfire_symbol__analyticsIsSupported",Tc="__angularfire_symbol__remoteConfigIsSupported",Ac="__angularfire_symbol__messagingIsSupported";function xc(I,T,O){if(T){if(1===T.length)return T[0];const oe=T.filter(we=>we.app===O);if(1===oe.length)return oe[0]}return O.container.getProvider(I).getImmediate({optional:!0})}globalThis[La]||(globalThis[La]=tg().then(I=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=I)),globalThis[Ac]||(globalThis[Ac]=Ln().then(I=>globalThis.__angularfire_symbol__messagingIsSupportedValue=I)),globalThis[Tc]||(globalThis[Tc]=Hl().then(I=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=I));const zn=(I,T)=>{const O=T?[T]:(0,J.C6)(),F=[];return O.forEach(W=>{W.container.getProvider(I).instances.forEach(we=>{F.includes(we)||F.push(we)})}),F};function Vn(){}class Jo{constructor(T,O=ad){this.zone=T,this.delegate=O}now(){return this.delegate.now()}schedule(T,O,F){const W=this.zone;return this.delegate.schedule(function(we){W.runGuarded(()=>{T.apply(this,[we])})},O,F)}}class Tu{constructor(T){this.zone=T,this.task=null}call(T,O){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vn,{},Vn,Vn)),O.pipe((0,rg.b)({next:F,complete:F,error:F})).subscribe(T).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Au=(()=>{class I{constructor(O){this.ngZone=O,this.outsideAngular=O.runOutsideAngular(()=>new Jo(Zone.current)),this.insideAngular=O.run(()=>new Jo(Zone.current,ng.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(O){return new(O||I)(l.LFG(l.R0b))},I.\u0275prov=l.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function ks(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Xo(I){return ks(),function Fs(I){return function(O){return(O=O.lift(new Tu(I.ngZone))).pipe((0,Qo.R)(I.outsideAngular),(0,dt.Q)(I.insideAngular))}}(ks())(I)}},2090:(We,ve,P)=>{P.d(ve,{$s:()=>$t,BH:()=>Be,G6:()=>ze,L:()=>se,LL:()=>te,Mn:()=>Ce,Sg:()=>Ee,UG:()=>de,US:()=>ge,ZB:()=>q,ZR:()=>Se,b$:()=>Ve,d:()=>Ne,eu:()=>Z,hl:()=>ye,jU:()=>fe,m9:()=>Di,ne:()=>st,pd:()=>_r,r3:()=>Gr,ru:()=>Me,tV:()=>le,uI:()=>Le,vZ:()=>Cr,w1:()=>Ke,xO:()=>Ji,xb:()=>Hn,z$:()=>Oe,zI:()=>X,zd:()=>zr});const ie=function(U){const H=[];let V=0;for(let B=0;B<U.length;B++){let G=U.charCodeAt(B);G<128?H[V++]=G:G<2048?(H[V++]=G>>6|192,H[V++]=63&G|128):55296==(64512&G)&&B+1<U.length&&56320==(64512&U.charCodeAt(B+1))?(G=65536+((1023&G)<<10)+(1023&U.charCodeAt(++B)),H[V++]=G>>18|240,H[V++]=G>>12&63|128,H[V++]=G>>6&63|128,H[V++]=63&G|128):(H[V++]=G>>12|224,H[V++]=G>>6&63|128,H[V++]=63&G|128)}return H},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,H){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const V=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,B=[];for(let G=0;G<U.length;G+=3){const Ae=U[G],$e=G+1<U.length,gt=$e?U[G+1]:0,qt=G+2<U.length,tn=qt?U[G+2]:0;let Ti=(15&gt)<<2|tn>>6,Xi=63&tn;qt||(Xi=64,$e||(Ti=64)),B.push(V[Ae>>2],V[(3&Ae)<<4|gt>>4],V[Ti],V[Xi])}return B.join("")},encodeString(U,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(U):this.encodeByteArray(ie(U),H)},decodeString(U,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(U):function(U){const H=[];let V=0,B=0;for(;V<U.length;){const G=U[V++];if(G<128)H[B++]=String.fromCharCode(G);else if(G>191&&G<224){const Ae=U[V++];H[B++]=String.fromCharCode((31&G)<<6|63&Ae)}else if(G>239&&G<365){const qt=((7&G)<<18|(63&U[V++])<<12|(63&U[V++])<<6|63&U[V++])-65536;H[B++]=String.fromCharCode(55296+(qt>>10)),H[B++]=String.fromCharCode(56320+(1023&qt))}else{const Ae=U[V++],$e=U[V++];H[B++]=String.fromCharCode((15&G)<<12|(63&Ae)<<6|63&$e)}}return H.join("")}(this.decodeStringToByteArray(U,H))},decodeStringToByteArray(U,H){this.init_();const V=H?this.charToByteMapWebSafe_:this.charToByteMap_,B=[];for(let G=0;G<U.length;){const Ae=V[U.charAt(G++)],gt=G<U.length?V[U.charAt(G)]:0;++G;const tn=G<U.length?V[U.charAt(G)]:64;++G;const Pt=G<U.length?V[U.charAt(G)]:64;if(++G,null==Ae||null==gt||null==tn||null==Pt)throw Error();B.push(Ae<<2|gt>>4),64!==tn&&(B.push(gt<<4&240|tn>>2),64!==Pt&&B.push(tn<<6&192|Pt))}return B},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},se=function(U){return function(U){const H=ie(U);return ge.encodeByteArray(H,!0)}(U).replace(/\./g,"")},le=function(U){try{return ge.decodeString(U,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function q(U,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return H}for(const V in H)!H.hasOwnProperty(V)||!ee(V)||(U[V]=q(U[V],H[V]));return U}function ee(U){return"__proto__"!==U}class Be{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,V)=>{this.resolve=H,this.reject=V})}wrapCallback(H){return(V,B)=>{V?this.reject(V):this.resolve(B),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(V):H(V,B))}}}function Ee(U,H){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const B=H||"demo-project",G=U.iat||0,Ae=U.sub||U.user_id;if(!Ae)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const $e=Object.assign({iss:`https://securetoken.google.com/${B}`,aud:B,iat:G,exp:G+3600,auth_time:G,sub:Ae,user_id:Ae,firebase:{sign_in_provider:"custom",identities:{}}},U);return[se(JSON.stringify({alg:"none",type:"JWT"})),se(JSON.stringify($e)),""].join(".")}function Oe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Le(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function de(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function fe(){return"object"==typeof self&&self.self===self}function Me(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function Ve(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ne(){return Oe().indexOf("Electron/")>=0}function Ke(){const U=Oe();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function Ce(){return Oe().indexOf("MSAppHost/")>=0}function ze(){return!de()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ye(){return"object"==typeof indexedDB}function Z(){return new Promise((U,H)=>{try{let V=!0;const B="validate-browser-context-for-indexeddb-analytics-module",G=self.indexedDB.open(B);G.onsuccess=()=>{G.result.close(),V||self.indexedDB.deleteDatabase(B),U(!0)},G.onupgradeneeded=()=>{V=!1},G.onerror=()=>{var Ae;H((null===(Ae=G.error)||void 0===Ae?void 0:Ae.message)||"")}}catch(V){H(V)}})}function X(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Se extends Error{constructor(H,V,B){super(V),this.code=H,this.customData=B,this.name="FirebaseError",Object.setPrototypeOf(this,Se.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,te.prototype.create)}}class te{constructor(H,V,B){this.service=H,this.serviceName=V,this.errors=B}create(H,...V){const B=V[0]||{},G=`${this.service}/${H}`,Ae=this.errors[H],$e=Ae?function ft(U,H){return U.replace(Rt,(V,B)=>{const G=H[B];return null!=G?String(G):`<${B}?>`})}(Ae,B):"Error";return new Se(G,`${this.serviceName}: ${$e} (${G}).`,B)}}const Rt=/\{\$([^}]+)}/g;function Gr(U,H){return Object.prototype.hasOwnProperty.call(U,H)}function Hn(U){for(const H in U)if(Object.prototype.hasOwnProperty.call(U,H))return!1;return!0}function Cr(U,H){if(U===H)return!0;const V=Object.keys(U),B=Object.keys(H);for(const G of V){if(!B.includes(G))return!1;const Ae=U[G],$e=H[G];if(Ht(Ae)&&Ht($e)){if(!Cr(Ae,$e))return!1}else if(Ae!==$e)return!1}for(const G of B)if(!V.includes(G))return!1;return!0}function Ht(U){return null!==U&&"object"==typeof U}function Ji(U){const H=[];for(const[V,B]of Object.entries(U))Array.isArray(B)?B.forEach(G=>{H.push(encodeURIComponent(V)+"="+encodeURIComponent(G))}):H.push(encodeURIComponent(V)+"="+encodeURIComponent(B));return H.length?"&"+H.join("&"):""}function zr(U){const H={};return U.replace(/^\?/,"").split("&").forEach(B=>{if(B){const[G,Ae]=B.split("=");H[decodeURIComponent(G)]=decodeURIComponent(Ae)}}),H}function _r(U){const H=U.indexOf("?");if(!H)return"";const V=U.indexOf("#",H);return U.substring(H,V>0?V:void 0)}function st(U,H){const V=new Sn(U,H);return V.subscribe.bind(V)}class Sn{constructor(H,V){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=V,this.task.then(()=>{H(this)}).catch(B=>{this.error(B)})}next(H){this.forEachObserver(V=>{V.next(H)})}error(H){this.forEachObserver(V=>{V.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,V,B){let G;if(void 0===H&&void 0===V&&void 0===B)throw new Error("Missing Observer.");G=function Xt(U,H){if("object"!=typeof U||null===U)return!1;for(const V of H)if(V in U&&"function"==typeof U[V])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:V,complete:B},void 0===G.next&&(G.next=Ii),void 0===G.error&&(G.error=Ii),void 0===G.complete&&(G.complete=Ii);const Ae=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?G.error(this.finalError):G.complete()}catch($e){}}),this.observers.push(G),Ae}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let V=0;V<this.observers.length;V++)this.sendOne(V,H)}sendOne(H,V){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{V(this.observers[H])}catch(B){"undefined"!=typeof console&&console.error&&console.error(B)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ii(){}function $t(U,H=1e3,V=2){const B=H*Math.pow(V,U),G=Math.round(.5*B*(Math.random()-.5)*2);return Math.min(144e5,B+G)}function Di(U){return U&&U._delegate?U._delegate:U}},8358:(We,ve,P)=>{var l=P(5e3);let J=null;function N(){return J}const ue=new l.OlP("DocumentToken");let se=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function le(){return(0,l.LFG)(q)}()},providedIn:"platform"}),n})();const $=new l.OlP("Location Initialized");let q=(()=>{class n extends se{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){ee()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){ee()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ue))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Be(){return new q((0,l.LFG)(ue))}()},providedIn:"platform"}),n})();function ee(){return!!window.history.pushState}function Ee(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Oe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Le(n){return n&&"?"!==n[0]?"?"+n:n}let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function fe(n){const e=(0,l.LFG)(ue).location;return new Ve((0,l.LFG)(se),e&&e.origin||"")}()},providedIn:"root"}),n})();const Me=new l.OlP("appBaseHref");let Ve=(()=>{class n extends de{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ee(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Le(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const f=this.prepareExternalUrl(o+Le(u));this._platformLocation.pushState(t,r,f)}replaceState(t,r,o,u){const f=this.prepareExternalUrl(o+Le(u));this._platformLocation.replaceState(t,r,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(se),l.LFG(Me,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Ne=(()=>{class n extends de{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ee(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let f=this.prepareExternalUrl(o+Le(u));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.pushState(t,r,f)}replaceState(t,r,o,u){let f=this.prepareExternalUrl(o+Le(u));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(se),l.LFG(Me,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Ke=(()=>{class n{constructor(t,r){this._subject=new l.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Oe(ze(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Le(r))}normalize(t){return n.stripTrailingSlash(function Qe(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ze(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Le,n.joinWithSlash=Ee,n.stripTrailingSlash=Oe,n.\u0275fac=function(t){return new(t||n)(l.LFG(de),l.LFG(se))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Ce(){return new Ke((0,l.LFG)(de),(0,l.LFG)(se))}()},providedIn:"root"}),n})();function ze(n){return n.replace(/\/index.html$/,"")}var X=(()=>((X=X||{})[X.Zero=0]="Zero",X[X.One=1]="One",X[X.Two=2]="Two",X[X.Few=3]="Few",X[X.Many=4]="Many",X[X.Other=5]="Other",X))();const zr=l.kL8;class zt{}let fn=(()=>{class n extends zt{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(zr(r||this.locale)(t)){case X.Zero:return"zero";case X.One:return"one";case X.Two:return"two";case X.Few:return"few";case X.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.soG))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Pn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new on,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ll("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ll("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class on{constructor(){this.$implicit=null,this.ngIf=null}}function Ll(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(e)}'.`)}let Oo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[{provide:zt,useClass:fn}]}),n})();function Da(n){return"server"===n}let Ta=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new Jp((0,l.LFG)(ue),window)}),n})();class Jp{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Oi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const f=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(f)return f}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=gn(this.window.history)||gn(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function gn(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ss extends class Kl extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){J||(J=n)}(new Ss)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function cr(){return ns=ns||document.querySelector("base"),ns?ns.getAttribute("href"):null}();return null==t?null:function Ri(n){Jr=Jr||document.createElement("a"),Jr.setAttribute("href",n);const e=Jr.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ns=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function _a(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Jr,ns=null;const Dr=new l.OlP("TRANSITION_ID"),Fn=[{provide:l.ip1,useFactory:function Tr(n,e,t){return()=>{t.get(l.CZH).donePromise.then(()=>{const r=N(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Dr,ue,l.zs3],multi:!0}];class Ro{static init(){(0,l.VLi)(new Ro)}addToWindow(e){l.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},l.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(r=>{const o=l.dqk.getAllAngularTestabilities();let u=o.length,f=!1;const y=function(b){f=f||b,u--,0==u&&r(f)};o.forEach(function(b){b.whenStable(y)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let hc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const lr=new l.OlP("EventManagerPlugins");let Js=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const f=o[u];if(f.supports(t))return this._eventNameToPlugin.set(t,f),f}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(lr),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class xs{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=N().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let lt=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Xs=(()=>{class n extends lt{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const f=this._doc.createElement("style");f.textContent=u,o.push(r.appendChild(f))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Po),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Po))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ue))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Po(n){N().remove(n)}const dr={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Aa=/%COMP%/g;function an(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?an(n,o,t):(o=o.replace(Aa,n),t.push(o))}return t}function ko(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let vr=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new rs(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case l.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Yl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case l.ifc.ShadowDom:return new Fo(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=an(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Js),l.LFG(Xs),l.LFG(l.AFp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class rs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(dr[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=dr[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=dr[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(l.JOm.DashCase|l.JOm.Important)?e.style.setProperty(t,r,o&l.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&l.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ko(r)):this.eventManager.addEventListener(e,t,ko(r))}}class Yl extends rs{constructor(e,t,r,o){super(e),this.component=r;const u=an(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Nt(n){return"_ngcontent-%COMP%".replace(Aa,n)}(o+"-"+r.id),this.hostAttr=function zh(n){return"_nghost-%COMP%".replace(Aa,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Fo extends rs{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=an(o.id,o.styles,[]);for(let f=0;f<u.length;f++){const y=document.createElement("style");y.textContent=u[f],this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let eo=(()=>{class n extends xs{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ue))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Gn=["alt","control","meta","shift"],mu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Pi={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},pi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ql=(()=>{class n extends xs{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),f=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,u.domEventName,f))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let f="";if(Gn.forEach(b=>{const C=r.indexOf(b);C>-1&&(r.splice(C,1),f+=b+".")}),f+=u,0!=r.length||0===u.length)return null;const y={};return y.domEventName=o,y.fullKey=f,y}static getEventFullKey(t){let r="",o=function Lo(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Pi.hasOwnProperty(e)&&(e=Pi[e]))}return mu[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Gn.forEach(u=>{u!=o&&pi[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ue))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Uo=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:"browser"},{provide:l.g9A,useValue:function Wh(){Ss.makeCurrent(),Ro.init()},multi:!0},{provide:ue,useFactory:function Vo(){return(0,l.RDi)(document),document},deps:[]}]),xa=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function Sa(){return new l.qLn},deps:[]},{provide:lr,useClass:eo,multi:!0,deps:[ue,l.R0b,l.Lbi]},{provide:lr,useClass:Ql,multi:!0,deps:[ue]},{provide:vr,useClass:vr,deps:[Js,Xs,l.AFp]},{provide:l.FYo,useExisting:vr},{provide:lt,useExisting:Xs},{provide:Xs,useClass:Xs,deps:[ue]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b]},{provide:Js,useClass:Js,deps:[lr,l.R0b]},{provide:class bn{},useClass:hc,deps:[]}];let pc=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:l.AFp,useValue:t.appId},{provide:Dr,useExisting:l.AFp},Fn]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(n,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:xa,imports:[Oo,l.hGG]}),n})();"undefined"!=typeof window&&window;var mn=P(8996),Rs=P(7669);function Je(...n){const e=(0,Rs.yG)(n);return(0,mn.D)(n,e)}var ss=P(7579);class Xr extends ss.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var hr=P(8306);const{isArray:nf}=Array,{getPrototypeOf:Na,prototype:id,keys:ka}=Object;function eg(n){if(1===n.length){const e=n[0];if(nf(e))return{args:e,keys:null};if(function vc(n){return n&&"object"==typeof n&&Na(n)===id}(e)){const t=ka(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var jo=P(4671),It=P(4004);const{isArray:no}=Array;function Iu(n){return(0,It.U)(e=>function ro(n,e){return no(e)?n(...e):n(e)}(n,e))}function $o(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var er=P(5403),Zo=P(9672);function bc(n,e,t){n?(0,Zo.f)(t,n,e):e()}const Go=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var qo=P(8189);function Ps(...n){return function rf(){return(0,qo.J)(1)}()((0,mn.D)(n,(0,Rs.yG)(n)))}var os=P(8421);function zo(n){return new hr.y(e=>{(0,os.Xf)(n()).subscribe(e)})}var so=P(515),Ni=P(727),Nn=P(4482);function Ec(){return(0,Nn.e)((n,e)=>{let t=null;n._refCount++;const r=new er.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class as extends hr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Nn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ni.w0;const t=this.getSubject();e.add(this.source.subscribe(new er.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ni.w0.EMPTY)}return e}refCount(){return Ec()(this)}}function tr(n,e){return(0,Nn.e)((t,r)=>{let o=null,u=0,f=!1;const y=()=>f&&!o&&r.complete();t.subscribe(new er.Q(r,b=>{null==o||o.unsubscribe();let C=0;const M=u++;(0,os.Xf)(n(b,M)).subscribe(o=new er.Q(r,R=>r.next(e?e(b,R,M,C++):R),()=>{o=null,y()}))},()=>{f=!0,y()}))})}var Bt=P(5698);function ki(...n){const e=(0,Rs.yG)(n);return(0,Nn.e)((t,r)=>{(e?Ps(n,t,e):Ps(n,t)).subscribe(r)})}function us(n,e,t,r,o){return(u,f)=>{let y=t,b=e,C=0;u.subscribe(new er.Q(f,M=>{const R=C++;b=y?n(b,M,R):(y=!0,M),r&&f.next(b)},o&&(()=>{y&&f.next(b),f.complete()})))}}function cs(n,e){return(0,Nn.e)(us(n,e,arguments.length>=2,!0))}function Ar(n,e){return(0,Nn.e)((t,r)=>{let o=0;t.subscribe(new er.Q(r,u=>n.call(e,u,o++)&&r.next(u)))})}function Sr(n){return(0,Nn.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe(new er.Q(t,void 0,void 0,f=>{u=(0,os.Xf)(n(f,Sr(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var yn=P(5577),Fa=P(576);function cn(n,e){return(0,Fa.m)(e)?(0,yn.z)(n,e,1):(0,yn.z)(n,1)}function Wo(n){return n<=0?()=>so.E:(0,Nn.e)((e,t)=>{let r=[];e.subscribe(new er.Q(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function sd(n=Ic){return(0,Nn.e)((e,t)=>{let r=!1;e.subscribe(new er.Q(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Ic(){return new Go}function Cu(n){return(0,Nn.e)((e,t)=>{let r=!1;e.subscribe(new er.Q(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Fi(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ar((o,u)=>n(o,u,r)):jo.y,(0,Bt.q)(1),t?Cu(e):sd(()=>new Go))}var ei=P(8505);class oo{constructor(e,t){this.id=e,this.url=t}}class Cn extends oo{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ao extends oo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Yo extends oo{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Dy extends oo{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class sf extends oo{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qn extends oo{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Li extends oo{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class od extends oo{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Du extends oo{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ns{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Cc{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ad{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class of{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ng{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rg{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qo{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const dt="primary";class Dc{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ti(n){return new Dc(n)}const La="ngNavigationCancelingError";function Va(n){const e=Error("NavigationCancelingError: "+n);return e[La]=!0,e}function ud(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const f=r[u],y=n[u];if(f.startsWith(":"))o[f.substring(1)]=y;else if(f!==y.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function ni(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!cd(n[o],e[o]))return!1;return!0}function cd(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function ld(n){return Array.prototype.concat.apply([],n)}function Sc(n){return n.length>0?n[n.length-1]:null}function zn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Vn(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,mn.D)(Promise.resolve(n)):Je(n)}const Tu={exact:function ri(n,e,t){if(!O(n.segments,e.segments)||!Fs(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ri(n.children[r],e.children[r],t))return!1;return!0},subset:Ua},Au={exact:function Mc(n,e){return ni(n,e)},subset:function dd(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>cd(n[t],e[t]))},ignored:()=>!0};function ks(n,e,t){return Tu[t.paths](n.root,e.root,t.matrixParams)&&Au[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Ua(n,e,t){return Xo(n,e,e.segments,t)}function Xo(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!O(o,t)||e.hasChildren()||!Fs(o,t,r))}if(n.segments.length===t.length){if(!O(n.segments,t)||!Fs(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!Ua(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(O(n.segments,o)&&Fs(n.segments,o,r)&&n.children[dt])&&Xo(n.children[dt],e,u,r)}}function Fs(n,e,t){return e.every((r,o)=>Au[t](n[o].parameters,r.parameters))}class Yt{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ti(this.queryParams)),this._queryParamMap}toString(){return we.serialize(this)}}class Mt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,zn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ue(this)}}class I{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ti(this.parameters)),this._parameterMap}toString(){return ea(this)}}function O(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class W{}class oe{parse(e){const t=new Ay(e);return new Yt(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ot(e.root,!0)}`,r=function Ls(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Ct(t)}=${Ct(o)}`).join("&"):`${Ct(t)}=${Ct(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function at(n){return encodeURI(n)}(e.fragment)}`:""}`}}const we=new oe;function Ue(n){return n.segments.map(e=>ea(e)).join("/")}function ot(n,e){if(!n.hasChildren())return Ue(n);if(e){const t=n.children[dt]?ot(n.children[dt],!1):"",r=[];return zn(n.children,(o,u)=>{u!==dt&&r.push(`${u}:${ot(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function F(n,e){let t=[];return zn(n.children,(r,o)=>{o===dt&&(t=t.concat(e(r,o)))}),zn(n.children,(r,o)=>{o!==dt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===dt?[ot(n.children[dt],!1)]:[`${o}:${ot(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[dt]?`${Ue(n)}/${t[0]}`:`${Ue(n)}/(${t.join("//")})`}}function ht(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ct(n){return ht(n).replace(/%3B/gi,";")}function Dn(n){return ht(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Un(n){return decodeURIComponent(n)}function Vi(n){return Un(n.replace(/\+/g,"%20"))}function ea(n){return`${Dn(n.path)}${function ta(n){return Object.keys(n).map(e=>`;${Dn(e)}=${Dn(n[e])}`).join("")}(n.parameters)}`}const ls=/^[^\/()?;=#]+/;function Ui(n){const e=n.match(ls);return e?e[0]:""}const na=/^[^=?&#]+/,Oc=/^[^&#]+/;class Ay{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Mt([],{}):new Mt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[dt]=new Mt(e,t)),r}parseSegment(){const e=Ui(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new I(Un(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ui(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Ui(this.remaining);o&&(r=o,this.capture(r))}e[Un(t)]=Un(r)}parseQueryParam(e){const t=function ds(n){const e=n.match(na);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const f=function Ty(n){const e=n.match(Oc);return e?e[0]:""}(this.remaining);f&&(r=f,this.capture(r))}const o=Vi(t),u=Vi(r);if(e.hasOwnProperty(o)){let f=e[o];Array.isArray(f)||(f=[f],e[o]=f),f.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ui(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=dt);const f=this.parseChildren();t[u]=1===Object.keys(f).length?f[dt]:new Mt([],f),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class ig{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Rc(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Rc(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Su(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Su(e,this._root).map(t=>t.value)}}function Rc(n,e){if(n===e.value)return e;for(const t of e.children){const r=Rc(n,t);if(r)return r}return null}function Su(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Su(n,t);if(r.length)return r.unshift(e),r}return[]}class hs{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function gi(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class sg extends ig{constructor(e,t){super(e),this.snapshot=t,Mu(this,e)}toString(){return this.snapshot.toString()}}function og(n,e){const t=function ag(n,e){const f=new Ba([],{},{},"",{},dt,e,null,n.root,-1,{});return new hd("",new hs(f,[]))}(n,e),r=new Xr([new I("",{})]),o=new Xr({}),u=new Xr({}),f=new Xr({}),y=new Xr(""),b=new uo(r,o,f,y,u,dt,e,t.root);return b.snapshot=t.root,new sg(new hs(b,[]),t)}class uo{constructor(e,t,r,o,u,f,y,b){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=f,this.component=y,this._futureSnapshot=b}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,It.U)(e=>ti(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,It.U)(e=>ti(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xu(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function Pc(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ba{constructor(e,t,r,o,u,f,y,b,C,M,R){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=f,this.component=y,this.routeConfig=b,this._urlSegment=C,this._lastPathIndex=M,this._resolve=R}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ti(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ti(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class hd extends ig{constructor(e,t){super(t),this.url=e,Mu(this,t)}toString(){return ug(this._root)}}function Mu(n,e){e.value._routerState=n,e.children.forEach(t=>Mu(n,t))}function ug(n){const e=n.children.length>0?` { ${n.children.map(ug).join(", ")} } `:"";return`${n.value}${e}`}function fd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ni(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ni(e.params,t.params)||n.params.next(t.params),function Ac(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ni(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ni(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function pd(n,e){const t=ni(n.params,e.params)&&function T(n,e){return O(n,e)&&n.every((t,r)=>ni(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||pd(n.parent,e.parent))}function Nc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function co(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Nc(n,r,o);return Nc(n,r)})}(n,e,t);return new hs(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const f=u.route;return f.value._futureSnapshot=e.value,f.children=e.children.map(y=>Nc(n,y)),f}}const r=function ja(n){return new uo(new Xr(n.url),new Xr(n.params),new Xr(n.queryParams),new Xr(n.fragment),new Xr(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Nc(n,u));return new hs(r,o)}}function af(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function gd(n){return"object"==typeof n&&null!=n&&n.outlets}function md(n,e,t,r,o){let u={};return r&&zn(r,(f,y)=>{u[y]=Array.isArray(f)?f.map(b=>`${b}`):`${f}`}),new Yt(t.root===n?e:xy(t.root,n,e),u,o)}function xy(n,e,t){const r={};return zn(n.children,(o,u)=>{r[u]=o===e?t:xy(o,e,t)}),new Mt(n.segments,r)}class My{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&af(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(gd);if(o&&o!==Sc(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class cf{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Py(n,e,t){if(n||(n=new Mt([],{})),0===n.segments.length&&n.hasChildren())return _d(n,e,t);const r=function vd(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const f=n.segments[o],y=t[r];if(gd(y))break;const b=`${y}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===b)break;if(b&&C&&"object"==typeof C&&void 0===C.outlets){if(!kc(b,C,f))return u;r+=2}else{if(!kc(b,{},f))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Mt(n.segments.slice(0,r.pathIndex),{});return u.children[dt]=new Mt(n.segments.slice(r.pathIndex),n.children),_d(u,0,o)}return r.match&&0===o.length?new Mt(n.segments,{}):r.match&&!n.hasChildren()?wd(n,e,t):r.match?_d(n,0,o):wd(n,e,t)}function _d(n,e,t){if(0===t.length)return new Mt(n.segments,{});{const r=function Ry(n){return gd(n[0])?n[0].outlets:{[dt]:n}}(t),o={};return zn(r,(u,f)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[f]=Py(n.children[f],e,u))}),zn(n.children,(u,f)=>{void 0===r[f]&&(o[f]=u)}),new Mt(n.segments,o)}}function wd(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(gd(u)){const b=Vs(u.outlets);return new Mt(r,b)}if(0===o&&af(t[0])){r.push(new I(n.segments[e].path,Ou(t[0]))),o++;continue}const f=gd(u)?u.outlets[dt]:`${u}`,y=o<t.length-1?t[o+1]:null;f&&y&&af(y)?(r.push(new I(f,Ou(y))),o+=2):(r.push(new I(f,{})),o++)}return new Mt(r,{})}function Vs(n){const e={};return zn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=wd(new Mt([],{}),0,t))}),e}function Ou(n){const e={};return zn(n,(t,r)=>e[r]=`${t}`),e}function kc(n,e,t){return n==t.path&&ni(e,t.parameters)}class dg{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),fd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=gi(t);e.children.forEach(u=>{const f=u.value.outlet;this.deactivateRoutes(u,o[f],r),delete o[f]}),zn(o,(u,f)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const f=r.getContext(o.outlet);f&&this.deactivateChildRoutes(e,t,f.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=gi(e);for(const f of Object.keys(u))this.deactivateRouteAndItsChildren(u[f],o);if(r&&r.outlet){const f=r.outlet.detach(),y=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:f,route:e,contexts:y})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=gi(e);for(const f of Object.keys(u))this.deactivateRouteAndItsChildren(u[f],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=gi(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new rg(u.value.snapshot))}),e.children.length&&this.forwardEvent(new of(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(fd(o),o===u)if(o.component){const f=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,f.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const f=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const y=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),f.children.onOutletReAttached(y.contexts),f.attachRef=y.componentRef,f.route=y.route.value,f.outlet&&f.outlet.attach(y.componentRef,y.route.value),fd(y.route.value),this.activateChildRoutes(e,null,f.children)}else{const y=function L0(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),b=y?y.module.componentFactoryResolver:null;f.attachRef=null,f.route=o,f.resolver=b,f.outlet&&f.outlet.activateWith(o,b),this.activateChildRoutes(e,null,f.children)}}else this.activateChildRoutes(e,null,r)}}class hg{constructor(e,t){this.routes=e,this.module=t}}function $a(n){return"function"==typeof n}function lo(n){return n instanceof Yt}const Fc=Symbol("INITIAL_VALUE");function Za(){return tr(n=>function wc(...n){const e=(0,Rs.yG)(n),t=(0,Rs.jO)(n),{args:r,keys:o}=eg(n);if(0===r.length)return(0,mn.D)([],e);const u=new hr.y(function Ho(n,e,t=jo.y){return r=>{bc(e,()=>{const{length:o}=n,u=new Array(o);let f=o,y=o;for(let b=0;b<o;b++)bc(e,()=>{const C=(0,mn.D)(n[b],e);let M=!1;C.subscribe(new er.Q(r,R=>{u[b]=R,M||(M=!0,y--),y||r.next(t(u.slice()))},()=>{--f||r.complete()}))},r)},r)}}(r,e,o?f=>$o(o,f):jo.y));return t?u.pipe(Iu(t)):u}(n.map(e=>e.pipe((0,Bt.q)(1),ki(Fc)))).pipe(cs((e,t)=>{let r=!1;return t.reduce((o,u,f)=>o!==Fc?o:(u===Fc&&(r=!0),r||!1!==u&&f!==t.length-1&&!lo(u)?o:u),e)},Fc),Ar(e=>e!==Fc),(0,It.U)(e=>lo(e)?e:!0===e),(0,Bt.q)(1)))}class Ny{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ru,this.attachRef=null}}class Ru{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Ny,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Id=(()=>{class n{constructor(t,r,o,u,f){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=f,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.name=u||dt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const f=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),y=this.parentContexts.getOrCreateContext(this.name).children,b=new Pu(t,y,this.location.injector);this.activated=this.location.createComponent(f,this.location.length,b),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ru),l.Y36(l.s_b),l.Y36(l._Vd),l.$8M("name"),l.Y36(l.sBO))},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Pu{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===uo?this.route:e===Ru?this.childContexts:this.parent.get(e,t)}}let fg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&l._UZ(0,"router-outlet")},directives:[Id],encapsulation:2}),n})();function Lc(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];pg(r,Wn(e,r))}}function pg(n,e){n.children&&Lc(n.children,e)}function Wn(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function df(n){const e=n.children&&n.children.map(df),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==dt&&(t.component=fg),t}function Bi(n){return n.outlet||dt}function hf(n,e){const t=n.filter(r=>Bi(r)===e);return t.push(...n.filter(r=>Bi(r)!==e)),t}const ho={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Cd(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},ho):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const u=(e.matcher||ud)(t,n,e);if(!u)return Object.assign({},ho);const f={};zn(u.posParams,(b,C)=>{f[C]=b.path});const y=u.consumed.length>0?Object.assign(Object.assign({},f),u.consumed[u.consumed.length-1].parameters):f;return{matched:!0,consumedSegments:u.consumed,lastChild:u.consumed.length,parameters:y,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Dd(n,e,t,r,o="corrected"){if(t.length>0&&function pf(n,e,t){return t.some(r=>gf(n,e,r)&&Bi(r)!==dt)}(n,t,r)){const f=new Mt(e,function ky(n,e,t,r){const o={};o[dt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Bi(u)!==dt){const f=new Mt([],{});f._sourceSegment=n,f._segmentIndexShift=e.length,o[Bi(u)]=f}return o}(n,e,r,new Mt(t,n.children)));return f._sourceSegment=n,f._segmentIndexShift=e.length,{segmentGroup:f,slicedSegments:[]}}if(0===t.length&&function B0(n,e,t){return t.some(r=>gf(n,e,r))}(n,t,r)){const f=new Mt(n.segments,function ff(n,e,t,r,o,u){const f={};for(const y of r)if(gf(n,t,y)&&!o[Bi(y)]){const b=new Mt([],{});b._sourceSegment=n,b._segmentIndexShift="legacy"===u?n.segments.length:e.length,f[Bi(y)]=b}return Object.assign(Object.assign({},o),f)}(n,e,t,r,n.children,o));return f._sourceSegment=n,f._segmentIndexShift=e.length,{segmentGroup:f,slicedSegments:t}}const u=new Mt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function gf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function ra(n,e,t,r){return!!(Bi(n)===r||r!==dt&&gf(e,t,n))&&("**"===n.path||Cd(e,n,t).matched)}function xr(n,e,t){return 0===e.length&&!n.children[t]}class Ha{constructor(e){this.segmentGroup=e||null}}class Vc{constructor(e){this.urlTree=e}}function Uc(n){return new hr.y(e=>e.error(new Ha(n)))}function wr(n){return new hr.y(e=>e.error(new Vc(n)))}function Bc(n){return new hr.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class gg{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(l.h0i)}apply(){const e=Dd(this.urlTree.root,[],[],this.config).segmentGroup,t=new Mt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,dt).pipe((0,It.U)(u=>this.createUrlTree(yf(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Sr(u=>{if(u instanceof Vc)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Ha?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,dt).pipe((0,It.U)(o=>this.createUrlTree(yf(o),e.queryParams,e.fragment))).pipe(Sr(o=>{throw o instanceof Ha?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Mt([],{[dt]:e}):e;return new Yt(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,It.U)(u=>new Mt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,mn.D)(o).pipe(cn(u=>{const f=r.children[u],y=hf(t,u);return this.expandSegmentGroup(e,y,f,u).pipe((0,It.U)(b=>({segment:b,outlet:u})))}),cs((u,f)=>(u[f.outlet]=f.segment,u),{}),function tg(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ar((o,u)=>n(o,u,r)):jo.y,Wo(1),t?Cu(e):sd(()=>new Go))}())}expandSegment(e,t,r,o,u,f){return(0,mn.D)(r).pipe(cn(y=>this.expandSegmentAgainstRoute(e,t,r,y,o,u,f).pipe(Sr(C=>{if(C instanceof Ha)return Je(null);throw C}))),Fi(y=>!!y),Sr((y,b)=>{if(y instanceof Go||"EmptyError"===y.name){if(xr(t,o,u))return Je(new Mt([],{}));throw new Ha(t)}throw y}))}expandSegmentAgainstRoute(e,t,r,o,u,f,y){return ra(o,t,u,f)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,f):y&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,f):Uc(t):Uc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,f){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,f):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,f)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?wr(u):this.lineralizeSegments(r,u).pipe((0,yn.z)(f=>{const y=new Mt(f,{});return this.expandSegment(e,y,t,f,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,f){const{matched:y,consumedSegments:b,lastChild:C,positionalParamSegments:M}=Cd(t,o,u);if(!y)return Uc(t);const R=this.applyRedirectCommands(b,o.redirectTo,M);return o.redirectTo.startsWith("/")?wr(R):this.lineralizeSegments(o,R).pipe((0,yn.z)(z=>this.expandSegment(e,t,r,z.concat(u.slice(C)),f,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Je(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,It.U)(z=>(r._loadedConfig=z,new Mt(o,{})))):Je(new Mt(o,{}));const{matched:f,consumedSegments:y,lastChild:b}=Cd(t,r,o);if(!f)return Uc(t);const C=o.slice(b);return this.getChildConfig(e,r,o).pipe((0,yn.z)(R=>{const z=R.module,K=R.routes,{segmentGroup:he,slicedSegments:Fe}=Dd(t,y,C,K),je=new Mt(he.segments,he.children);if(0===Fe.length&&je.hasChildren())return this.expandChildren(z,K,je).pipe((0,It.U)(bt=>new Mt(y,bt)));if(0===K.length&&0===Fe.length)return Je(new Mt(y,{}));const wt=Bi(r)===u;return this.expandSegment(z,je,K,Fe,wt?dt:u,!0).pipe((0,It.U)(St=>new Mt(y.concat(St.segments),St.children)))}))}getChildConfig(e,t,r){return t.children?Je(new hg(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Je(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,yn.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,It.U)(u=>(t._loadedConfig=u,u))):function mf(n){return new hr.y(e=>e.error(Va(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):Je(new hg([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?Je(o.map(f=>{const y=e.get(f);let b;if(function lf(n){return n&&$a(n.canLoad)}(y))b=y.canLoad(t,r);else{if(!$a(y))throw new Error("Invalid CanLoad guard");b=y(t,r)}return Vn(b)})).pipe(Za(),(0,ei.b)(f=>{if(!lo(f))return;const y=Va(`Redirecting to "${this.urlSerializer.serialize(f)}"`);throw y.url=f,y}),(0,It.U)(f=>!0===f)):Je(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return Je(r);if(o.numberOfChildren>1||!o.children[dt])return Bc(e.redirectTo);o=o.children[dt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Yt(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return zn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const y=o.substring(1);r[u]=t[y]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let f={};return zn(t.children,(y,b)=>{f[b]=this.createSegmentGroup(e,y,r,o)}),new Mt(u,f)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function yf(n){const e={};for(const r of Object.keys(n.children)){const u=yf(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Td(n){if(1===n.numberOfChildren&&n.children[dt]){const e=n.children[dt];return new Mt(n.segments.concat(e.segments),e.children)}return n}(new Mt(n.segments,e))}class Ad{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ga{constructor(e,t){this.component=e,this.route=t}}function Ly(n,e,t){const r=n._root;return jc(r,e?e._root:null,t,[r.value])}function fo(n,e,t){const r=function Uy(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function jc(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=gi(e);return n.children.forEach(f=>{(function _f(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,f=e?e.value:null,y=t?t.getContext(n.value.outlet):null;if(f&&u.routeConfig===f.routeConfig){const b=function yg(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!O(n.url,e.url);case"pathParamsOrQueryParamsChange":return!O(n.url,e.url)||!ni(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!pd(n,e)||!ni(n.queryParams,e.queryParams);default:return!pd(n,e)}}(f,u,u.routeConfig.runGuardsAndResolvers);b?o.canActivateChecks.push(new Ad(r)):(u.data=f.data,u._resolvedData=f._resolvedData),jc(n,e,u.component?y?y.children:null:t,r,o),b&&y&&y.outlet&&y.outlet.isActivated&&o.canDeactivateChecks.push(new Ga(y.outlet.component,f))}else f&&$c(e,y,o),o.canActivateChecks.push(new Ad(r)),jc(n,null,u.component?y?y.children:null:t,r,o)})(f,u[f.value.outlet],t,r.concat([f.value]),o),delete u[f.value.outlet]}),zn(u,(f,y)=>$c(f,t.getContext(y),o)),o}function $c(n,e,t){const r=gi(n),o=n.value;zn(r,(u,f)=>{$c(u,o.component?e?e.children.getContext(f):null:e,t)}),t.canDeactivateChecks.push(new Ga(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class Hy{}function wg(n){return new hr.y(e=>e.error(n))}class Sd{constructor(e,t,r,o,u,f){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=f}recognize(){const e=Dd(this.urlTree.root,[],[],this.config.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,dt);if(null===t)return null;const r=new Ba([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},dt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new hs(r,t),u=new hd(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=xu(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const f=t.children[u],y=hf(e,u),b=this.processSegmentGroup(y,f,u);if(null===b)return null;r.push(...b)}const o=po(r);return function vf(n){n.sort((e,t)=>e.value.outlet===dt?-1:t.value.outlet===dt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const f=this.processSegmentAgainstRoute(u,t,r,o);if(null!==f)return f}return xr(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!ra(e,t,r,o))return null;let u,f=[],y=[];if("**"===e.path){const K=r.length>0?Sc(r).parameters:{};u=new Ba(r,K,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,xd(e),Bi(e),e.component,e,mi(t),Gc(t)+r.length,qy(e))}else{const K=Cd(t,e,r);if(!K.matched)return null;f=K.consumedSegments,y=r.slice(K.lastChild),u=new Ba(f,K.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,xd(e),Bi(e),e.component,e,mi(t),Gc(t)+f.length,qy(e))}const b=function Eg(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:M}=Dd(t,f,y,b.filter(K=>void 0===K.redirectTo),this.relativeLinkResolution);if(0===M.length&&C.hasChildren()){const K=this.processChildren(b,C);return null===K?null:[new hs(u,K)]}if(0===b.length&&0===M.length)return[new hs(u,[])];const R=Bi(e)===o,z=this.processSegment(b,C,M,R?dt:o);return null===z?null:[new hs(u,z)]}}function Gy(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function po(n){const e=[],t=new Set;for(const r of n){if(!Gy(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=po(r.children);e.push(new hs(r.value,o))}return e.filter(r=>!t.has(r))}function mi(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Gc(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function xd(n){return n.data||{}}function qy(n){return n.resolve||{}}function ii(n){return tr(e=>{const t=n(e);return t?(0,mn.D)(t).pipe((0,It.U)(()=>e)):Je(e)})}class Ef extends class Dg{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const zc=new l.OlP("ROUTES");class Md{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,It.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const f=u.create(e);return new hg(ld(f.injector.get(zc,void 0,l.XFs.Self|l.XFs.Optional)).map(df),f)}),Sr(u=>{throw t._loader$=void 0,u}));return t._loader$=new as(o,()=>new ss.x).pipe(Ec()),t._loader$}loadModuleFactory(e){return Vn(e()).pipe((0,yn.z)(t=>t instanceof l.YKP?Je(t):(0,mn.D)(this.compiler.compileModuleAsync(t))))}}class ia{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Wc(n){throw n}function Tg(n,e,t){return e.parse("/")}function Us(n,e){return Je(null)}const qa={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ag={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let si=(()=>{class n{constructor(t,r,o,u,f,y,b){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=b,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ss.x,this.errorHandler=Wc,this.malformedUriErrorHandler=Tg,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Us,afterPreactivation:Us},this.urlHandlingStrategy=new ia,this.routeReuseStrategy=new Ef,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=f.get(l.h0i),this.console=f.get(l.c2e);const R=f.get(l.R0b);this.isNgZoneEnabled=R instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(b),this.currentUrlTree=function Jo(){return new Yt(new Mt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Md(f,y,z=>this.triggerEvent(new Ns(z)),z=>this.triggerEvent(new Cc(z))),this.routerState=og(this.currentUrlTree,this.rootComponentType),this.transitions=new Xr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ar(o=>0!==o.id),(0,It.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),tr(o=>{let u=!1,f=!1;return Je(o).pipe((0,ei.b)(y=>{this.currentNavigation={id:y.id,initialUrl:y.currentRawUrl,extractedUrl:y.extractedUrl,trigger:y.source,extras:y.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),tr(y=>{const b=this.browserUrlTree.toString(),C=!this.navigated||y.extractedUrl.toString()!==b||b!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(y.rawUrl))return Nu(y.source)&&(this.browserUrlTree=y.extractedUrl),Je(y).pipe(tr(R=>{const z=this.transitions.getValue();return r.next(new Cn(R.id,this.serializeUrl(R.extractedUrl),R.source,R.restoredState)),z!==this.transitions.getValue()?so.E:Promise.resolve(R)}),function mg(n,e,t,r){return tr(o=>function Fy(n,e,t,r,o){return new gg(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,It.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ei.b)(R=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:R.urlAfterRedirects})}),function ji(n,e,t,r,o){return(0,yn.z)(u=>function bg(n,e,t,r,o="emptyOnly",u="legacy"){try{const f=new Sd(n,e,t,r,o,u).recognize();return null===f?wg(new Hy):Je(f)}catch(f){return wg(f)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,It.U)(f=>Object.assign(Object.assign({},u),{targetSnapshot:f}))))}(this.rootComponentType,this.config,R=>this.serializeUrl(R),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ei.b)(R=>{if("eager"===this.urlUpdateStrategy){if(!R.extras.skipLocationChange){const K=this.urlHandlingStrategy.merge(R.urlAfterRedirects,R.rawUrl);this.setBrowserUrl(K,R)}this.browserUrlTree=R.urlAfterRedirects}const z=new sf(R.id,this.serializeUrl(R.extractedUrl),this.serializeUrl(R.urlAfterRedirects),R.targetSnapshot);r.next(z)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:z,extractedUrl:K,source:he,restoredState:Fe,extras:je}=y,wt=new Cn(z,this.serializeUrl(K),he,Fe);r.next(wt);const Ut=og(K,this.rootComponentType).snapshot;return Je(Object.assign(Object.assign({},y),{targetSnapshot:Ut,urlAfterRedirects:K,extras:Object.assign(Object.assign({},je),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=y.rawUrl,y.resolve(null),so.E}),ii(y=>{const{targetSnapshot:b,id:C,extractedUrl:M,rawUrl:R,extras:{skipLocationChange:z,replaceUrl:K}}=y;return this.hooks.beforePreactivation(b,{navigationId:C,appliedUrlTree:M,rawUrlTree:R,skipLocationChange:!!z,replaceUrl:!!K})}),(0,ei.b)(y=>{const b=new qn(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}),(0,It.U)(y=>Object.assign(Object.assign({},y),{guards:Ly(y.targetSnapshot,y.currentSnapshot,this.rootContexts)})),function Zc(n,e){return(0,yn.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:f}}=t;return 0===f.length&&0===u.length?Je(Object.assign(Object.assign({},t),{guardsResult:!0})):function By(n,e,t,r){return(0,mn.D)(n).pipe((0,yn.z)(o=>function Zy(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Je(u.map(y=>{const b=fo(y,e,o);let C;if(function Ed(n){return n&&$a(n.canDeactivate)}(b))C=Vn(b.canDeactivate(n,e,t,r));else{if(!$a(b))throw new Error("Invalid CanDeactivate guard");C=Vn(b(n,e,t,r))}return C.pipe(Fi())})).pipe(Za()):Je(!0)}(o.component,o.route,t,e,r)),Fi(o=>!0!==o,!0))}(f,r,o,n).pipe((0,yn.z)(y=>y&&function bd(n){return"boolean"==typeof n}(y)?function jy(n,e,t,r){return(0,mn.D)(e).pipe(cn(o=>Ps(function $y(n,e){return null!==n&&e&&e(new ad(n)),Je(!0)}(o.route.parent,r),function Hc(n,e){return null!==n&&e&&e(new ng(n)),Je(!0)}(o.route,r),function vg(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(f=>function Vy(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(f)).filter(f=>null!==f).map(f=>zo(()=>Je(f.guards.map(b=>{const C=fo(b,f.node,t);let M;if(function U0(n){return n&&$a(n.canActivateChild)}(C))M=Vn(C.canActivateChild(r,n));else{if(!$a(C))throw new Error("Invalid CanActivateChild guard");M=Vn(C(r,n))}return M.pipe(Fi())})).pipe(Za())));return Je(u).pipe(Za())}(n,o.path,t),function _g(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Je(!0);const o=r.map(u=>zo(()=>{const f=fo(u,e,t);let y;if(function V0(n){return n&&$a(n.canActivate)}(f))y=Vn(f.canActivate(e,n));else{if(!$a(f))throw new Error("Invalid CanActivate guard");y=Vn(f(e,n))}return y.pipe(Fi())}));return Je(o).pipe(Za())}(n,o.route,t))),Fi(o=>!0!==o,!0))}(r,u,n,e):Je(y)),(0,It.U)(y=>Object.assign(Object.assign({},t),{guardsResult:y})))})}(this.ngModule.injector,y=>this.triggerEvent(y)),(0,ei.b)(y=>{if(lo(y.guardsResult)){const C=Va(`Redirecting to "${this.serializeUrl(y.guardsResult)}"`);throw C.url=y.guardsResult,C}const b=new Li(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot,!!y.guardsResult);this.triggerEvent(b)}),Ar(y=>!!y.guardsResult||(this.restoreHistory(y),this.cancelNavigationTransition(y,""),!1)),ii(y=>{if(y.guards.canActivateChecks.length)return Je(y).pipe((0,ei.b)(b=>{const C=new od(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(C)}),tr(b=>{let C=!1;return Je(b).pipe(function qc(n,e){return(0,yn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return Je(t);let u=0;return(0,mn.D)(o).pipe(cn(f=>function wf(n,e,t,r){return function Ig(n,e,t,r){const o=Object.keys(n);if(0===o.length)return Je({});const u={};return(0,mn.D)(o).pipe((0,yn.z)(f=>function Cg(n,e,t,r){const o=fo(n,e,r);return Vn(o.resolve?o.resolve(e,t):o(e,t))}(n[f],e,t,r).pipe((0,ei.b)(y=>{u[f]=y}))),Wo(1),(0,yn.z)(()=>Object.keys(u).length===o.length?Je(u):so.E))}(n._resolve,n,e,r).pipe((0,It.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),xu(n,t).resolve),null)))}(f.route,r,n,e)),(0,ei.b)(()=>u++),Wo(1),(0,yn.z)(f=>u===o.length?Je(t):so.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ei.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(b),this.cancelNavigationTransition(b,"At least one route resolver didn't emit any value."))}}))}),(0,ei.b)(b=>{const C=new Du(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(C)}))}),ii(y=>{const{targetSnapshot:b,id:C,extractedUrl:M,rawUrl:R,extras:{skipLocationChange:z,replaceUrl:K}}=y;return this.hooks.afterPreactivation(b,{navigationId:C,appliedUrlTree:M,rawUrlTree:R,skipLocationChange:!!z,replaceUrl:!!K})}),(0,It.U)(y=>{const b=function cg(n,e,t){const r=Nc(n,e._root,t?t._root:void 0);return new sg(r,e)}(this.routeReuseStrategy,y.targetSnapshot,y.currentRouterState);return Object.assign(Object.assign({},y),{targetRouterState:b})}),(0,ei.b)(y=>{this.currentUrlTree=y.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(y.urlAfterRedirects,y.rawUrl),this.routerState=y.targetRouterState,"deferred"===this.urlUpdateStrategy&&(y.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,y),this.browserUrlTree=y.urlAfterRedirects)}),((n,e,t)=>(0,It.U)(r=>(new dg(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,y=>this.triggerEvent(y)),(0,ei.b)({next(){u=!0},complete(){u=!0}}),function Ko(n){return(0,Nn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var y;u||f||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(y=this.currentNavigation)||void 0===y?void 0:y.id)===o.id&&(this.currentNavigation=null)}),Sr(y=>{if(f=!0,function Tc(n){return n&&n[La]}(y)){const b=lo(y.url);b||(this.navigated=!0,this.restoreHistory(o,!0));const C=new Yo(o.id,this.serializeUrl(o.extractedUrl),y.message);r.next(C),b?setTimeout(()=>{const M=this.urlHandlingStrategy.merge(y.url,this.rawUrlTree),R={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Nu(o.source)};this.scheduleNavigation(M,"imperative",null,R,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const b=new Dy(o.id,this.serializeUrl(o.extractedUrl),y);r.next(b);try{o.resolve(this.errorHandler(y))}catch(C){o.reject(C)}}return so.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},f=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(f){const b=Object.assign({},f);delete b.navigationId,delete b.\u0275routerPageId,0!==Object.keys(b).length&&(u.state=b)}const y=this.parseUrl(t.url);this.scheduleNavigation(y,r,f,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Lc(t),this.config=t.map(df),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:f,queryParamsHandling:y,preserveFragment:b}=r,C=o||this.routerState.root,M=b?this.currentUrlTree.fragment:f;let R=null;switch(y){case"merge":R=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":R=this.currentUrlTree.queryParams;break;default:R=u||null}return null!==R&&(R=this.removeEmptyProps(R)),function Sy(n,e,t,r,o){if(0===t.length)return md(e.root,e.root,e,r,o);const u=function uf(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new My(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,f)=>{if("object"==typeof u&&null!=u){if(u.outlets){const y={};return zn(u.outlets,(b,C)=>{y[C]="string"==typeof b?b.split("/"):b}),[...o,{outlets:y}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===f?(u.split("/").forEach((y,b)=>{0==b&&"."===y||(0==b&&""===y?t=!0:".."===y?e++:""!=y&&o.push(y))}),o):[...o,u]},[]);return new My(t,e,r)}(t);if(u.toRoot())return md(e.root,new Mt([],{}),e,r,o);const f=function yd(n,e,t){if(n.isAbsolute)return new cf(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new cf(u,u===e.root,0)}const r=af(n.commands[0])?0:1;return function Oy(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new cf(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),y=f.processChildren?_d(f.segmentGroup,f.index,u.commands):Py(f.segmentGroup,f.index,u.commands);return md(f.segmentGroup,y,e,r,o)}(C,this.currentUrlTree,t,R,null!=M?M:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=lo(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function zy(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},qa):!1===r?Object.assign({},Ag):r,lo(t))return ks(this.currentUrlTree,t,o);const u=this.parseUrl(t);return ks(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ao(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,f){var y,b,C;if(this.disposed)return Promise.resolve(!1);const M=this.transitions.value,R=Nu(r)&&M&&!Nu(M.source),z=M.rawUrl.toString()===t.toString(),K=M.id===(null===(y=this.currentNavigation)||void 0===y?void 0:y.id);if(R&&z&&K)return Promise.resolve(!0);let Fe,je,wt;f?(Fe=f.resolve,je=f.reject,wt=f.promise):wt=new Promise((bt,jt)=>{Fe=bt,je=jt});const Ut=++this.navigationId;let St;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),St=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(b=this.browserPageId)&&void 0!==b?b:0:(null!==(C=this.browserPageId)&&void 0!==C?C:0)+1):St=0,this.setTransition({id:Ut,targetPageId:St,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:Fe,reject:je,promise:wt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),wt.catch(bt=>Promise.reject(bt))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const f=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===f?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===f&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(f)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new Yo(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Nu(n){return"imperative"!==n}let Kc=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new ss.x,this.subscription=t.events.subscribe(u=>{u instanceof ao&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,f){if(0!==t||r||o||u||f||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const y={skipLocationChange:za(this.skipLocationChange),replaceUrl:za(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,y),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:za(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(si),l.Y36(uo),l.Y36(de))},n.\u0275dir=l.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&l.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&l.uIk("target",r.target)("href",r.href,l.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[l.TTD]}),n})();function za(n){return""===n||!!n}class h{}class v{preload(e,t){return Je(null)}}let D=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new Md(o,r,b=>t.triggerEvent(new Ns(b)),b=>t.triggerEvent(new Cc(b)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ar(t=>t instanceof ao),cn(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(l.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const f=u._loadedConfig;o.push(this.processRoutes(f.module,f.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,mn.D)(o).pipe((0,qo.J)(),(0,It.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Je(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,yn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(si),l.LFG(l.Sil),l.LFG(l.zs3),l.LFG(h))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),S=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Cn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ao&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Qo&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Qo(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Q=new l.OlP("ROUTER_CONFIGURATION"),xe=new l.OlP("ROUTER_FORROOT_GUARD"),De=[Ke,{provide:W,useClass:oe},{provide:si,useFactory:function Od(n,e,t,r,o,u,f={},y,b){const C=new si(null,n,e,t,r,o,ld(u));return y&&(C.urlHandlingStrategy=y),b&&(C.routeReuseStrategy=b),function Yc(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(f,C),f.enableTracing&&C.events.subscribe(M=>{var R,z;null===(R=console.group)||void 0===R||R.call(console,`Router Event: ${M.constructor.name}`),console.log(M.toString()),console.log(M),null===(z=console.groupEnd)||void 0===z||z.call(console)}),C},deps:[W,Ru,Ke,l.zs3,l.Sil,zc,Q,[class yi{},new l.FiY],[class bf{},new l.FiY]]},Ru,{provide:uo,useFactory:function Qc(n){return n.routerState.root},deps:[si]},D,v,class p{preload(e,t){return t().pipe(Sr(()=>Je(null)))}},{provide:Q,useValue:{enableTracing:!1}}];function Ye(){return new l.PXZ("Router",si)}let tt=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[De,Wa(t),{provide:xe,useFactory:mo,deps:[[si,new l.FiY,new l.tp0]]},{provide:Q,useValue:r||{}},{provide:de,useFactory:nr,deps:[se,[new l.tBr(Me),new l.FiY],Q]},{provide:S,useFactory:Lt,deps:[si,Ta,Q]},{provide:h,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:v},{provide:l.PXZ,multi:!0,useFactory:Ye},[ku,{provide:l.ip1,multi:!0,useFactory:Rd,deps:[ku]},{provide:Fu,useFactory:Df,deps:[ku]},{provide:l.tb,multi:!0,useExisting:Fu}]]}}static forChild(t){return{ngModule:n,providers:[Wa(t)]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(xe,8),l.LFG(si,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function Lt(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new S(n,e,t)}function nr(n,e,t={}){return t.useHash?new Ne(n,e):new Ve(n,e)}function mo(n){return"guarded"}function Wa(n){return[{provide:l.deG,multi:!0,useValue:n},{provide:zc,multi:!0,useValue:n}]}let ku=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ss.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(y=>r=y),u=this.injector.get(si),f=this.injector.get(Q);return"disabled"===f.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===f.initialNavigation||"enabledBlocking"===f.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?Je(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Q),o=this.injector.get(D),u=this.injector.get(S),f=this.injector.get(si),y=this.injector.get(l.z2F);t===y.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&f.initialNavigation(),o.setUpPreloading(),u.init(),f.resetRootComponentType(y.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.zs3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Rd(n){return n.appInitializer.bind(n)}function Df(n){return n.bootstrapListener.bind(n)}const Fu=new l.OlP("Router Initializer");let Sg=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n}),n})(),Jc=(()=>{class n extends Sg{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();const yo=new l.OlP("NgValueAccessor"),zT={provide:yo,useExisting:(0,l.Gpc)(()=>Tf),multi:!0},fI=new l.OlP("CompositionEventMode");let Tf=(()=>{class n extends Sg{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function $0(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(fI,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&l.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[l._Bn([zT]),l.qOj]}),n})();function Vu(n){return null==n||0===n.length}function Z0(n){return null!=n&&"number"==typeof n.length}const Tn=new l.OlP("NgValidators"),Uu=new l.OlP("NgAsyncValidators"),H0=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Af{static min(e){return function G0(n){return e=>{if(Vu(e.value)||Vu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function q0(n){return e=>{if(Vu(e.value)||Vu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function z0(n){return Vu(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function Yy(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function W0(n){return Vu(n.value)||H0.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function K0(n){return e=>Vu(e.value)||!Z0(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Y0(n){return e=>Z0(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function At(n){if(!n)return Nd;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Vu(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return xg(e)}static composeAsync(e){return Mg(e)}}function Nd(n){return null}function Qy(n){return null!=n}function Jy(n){const e=(0,l.QGY)(n)?(0,mn.D)(n):n;return(0,l.CqO)(e),e}function Sf(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Bs(n,e){return e.map(t=>t(n))}function J0(n){return n.map(e=>function Q0(n){return!n.validate}(e)?e:t=>e.validate(t))}function xg(n){if(!n)return null;const e=n.filter(Qy);return 0==e.length?null:function(t){return Sf(Bs(t,e))}}function _o(n){return null!=n?xg(J0(n)):null}function Mg(n){if(!n)return null;const e=n.filter(Qy);return 0==e.length?null:function(t){return function Pd(...n){const e=(0,Rs.jO)(n),{args:t,keys:r}=eg(n),o=new hr.y(u=>{const{length:f}=t;if(!f)return void u.complete();const y=new Array(f);let b=f,C=f;for(let M=0;M<f;M++){let R=!1;(0,os.Xf)(t[M]).subscribe(new er.Q(u,z=>{R||(R=!0,C--),y[M]=z},()=>b--,void 0,()=>{(!b||!R)&&(C||u.next(r?$o(r,y):y),u.complete())}))}});return e?o.pipe(Iu(e)):o}(Bs(t,e).map(Jy)).pipe((0,It.U)(Sf))}}function Og(n){return null!=n?Mg(J0(n)):null}function Rg(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function pI(n){return n._rawValidators}function Xy(n){return n._rawAsyncValidators}function X0(n){return n?Array.isArray(n)?n:[n]:[]}function Xc(n,e){return Array.isArray(n)?n.includes(e):n===e}function xf(n,e){const t=X0(e);return X0(n).forEach(o=>{Xc(t,o)||t.push(o)}),t}function Pg(n,e){return X0(e).filter(t=>!Xc(n,t))}class Ng{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=_o(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Og(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class sa extends Ng{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class $i extends Ng{get formDirective(){return null}get path(){return null}}class ew{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let tw=(()=>{class n extends ew{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(sa,2))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&l.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[l.qOj]}),n})(),Mf=(()=>{class n extends ew{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36($i,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&l.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[l.qOj]}),n})();function js(n,e){Of(n,e),e.valueAccessor.writeValue(n.value),function t_(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Ka(n,e)})}(n,e),function ow(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function mI(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Ka(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function sw(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function kd(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Rf(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Lg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Of(n,e){const t=pI(n);null!==e.validator?n.setValidators(Rg(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Xy(n);null!==e.asyncValidator?n.setAsyncValidators(Rg(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Lg(e._rawValidators,o),Lg(e._rawAsyncValidators,o)}function Rf(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=pI(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(f=>f!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=Xy(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(f=>f!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return Lg(e._rawValidators,r),Lg(e._rawAsyncValidators,r),t}function Ka(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function aw(n,e){Of(n,e)}function Fd(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Ld(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const oa="VALID",Vg="INVALID",tl="PENDING",Vd="DISABLED";function Nf(n){return(Ug(n)?n.validators:n)||null}function s_(n){return Array.isArray(n)?_o(n):n||null}function Ud(n,e){return(Ug(e)?e.asyncValidators:n)||null}function cw(n){return Array.isArray(n)?Og(n):n||null}function Ug(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const _I=n=>n instanceof Mr,Bg=n=>n instanceof jg;function dw(n){return _I(n)?n.value:n.getRawValue()}function o_(n,e){const t=Bg(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new l.vHH(1e3,"");if(!r[e])throw new l.vHH(1001,"")}function hw(n,e){Bg(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new l.vHH(1002,"")})}class a_{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=s_(this._rawValidators),this._composedAsyncValidatorFn=cw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===oa}get invalid(){return this.status===Vg}get pending(){return this.status==tl}get disabled(){return this.status===Vd}get enabled(){return this.status!==Vd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=s_(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=cw(e)}addValidators(e){this.setValidators(xf(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(xf(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Pg(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Pg(e,this._rawAsyncValidators))}hasValidator(e){return Xc(this._rawValidators,e)}hasAsyncValidator(e){return Xc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=tl,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Vd,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=oa,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===oa||this.status===tl)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vd:oa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=tl,this._hasOwnPendingAsyncValidator=!0;const t=Jy(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function i_(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=Bg(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof vI)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?Vd:this.errors?Vg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(tl)?tl:this._anyControlsHaveStatus(Vg)?Vg:oa}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ug(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Mr extends a_{constructor(e=null,t,r){super(Nf(t),Ud(r,t)),this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Ld(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Ld(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class jg extends a_{constructor(e,t,r){super(Nf(t),Ud(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){hw(this,e),Object.keys(e).forEach(r=>{o_(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=dw(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class vI extends a_{constructor(e,t,r){super(Nf(t),Ud(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){hw(this,e),e.forEach((r,o)=>{o_(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>dw(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const rA={provide:$i,useExisting:(0,l.Gpc)(()=>Bd)},$g=(()=>Promise.resolve(null))();let Bd=(()=>{class n extends $i{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new l.vpe,this.form=new jg({},_o(t),Og(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){$g.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),js(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){$g.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),Ld(this._directives,t)})}addFormGroup(t){$g.then(()=>{const r=this._findContainer(t.path),o=new jg({});aw(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){$g.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){$g.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Fd(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Tn,10),l.Y36(Uu,10))},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&l.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([rA]),l.qOj]}),n})(),Zg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),vo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const Hg=new l.OlP("NgModelWithFormControlWarning"),AI={provide:$i,useExisting:(0,l.Gpc)(()=>jd)};let jd=(()=>{class n extends $i{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new l.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Rf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return js(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){kd(t.control||null,t,!1),Ld(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,Fd(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(kd(r||null,t),_I(o)&&(js(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);aw(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function n_(n,e){return Rf(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Of(this.form,this),this._oldForm&&Rf(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Tn,10),l.Y36(Uu,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&l.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([AI]),l.qOj,l.TTD]}),n})();const h_={provide:sa,useExisting:(0,l.Gpc)(()=>Ff)};let Ff=(()=>{class n extends sa{constructor(t,r,o,u,f){super(),this._ngModelWarningConfig=f,this._added=!1,this.update=new l.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Bu(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Tf?t=u:function yI(n){return Object.getPrototypeOf(n.constructor)===Jc}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function r_(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function e_(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(l.Y36($i,13),l.Y36(Tn,10),l.Y36(Uu,10),l.Y36(yo,10),l.Y36(Hg,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[l._Bn([h_]),l.qOj,l.TTD]}),n})(),xw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[vo]]}),n})(),$d=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[xw]}),n})(),FI=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Hg,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[xw]}),n})();var $s=P(4986),br=P(5813);function Wg(){return(0,Nn.e)((n,e)=>{let t,r=!1;n.subscribe(new er.Q(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function Ow(n,e){return n===e}var nt,Zs=P(2011),LI=(P(1121),P(3942)),_e=P(5861),nl=P(9681),$f=P(4859),rl=P(1877),Vt=P(2090),VI="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ya={},Rw=Rw||{},Et=VI||self;function Kg(){}function Yg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Zd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var fs="closure_uid_"+(1e9*Math.random()>>>0),pA=0;function gA(n,e,t){return n.call.apply(n.bind,arguments)}function Pw(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Or(n,e,t){return(Or=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?gA:Pw).apply(null,arguments)}function Zf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function jr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var f=Array(arguments.length-2),y=2;y<arguments.length;y++)f[y-2]=arguments[y];return e.prototype[o].apply(r,f)}}function il(){this.s=this.s,this.o=this.o}var b_={};il.prototype.s=!1,il.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function fA(n){return Object.prototype.hasOwnProperty.call(n,fs)&&n[fs]||(n[fs]=++pA)}(this);delete b_[n]}},il.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const kw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Qg=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function Fw(n){return Array.prototype.concat.apply([],arguments)}function E_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Jg(n){return/^[\s\xa0]*$/.test(n)}var fr,Lw=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function _i(n,e){return-1!=n.indexOf(e)}function Hd(n,e){return n<e?-1:n>e?1:0}e:{var Vw=Et.navigator;if(Vw){var Gd=Vw.userAgent;if(Gd){fr=Gd;break e}}fr=""}function I_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Uw(n){const e={};for(const t in n)e[t]=n[t];return e}var Xg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wo(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<Xg.length;u++)t=Xg[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function sl(n){return sl[" "](n),n}sl[" "]=Kg;var Ja,n,ol=_i(fr,"Opera"),Qa=_i(fr,"Trident")||_i(fr,"MSIE"),ps=_i(fr,"Edge"),Hf=ps||Qa,al=_i(fr,"Gecko")&&!(_i(fr.toLowerCase(),"webkit")&&!_i(fr,"Edge"))&&!(_i(fr,"Trident")||_i(fr,"MSIE"))&&!_i(fr,"Edge"),qd=_i(fr.toLowerCase(),"webkit")&&!_i(fr,"Edge");function ul(){var n=Et.document;return n?n.documentMode:void 0}e:{var ju="",$u=(n=fr,al?/rv:([^\);]+)(\)|;)/.exec(n):ps?/Edge\/([\d\.]+)/.exec(n):Qa?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):qd?/WebKit\/(\S+)/.exec(n):ol?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if($u&&(ju=$u?$u[1]:""),Qa){var Zu=ul();if(null!=Zu&&Zu>parseFloat(ju)){Ja=String(Zu);break e}}Ja=ju}var zd={};var Bw=Et.document&&Qa&&(ul()||parseInt(Ja,10))||void 0,jw=function(){if(!Et.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Et.addEventListener("test",Kg,e),Et.removeEventListener("test",Kg,e)}catch(t){}return n}();function $r(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Kd(n,e){if($r.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(al){e:{try{sl(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:$w[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Kd.Z.h.call(this)}}$r.prototype.h=function(){this.defaultPrevented=!0},jr(Kd,$r);var $w={2:"touch",3:"pen",4:"mouse"};Kd.prototype.h=function(){Kd.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Yd="closure_listenable_"+(1e6*Math.random()|0),Zw=0;function BI(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++Zw,this.ca=this.fa=!1}function Gf(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function tm(n){this.src=n,this.g={},this.h=0}function D_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=kw(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Gf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function nm(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}tm.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var f=nm(n,e,r,o);return-1<f?(e=n[f],t||(e.fa=!1)):((e=new BI(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var T_="closure_lm_"+(1e6*Math.random()|0),A_={};function S_(n,e,t,r,o){if(r&&r.once)return qw(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)S_(n,e[u],t,r,o);return null}return t=Yw(t),n&&n[Yd]?n.N(e,t,Zd(r)?!!r.capture:!!r,o):Hw(n,e,t,!1,r,o)}function Hw(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var f=Zd(o)?!!o.capture:!!o,y=qf(n);if(y||(n[T_]=y=new tm(n)),(t=y.add(e,t,r,f,u)).proxy)return t;if(r=function Gw(){var e=x_;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)jw||(o=f),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Kw(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function qw(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)qw(n,e[u],t,r,o);return null}return t=Yw(t),n&&n[Yd]?n.O(e,t,Zd(r)?!!r.capture:!!r,o):Hw(n,e,t,!0,r,o)}function zw(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)zw(n,e[u],t,r,o);else r=Zd(r)?!!r.capture:!!r,t=Yw(t),n&&n[Yd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=nm(u=n.g[e],t,r,o))&&(Gf(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=qf(n))&&(e=n.g[e.toString()],n=-1,e&&(n=nm(e,t,r,o)),(t=-1<n?e[n]:null)&&Ww(t))}function Ww(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Yd])D_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Kw(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=qf(e))?(D_(t,n),0==t.h&&(t.src=null,e[T_]=null)):Gf(n)}}}function Kw(n){return n in A_?A_[n]:A_[n]="on"+n}function x_(n,e){if(n.ca)n=!0;else{e=new Kd(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Ww(n),n=t.call(r,e)}return n}function qf(n){return(n=n[T_])instanceof tm?n:null}var M_="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yw(n){return"function"==typeof n?n:(n[M_]||(n[M_]=function(e){return n.handleEvent(e)}),n[M_])}function Zr(){il.call(this),this.i=new tm(this),this.P=this,this.I=null}function ai(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new $r(e,n);else if(e instanceof $r)e.target=e.target||n;else{var o=e;wo(e=new $r(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var f=e.g=t[u];o=rm(f,r,!0,e)&&o}if(o=rm(f=e.g=n,r,!0,e)&&o,o=rm(f,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=rm(f=e.g=t[u],r,!1,e)&&o}function rm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var f=e[u];if(f&&!f.ca&&f.capture==t){var y=f.listener,b=f.ia||f.src;f.fa&&D_(n.i,f),o=!1!==y.call(b,r)&&o}}return o&&!r.defaultPrevented}jr(Zr,il),Zr.prototype[Yd]=!0,Zr.prototype.removeEventListener=function(n,e,t,r){zw(this,n,e,t,r)},Zr.prototype.M=function(){if(Zr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Gf(t[r]);delete n.g[e],n.h--}}this.I=null},Zr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Zr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var im=Et.JSON.stringify;function mA(){var n=P_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var sm,cl=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new $I,n=>n.reset());class $I{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Qw(n){Et.setTimeout(()=>{throw n},0)}function O_(n,e){sm||function om(){var n=Et.Promise.resolve(void 0);sm=function(){n.then(ZI)}}(),R_||(sm(),R_=!0),P_.add(n,e)}var R_=!1,P_=new class jI{constructor(){this.h=this.g=null}add(e,t){const r=cl.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function ZI(){for(var n;n=mA();){try{n.h.call(n.g)}catch(t){Qw(t)}var e=cl;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}R_=!1}function am(n,e){Zr.call(this),this.h=n||1,this.g=e||Et,this.j=Or(this.kb,this),this.l=Date.now()}function N_(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function k_(n,e,t){if("function"==typeof n)t&&(n=Or(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Or(n.handleEvent,n)}return 2147483647<Number(e)?-1:Et.setTimeout(n,e||0)}function Jw(n){n.g=k_(()=>{n.g=null,n.i&&(n.i=!1,Jw(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}jr(am,Zr),(nt=am.prototype).da=!1,nt.S=null,nt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ai(this,"tick"),this.da&&(N_(this),this.start()))}},nt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},nt.M=function(){am.Z.M.call(this),N_(this),delete this.g};class Xw extends il{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Jw(this)}M(){super.M(),this.g&&(Et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zf(n){il.call(this),this.h=n,this.g={}}jr(zf,il);var F_=[];function L_(n,e,t,r){Array.isArray(t)||(t&&(F_[0]=t.toString()),t=F_);for(var o=0;o<t.length;o++){var u=S_(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function um(n){I_(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ww(e)},n),n.g={}}function V_(){this.g=!0}function Wf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function eb(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var f=1;f<o.length;f++)o[f]=""}}}return im(t)}catch(y){return e}}(n,t)+(r?" "+r:"")})}zf.prototype.M=function(){zf.Z.M.call(this),um(this)},zf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},V_.prototype.Aa=function(){this.g=!1},V_.prototype.info=function(){};var Xa={},cm=null;function lm(){return cm=cm||new Zr}function dm(n){$r.call(this,Xa.Ma,n)}function ll(n){const e=lm();ai(e,new dm(e,n))}function B_(n,e){$r.call(this,Xa.STAT_EVENT,n),this.stat=e}function Zi(n){const e=lm();ai(e,new B_(e,n))}function tb(n,e){$r.call(this,Xa.Na,n),this.size=e}function Qd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Et.setTimeout(function(){n()},e)}Xa.Ma="serverreachability",jr(dm,$r),Xa.STAT_EVENT="statevent",jr(B_,$r),Xa.Na="timingevent",jr(tb,$r);var Yf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},nb={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function j_(){}function $_(){}j_.prototype.h=null;var Z_,Jd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Qf(){$r.call(this,"d")}function fm(){$r.call(this,"c")}function Jf(){}function Xd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new zf(this),this.P=rb,this.W=new am(n=Hf?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new pm}function pm(){this.i=null,this.g="",this.h=!1}jr(Qf,$r),jr(fm,$r),jr(Jf,j_),Jf.prototype.g=function(){return new XMLHttpRequest},Jf.prototype.i=function(){return{}},Z_=new Jf;var rb=45e3,H_={},gm={};function G_(n,e,t){n.K=1,n.v=wm(eu(e)),n.s=t,n.U=!0,q_(n,null)}function q_(n,e){n.F=Date.now(),eh(n),n.A=eu(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),ev(t.h,"t",r),n.C=0,t=n.l.H,n.h=new pm,n.g=Sm(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Xw(Or(n.Ia,n,n.g),n.O)),L_(n.V,n.g,"readystatechange",n.gb),e=n.H?Uw(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),ll(1),function U_(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var f="",y=u.split("&"),b=0;b<y.length;b++){var C=y[b].split("=");if(1<C.length){var M=C[0];C=C[1];var R=M.split("_");f=2<=R.length&&"type"==R[1]?f+(M+"=")+C+"&":f+(M+"=redacted&")}}else f=null;else f=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+f})}(n.j,n.u,n.A,n.m,n.X,n.s)}function mm(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function z_(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=ib(n,t),o==gm){4==e&&(n.o=4,Zi(14),r=!1),Wf(n.j,n.m,null,"[Incomplete Response]");break}if(o==H_){n.o=4,Zi(15),Wf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Wf(n.j,n.m,o,null),ym(n,o)}mm(n)&&o!=gm&&o!=H_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Zi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Am(e),e.L=!0,Zi(11))):(Wf(n.j,n.m,t,"[Invalid Chunked Response]"),Hu(n),th(n))}function ib(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?gm:(t=Number(e.substring(t,r)),isNaN(t)?H_:(r+=1)+t>e.length?gm:(e=e.substr(r,t),n.C=r+t,e))}function eh(n){n.Y=Date.now()+n.P,W_(n,n.P)}function W_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Qd(Or(n.eb,n),e)}function Xf(n){n.B&&(Et.clearTimeout(n.B),n.B=null)}function th(n){0==n.l.G||n.I||Gu(n.l,n)}function Hu(n){Xf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,N_(n.W),um(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function ym(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||bm(t.i,n)))if(t.I=n.N,!n.J&&bm(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Qd(Or(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;op(t),Cm(t)}Tm(t),Zi(18)}if(1>=ub(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else pl(t,11)}else if((n.J||t.g==n)&&op(t),!Jg(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const M=C[3];null!=M&&(t.ma=M,t.h.info("VER="+t.ma));const R=C[4];null!=R&&(t.za=R,t.h.info("SVER="+t.za));const z=C[5];null!=z&&"number"==typeof z&&0<z&&(t.K=r=1.5*z,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const K=n.g;if(K){const he=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(he){var u=r.i;!u.g&&(_i(he,"spdy")||_i(he,"quic")||_i(he,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(nv(u,u.h),u.h=null))}if(r.D){const Fe=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;Fe&&(r.sa=Fe,ln(r.F,r.D,Fe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var f=n;if((r=t).oa=nC(r,r.H?r.la:null,r.W),f.J){rv(r.i,f);var y=f,b=r.K;b&&y.setTimeout(b),y.B&&(Xf(y),eh(y)),r.g=f}else dv(r);0<t.l.length&&sp(t)}else"stop"!=C[0]&&"close"!=C[0]||pl(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?pl(t,7):uv(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}ll(4)}catch(C){}}function K_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Yg(n)||"string"==typeof n)Qg(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Yg(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function yA(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Yg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function nh(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof nh)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function _m(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];dl(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)dl(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function dl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(nt=Xd.prototype).setTimeout=function(n){this.P=n},nt.gb=function(n){n=n.target;const e=this.L;e&&3==tu(n)?e.l():this.Ia(n)},nt.Ia=function(n){try{if(n==this.g)e:{const M=tu(this.g);var e=this.g.Da();const R=this.g.ba();if(!(3>M)&&(3!=M||Hf||this.g&&(this.h.h||this.g.ga()||mb(this.g)))){this.I||4!=M||7==e||ll(8==e||0>=R?3:2),Xf(this);var t=this.g.ba();this.N=t;t:if(mm(this)){var r=mb(this.g);n="";var o=r.length,u=4==tu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Hu(this),th(this);var f="";break t}this.h.i=new Et.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,f=this.h.g}else f=this.g.ga();if(this.i=200==t,function HI(n,e,t,r,o,u,f){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+f})}(this.j,this.u,this.A,this.m,this.X,M,t),this.i){if(this.$&&!this.J){t:{if(this.g){var y,b=this.g;if((y=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jg(y)){var C=y;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,Zi(12),Hu(this),th(this);break e}Wf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ym(this,t)}this.U?(z_(this,M,f),Hf&&this.i&&3==M&&(L_(this.V,this.W,"tick",this.fb),this.W.start())):(Wf(this.j,this.m,f,null),ym(this,f)),4==M&&Hu(this),this.i&&!this.I&&(4==M?Gu(this.l,this):(this.i=!1,eh(this)))}else 400==t&&0<f.indexOf("Unknown SID")?(this.o=3,Zi(12)):(this.o=0,Zi(13)),Hu(this),th(this)}}}catch(M){}},nt.fb=function(){if(this.g){var n=tu(this.g),e=this.g.ga();this.C<e.length&&(Xf(this),z_(this,n,e),this.i&&4!=n&&eh(this))}},nt.cancel=function(){this.I=!0,Hu(this)},nt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Kf(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ll(3),Zi(17)),Hu(this),this.o=2,th(this)):W_(this,this.Y-n)},(nt=nh.prototype).R=function(){_m(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},nt.T=function(){return _m(this),this.g.concat()},nt.get=function(n,e){return dl(this.h,n)?this.h[n]:e},nt.set=function(n,e){dl(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},nt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var pr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function hl(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof hl){this.g=void 0!==e?e:n.g,ep(this,n.j),this.s=n.s,vm(this,n.i),tp(this,n.m),this.l=n.l,e=n.h;var t=new Hi;t.i=e.i,e.g&&(t.g=new nh(e.g),t.h=e.h),Y_(this,t),this.o=n.o}else n&&(t=String(n).match(pr))?(this.g=!!e,ep(this,t[1]||"",!0),this.s=np(t[2]||""),vm(this,t[3]||"",!0),tp(this,t[4]),this.l=np(t[5]||"",!0),Y_(this,t[6]||"",!0),this.o=np(t[7]||"")):(this.g=!!e,this.h=new Hi(null,this.g))}function eu(n){return new hl(n)}function ep(n,e,t){n.j=t?np(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function vm(n,e,t){n.i=t?np(e,!0):e}function tp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Y_(n,e,t){e instanceof Hi?(n.h=e,function WI(n,e){e&&!n.j&&(Rr(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Hs(this,r),ev(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=rh(e,qI)),n.h=new Hi(e,n.g))}function ln(n,e,t){n.h.set(e,t)}function wm(n){return ln(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function np(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function rh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,_A),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function _A(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}hl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(rh(e,Q_,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(rh(e,Q_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(rh(t,"/"==t.charAt(0)?ua:J_,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",rh(t,zI)),n.join("")};var Q_=/[#\/\?@]/g,J_=/[#\?:]/g,ua=/[#\?]/g,qI=/[#\?@]/g,zI=/#/g;function Hi(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Rr(n){n.g||(n.g=new nh,n.h=0,n.i&&function sb(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Hs(n,e){Rr(n),e=ih(n,e),dl(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,dl((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&_m(n)))}function X_(n,e){return Rr(n),e=ih(n,e),dl(n.g.h,e)}function ev(n,e,t){Hs(n,e),0<t.length&&(n.i=null,n.g.set(ih(n,e),E_(t)),n.h+=t.length)}function ih(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function ab(n){this.l=n||tv,n=Et.PerformanceNavigationTiming?0<(n=Et.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Et.g&&Et.g.Ea&&Et.g.Ea()&&Et.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(nt=Hi.prototype).add=function(n,e){Rr(this),this.i=null,n=ih(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},nt.forEach=function(n,e){Rr(this),this.g.forEach(function(t,r){Qg(t,function(o){n.call(e,o,r,this)},this)},this)},nt.T=function(){Rr(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},nt.R=function(n){Rr(this);var e=[];if("string"==typeof n)X_(this,n)&&(e=Fw(e,this.g.get(ih(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Fw(e,n[t])}return e},nt.set=function(n,e){return Rr(this),this.i=null,X_(this,n=ih(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},nt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},nt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var f=o;""!==r[u]&&(f+="="+encodeURIComponent(String(r[u]))),n.push(f)}}return this.i=n.join("&")};var tv=10;function sh(n){return!!n.h||!!n.g&&n.g.size>=n.j}function ub(n){return n.h?1:n.g?n.g.size:0}function bm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function nv(n,e){n.g?n.g.add(e):n.h=e}function rv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function iv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return E_(n.i)}function oh(){}function YI(){this.g=new oh}function cb(n,e,t){const r=t||"";try{K_(n,function(o,u){let f=o;Zd(o)&&(f=im(o)),e.push(r+u+"="+encodeURIComponent(f))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function ah(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function fl(n){this.l=n.$b||null,this.j=n.ib||!1}function rp(n,e){Zr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Em,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ab.prototype.cancel=function(){if(this.i=iv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},oh.prototype.stringify=function(n){return Et.JSON.stringify(n,void 0)},oh.prototype.parse=function(n){return Et.JSON.parse(n,void 0)},jr(fl,j_),fl.prototype.g=function(){return new rp(this.l,this.j)},fl.prototype.i=function(n){return function(){return n}}({}),jr(rp,Zr);var Em=0;function sv(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function uh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ch(n)}function ch(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(nt=rp.prototype).open=function(n,e){if(this.readyState!=Em)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ch(this)},nt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Et).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},nt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,uh(this)),this.readyState=Em},nt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ch(this)),this.g&&(this.readyState=3,ch(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Et.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;sv(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},nt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?uh(this):ch(this),3==this.readyState&&sv(this)}},nt.Ua=function(n){this.g&&(this.response=this.responseText=n,uh(this))},nt.Ta=function(n){this.g&&(this.response=n,uh(this))},nt.ha=function(){this.g&&uh(this)},nt.setRequestHeader=function(n,e){this.v.append(n,e)},nt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},nt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(rp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var db=Et.JSON.parse;function rr(n){Zr.call(this),this.headers=new nh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ov,this.K=this.L=!1}jr(rr,Zr);var ov="",QI=/^https?$/i,JI=["POST","PUT"];function eC(n){return"content-type"==n.toLowerCase()}function hb(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,fb(n),Im(n)}function fb(n){n.D||(n.D=!0,ai(n,"complete"),ai(n,"error"))}function pb(n){if(n.h&&void 0!==Rw&&(!n.C[1]||4!=tu(n)||2!=n.ba()))if(n.v&&4==tu(n))k_(n.Fa,0,n);else if(ai(n,"readystatechange"),4==tu(n)){n.h=!1;try{const y=n.ba();e:switch(y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===y){var o=String(n.H).match(pr)[1]||null;if(!o&&Et.self&&Et.self.location){var u=Et.self.location.protocol;o=u.substr(0,u.length-1)}r=!QI.test(o?o.toLowerCase():"")}t=r}if(t)ai(n,"complete"),ai(n,"success");else{n.m=6;try{var f=2<tu(n)?n.g.statusText:""}catch(b){f=""}n.j=f+" ["+n.ba()+"]",fb(n)}}finally{Im(n)}}}function Im(n,e){if(n.g){gb(n);const t=n.g,r=n.C[0]?Kg:null;n.g=null,n.C=null,e||ai(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function gb(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Et.clearTimeout(n.A),n.A=null)}function tu(n){return n.g?n.g.readyState:0}function mb(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case ov:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function av(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function tC(n){let e="";return I_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ln(n,e,t))}function ip(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function yb(n){this.za=0,this.l=[],this.h=new V_,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ip("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ip("baseRetryDelayMs",5e3,n),this.$a=ip("retryDelaySeedMs",1e4,n),this.Ya=ip("forwardChannelMaxRetries",2,n),this.ra=ip("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new ab(n&&n.concurrentRequestLimit),this.Ca=new YI,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function uv(n){if(_b(n),3==n.G){var e=n.V++,t=eu(n.F);ln(t,"SID",n.J),ln(t,"RID",e),ln(t,"TYPE","terminate"),lh(n,t),(e=new Xd(n,n.h,e,void 0)).K=2,e.v=wm(eu(t)),t=!1,Et.navigator&&Et.navigator.sendBeacon&&(t=Et.navigator.sendBeacon(e.v.toString(),"")),!t&&Et.Image&&((new Image).src=e.v,t=!0),t||(e.g=Sm(e.l,null),e.g.ea(e.v)),e.F=Date.now(),eh(e)}gl(n)}function Cm(n){n.g&&(Am(n),n.g.cancel(),n.g=null)}function _b(n){Cm(n),n.u&&(Et.clearTimeout(n.u),n.u=null),op(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Et.clearTimeout(n.m),n.m=null)}function Dm(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&sp(n)}function sp(n){sh(n.i)||n.m||(n.m=!0,O_(n.Ha,n),n.C=0)}function cv(n,e){var t;t=e?e.m:n.V++;const r=eu(n.F);ln(r,"SID",n.J),ln(r,"RID",t),ln(r,"AID",n.U),lh(n,r),n.o&&n.s&&av(r,n.o,n.s),t=new Xd(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=lv(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),nv(n.i,t),G_(t,r,e)}function lh(n,e){n.j&&K_({},function(t,r){ln(e,r,t)})}function lv(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Or(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const f=["count="+t];-1==u?0<t?(u=o[0].h,f.push("ofs="+u)):u=0:f.push("ofs="+u);let y=!0;for(let b=0;b<t;b++){let C=o[b].h;const M=o[b].g;if(C-=u,0>C)u=Math.max(0,o[b].h-100),y=!1;else try{cb(M,f,"req"+C+"_")}catch(R){r&&r(M)}}if(y){r=f.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function dv(n){n.g||n.u||(n.Y=1,O_(n.Ga,n),n.A=0)}function Tm(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Qd(Or(n.Ga,n),wb(n,n.A)),n.A++,0))}function Am(n){null!=n.B&&(Et.clearTimeout(n.B),n.B=null)}function hv(n){n.g=new Xd(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=eu(n.oa);ln(e,"RID","rpc"),ln(e,"SID",n.J),ln(e,"CI",n.N?"0":"1"),ln(e,"AID",n.U),lh(n,e),ln(e,"TYPE","xmlhttp"),n.o&&n.s&&av(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=wm(eu(e)),t.s=null,t.U=!0,q_(t,n)}function op(n){null!=n.v&&(Et.clearTimeout(n.v),n.v=null)}function Gu(n,e){var t=null;if(n.g==e){op(n),Am(n),n.g=null;var r=2}else{if(!bm(n.i,e))return;t=e.D,rv(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;ai(r=lm(),new tb(r,t,e,o)),sp(n)}else dv(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function vb(n,e){return!(ub(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Qd(Or(n.Ha,n,e),wb(n,n.C)),n.C++,0)))}(n,e)||2==r&&Tm(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:pl(n,5);break;case 4:pl(n,10);break;case 3:pl(n,6);break;default:pl(n,2)}}function wb(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function pl(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Or(n.jb,n);t||(t=new hl("//www.google.com/images/cleardot.gif"),Et.location&&"http"==Et.location.protocol||ep(t,"https"),wm(t)),function lb(n,e){const t=new V_;if(Et.Image){const r=new Image;r.onload=Zf(ah,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Zf(ah,t,r,"TestLoadImage: error",!1,e),r.onabort=Zf(ah,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Zf(ah,t,r,"TestLoadImage: timeout",!1,e),Et.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Zi(2);n.G=0,n.j&&n.j.va(e),gl(n),_b(n)}function gl(n){n.G=0,n.I=-1,n.j&&((0!=iv(n.i).length||0!=n.l.length)&&(n.i.i.length=0,E_(n.l),n.l.length=0),n.j.ua())}function nC(n,e,t){let r=function GI(n){return n instanceof hl?eu(n):new hl(n,void 0)}(t);if(""!=r.i)e&&vm(r,e+"."+r.i),tp(r,r.m);else{const o=Et.location;r=function ob(n,e,t,r){var o=new hl(null,void 0);return n&&ep(o,n),e&&vm(o,e),t&&tp(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&I_(n.aa,function(o,u){ln(r,u,o)}),t=n.sa,(e=n.D)&&t&&ln(r,e,t),ln(r,"VER",n.ma),lh(n,r),r}function Sm(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new rr(t&&n.Ba&&!n.qa?new fl({ib:!0}):n.qa)).L=n.H,e}function rC(){}function ap(){if(Qa&&!(10<=Number(Bw)))throw Error("Environmental error: no available transport.")}function Gi(n,e){Zr.call(this),this.g=new yb(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Jg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Jg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new dh(this)}function iC(n){Qf.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function mt(){fm.call(this),this.status=1}function dh(n){this.g=n}(nt=rr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Z_.g(),this.C=function hm(n){return n.h||(n.h=n.i())}(this.u?this.u:Z_),this.g.onreadystatechange=Or(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void hb(this,u)}n=t||"";const o=new nh(this.headers);r&&K_(r,function(u,f){o.set(f,u)}),r=function UI(n){e:{var e=eC;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Et.FormData&&n instanceof Et.FormData,!(0<=kw(JI,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,f){this.g.setRequestHeader(f,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{gb(this),0<this.B&&((this.K=function XI(n){return Qa&&function Wd(){return function oi(n){var e=zd;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Lw(String(Ja)).split("."),t=Lw("9").split("."),r=Math.max(e.length,t.length);for(let f=0;0==n&&f<r;f++){var o=e[f]||"",u=t[f]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Hd(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Hd(0==o[2].length,0==u[2].length)||Hd(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Or(this.pa,this)):this.A=k_(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){hb(this,u)}},nt.pa=function(){void 0!==Rw&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ai(this,"timeout"),this.abort(8))},nt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ai(this,"complete"),ai(this,"abort"),Im(this))},nt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Im(this,!0)),rr.Z.M.call(this)},nt.Fa=function(){this.s||(this.F||this.v||this.l?pb(this):this.cb())},nt.cb=function(){pb(this)},nt.ba=function(){try{return 2<tu(this)?this.g.status:-1}catch(n){return-1}},nt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},nt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),db(e)}},nt.Da=function(){return this.m},nt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(nt=yb.prototype).ma=8,nt.G=1,nt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},nt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Xd(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=Uw(u),wo(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=lv(this,o,e),ln(t=eu(this.F),"RID",n),ln(t,"CVER",22),this.D&&ln(t,"X-HTTP-Session-Id",this.D),lh(this,t),this.o&&u&&av(t,this.o,u),nv(this.i,o),this.Ra&&ln(t,"TYPE","init"),this.ja?(ln(t,"$req",e),ln(t,"SID","null"),o.$=!0,G_(o,t,null)):G_(o,t,e),this.G=2}}else 3==this.G&&(n?cv(this,n):0==this.l.length||sh(this.i)||cv(this))},nt.Ga=function(){if(this.u=null,hv(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Qd(Or(this.bb,this),n)}},nt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Zi(10),Cm(this),hv(this))},nt.ab=function(){null!=this.v&&(this.v=null,Cm(this),Tm(this),Zi(19))},nt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Zi(2)):(this.h.info("Failed to ping google.com"),Zi(1))},(nt=rC.prototype).xa=function(){},nt.wa=function(){},nt.va=function(){},nt.ua=function(){},nt.Oa=function(){},ap.prototype.g=function(n,e){return new Gi(n,e)},jr(Gi,Zr),Gi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),O_(Or(n.hb,n,e))),Zi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=nC(n,null,n.W),sp(n)},Gi.prototype.close=function(){uv(this.g)},Gi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Dm(this.g,e)}else this.v?((e={}).__data__=im(n),Dm(this.g,e)):Dm(this.g,n)},Gi.prototype.M=function(){this.g.j=null,delete this.j,uv(this.g),delete this.g,Gi.Z.M.call(this)},jr(iC,Qf),jr(mt,fm),jr(dh,rC),dh.prototype.xa=function(){ai(this.g,"a")},dh.prototype.wa=function(n){ai(this.g,new iC(n))},dh.prototype.va=function(n){ai(this.g,new mt(n))},dh.prototype.ua=function(){ai(this.g,"b")},ap.prototype.createWebChannel=ap.prototype.g,Gi.prototype.send=Gi.prototype.u,Gi.prototype.open=Gi.prototype.m,Gi.prototype.close=Gi.prototype.close,Yf.NO_ERROR=0,Yf.TIMEOUT=8,Yf.HTTP_ERROR=6,nb.COMPLETE="complete",$_.EventType=Jd,Jd.OPEN="a",Jd.CLOSE="b",Jd.ERROR="c",Jd.MESSAGE="d",Zr.prototype.listen=Zr.prototype.N,rr.prototype.listenOnce=rr.prototype.O,rr.prototype.getLastError=rr.prototype.La,rr.prototype.getLastErrorCode=rr.prototype.Da,rr.prototype.getStatus=rr.prototype.ba,rr.prototype.getResponseJson=rr.prototype.Qa,rr.prototype.getResponseText=rr.prototype.ga,rr.prototype.send=rr.prototype.ea;var sC=Ya.createWebChannelTransport=function(){return new ap},oC=Ya.getStatEventTarget=function(){return lm()},hh=Ya.ErrorCode=Yf,aC=Ya.EventType=nb,xm=Ya.Event=Xa,up=Ya.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Kn=Ya.FetchXmlHttpFactory=fl,fv=Ya.WebChannel=$_,bb=Ya.XhrIo=rr;const Eb="@firebase/firestore";class Pr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pr.UNAUTHENTICATED=new Pr(null),Pr.GOOGLE_CREDENTIALS=new Pr("google-credentials-uid"),Pr.FIRST_PARTY=new Pr("first-party-uid"),Pr.MOCK_USER=new Pr("mock-user");let ml="9.9.0";const nu=new rl.Yd("@firebase/firestore");function Mm(){return nu.logLevel}function Pe(n,...e){if(nu.logLevel<=rl.in.DEBUG){const t=e.map(yl);nu.debug(`Firestore (${ml}): ${n}`,...t)}}function gr(n,...e){if(nu.logLevel<=rl.in.ERROR){const t=e.map(yl);nu.error(`Firestore (${ml}): ${n}`,...t)}}function cp(n,...e){if(nu.logLevel<=rl.in.WARN){const t=e.map(yl);nu.warn(`Firestore (${ml}): ${n}`,...t)}}function yl(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function rt(n="Unexpected state"){const e=`FIRESTORE (${ml}) INTERNAL ASSERTION FAILED: `+n;throw gr(e),new Error(e)}function _t(n,e){n||rt()}function Ge(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends Vt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Er{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Cb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lp{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Pr.UNAUTHENTICATED))}shutdown(){}}class dp{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class cC{constructor(e){this.t=e,this.currentUser=Pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let f=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new Er,e.enqueueRetryable(()=>u(this.currentUser))};const y=()=>{const C=f;e.enqueueRetryable((0,_e.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},b=C=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),y()};this.t.onInit(C=>b(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?b(C):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new Er)}},0),y()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_t("string"==typeof r.accessToken),new Cb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return _t(null===e||"string"==typeof e),new Pr(e)}}class lC{constructor(e,t,r){this.type="FirstParty",this.user=Pr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class dC{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new lC(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Pr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Db{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.p;return this.p=u.token,Pe("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(_t("string"==typeof t.token),this.p=t.token,new pv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function fC(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class gv{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=fC(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Ot(n,e){return n<e?-1:n>e?1:0}function fh(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function pC(n){return n+"\0"}class Bn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Te(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Bn.fromMillis(Date.now())}static fromDate(e){return Bn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Bn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ot(this.nanoseconds,e.nanoseconds):Ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new Bn(0,0))}static max(){return new vt(new Bn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Om{constructor(e,t,r){void 0===t?t=0:t>e.length&&rt(),void 0===r?r=e.length-t:r>e.length-t&&rt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Om.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Om?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),f=t.get(o);if(u<f)return-1;if(u>f)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Zt extends Om{construct(e,t,r){return new Zt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Te(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Zt(t)}static emptyPath(){return new Zt([])}}const Rm=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ir extends Om{construct(e,t,r){return new ir(e,t,r)}static isValidIdentifier(e){return Rm.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ir.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ir(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Te(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let f=!1;for(;o<e.length;){const y=e[o];if("\\"===y){if(o+1===e.length)throw new Te(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const b=e[o+1];if("\\"!==b&&"."!==b&&"`"!==b)throw new Te(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=b,o+=2}else"`"===y?(f=!f,o++):"."!==y||f?(r+=y,o++):(u(),o++)}if(u(),f)throw new Te(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ir(t)}static emptyPath(){return new ir([])}}class He{constructor(e){this.path=e}static fromPath(e){return new He(Zt.fromString(e))}static fromName(e){return new He(Zt.fromString(e).popFirst(5))}static empty(){return new He(Zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Zt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new Zt(e.slice()))}}class hp{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function _l(n){return n.fields.find(e=>2===e.kind)}function vl(n){return n.fields.filter(e=>2!==e.kind)}hp.UNKNOWN_ID=-1;class Pm{constructor(e,t){this.fieldPath=e,this.kind=t}}class fp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new fp(0,qi.min())}}function Tb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=vt.fromTimestamp(1e9===r?new Bn(t+1,0):new Bn(t,r));return new qi(o,He.empty(),e)}function Ab(n){return new qi(n.readTime,n.key,-1)}class qi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new qi(vt.min(),He.empty(),-1)}static max(){return new qi(vt.max(),He.empty(),-1)}}function mv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=He.comparator(n.documentKey,e.documentKey),0!==t?t:Ot(n.largestBatchId,e.largestBatchId))}const Sb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function qu(n){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,_e.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==Sb)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),Nm.apply(this,arguments)}class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,r)=>{t(e)})}static reject(e){return new ne((t,r)=>{r(e)})}static waitFor(e){return new ne((t,r)=>{let o=0,u=0,f=!1;e.forEach(y=>{++o,y.next(()=>{++u,f&&u===o&&t()},b=>r(b))}),f=!0,u===o&&t()})}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next(o=>o?ne.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new ne((r,o)=>{const u=e.length,f=new Array(u);let y=0;for(let b=0;b<u;b++){const C=b;t(e[C]).next(M=>{f[C]=M,++y,y===u&&r(f)},M=>o(M))}})}static doWhile(e,t){return new ne((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class pp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Er,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new gp(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const o=_v(r.target.error);this.T.reject(new gp(e,o))}}static open(e,t,r,o){try{return new pp(t,e.transaction(o,r))}catch(u){throw new gp(t,u)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new gC(t)}}class bo{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===bo.v((0,Vt.z$)())&&gr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),zu(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,Vt.hl)())return!1;if(bo.S())return!0;const e=(0,Vt.z$)(),t=bo.v(e),r=0<t&&t<10,o=bo.D(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=f=>{r(f.target.result)},u.onblocked=()=>{o(new gp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=f=>{const y=f.target.error;o("VersionError"===y.name?new Te(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===y.name?new Te(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+y):new gp(e,y))},u.onupgradeneeded=f=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',f.oldVersion),t.P.O(f.target.result,u.transaction,f.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=r=>t.M(r)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,_e.Z)(function*(){const f="readonly"===t;let y=0;for(;;){++y;try{u.db=yield u.k(e);const b=pp.open(u.db,e,f?"readonly":"readwrite",r),C=o(b).next(M=>(b.R(),M)).catch(M=>(b.abort(M),ne.reject(M))).toPromise();return C.catch(()=>{}),yield b.A,C}catch(b){const C=b,M="FirebaseError"!==C.name&&y<3;if(Pe("SimpleDb","Transaction failed with error:",C.message,"Retrying:",M),u.close(),!M)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class xb{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return zu(this.$.delete())}}class gp extends Te{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ca(n){return"IndexedDbTransactionError"===n.name}class gC{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),zu(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),zu(this.store.add(e))}get(e){return zu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),zu(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),zu(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.G(o,(f,y)=>{u.push(y)}).next(()=>u)}{const o=this.store.getAll(r.range);return new ne((u,f)=>{o.onerror=y=>{f(y.target.error)},o.onsuccess=y=>{u(y.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ne((o,u)=>{r.onerror=f=>{u(f.target.error)},r.onsuccess=f=>{o(f.target.result)}})}W(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const o=this.cursor(r);return this.G(o,(u,f,y)=>y.delete())}J(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.G(o,t)}Y(e){const t=this.cursor({});return new ne((r,o)=>{t.onerror=u=>{const f=_v(u.target.error);o(f)},t.onsuccess=u=>{const f=u.target.result;f?e(f.primaryKey,f.value).next(y=>{y?f.continue():r()}):r()}})}G(e,t){const r=[];return new ne((o,u)=>{e.onerror=f=>{u(f.target.error)},e.onsuccess=f=>{const y=f.target.result;if(!y)return void o();const b=new xb(y),C=t(y.primaryKey,y.value,b);if(C instanceof ne){const M=C.catch(R=>(b.done(),ne.reject(R)));r.push(M)}b.isDone?o():null===b.U?y.continue():y.continue(b.U)}}).next(()=>ne.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function zu(n){return new ne((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=_v(r.target.error);t(o)}})}let yv=!1;function _v(n){const e=bo.v((0,Vt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yv||(yv=!0,setTimeout(()=>{throw r},0)),r}}return n}class mC{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Pe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_e.Z)(function*(){t.task=null;try{Pe("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){ca(r)?Pe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield qu(r)}yield t.Z(1)}))}}class yC{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,_e.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let o=t,u=!0;return ne.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(f=>{if(null!==f&&!r.has(f))return Pe("IndexBackiller",`Processing collection: ${f}`),this.nt(e,f,o).next(y=>{o-=y,r.add(f)});u=!1})).next(()=>t-o)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const f=u.changes;return this.localStore.indexManager.updateIndexEntries(e,f).next(()=>this.st(o,u)).next(y=>(Pe("IndexBackiller",`Updating offset: ${y}`),this.localStore.indexManager.updateCollectionGroup(e,t,y))).next(()=>f.size)}))}st(e,t){let r=e;return t.changes.forEach((o,u)=>{const f=Ab(u);mv(f,r)>0&&(r=f)}),new qi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ui{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function Mb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Wu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ob(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}ui.ot=-1;class Yn{constructor(e,t){this.comparator=e,this.root=t||Hr.EMPTY}insert(e,t){return new Yn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Hr.BLACK,null,null))}remove(e){return new Yn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new km(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new km(this.root,e,this.comparator,!1)}getReverseIterator(){return new km(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new km(this.root,e,this.comparator,!0)}}class km{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:Hr.RED,this.left=null!=o?o:Hr.EMPTY,this.right=null!=u?u:Hr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Hr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Hr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Hr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}Hr.EMPTY=null,Hr.RED=!0,Hr.BLACK=!1,Hr.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Hr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pn{constructor(e){this.comparator=e,this.data=new Yn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Rb(this.data.getIterator())}getIteratorFrom(e){return new Rb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new pn(this.comparator);return t.data=e,t}}class Rb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ph(n){return n.hasNext()?n.getNext():void 0}class gs{constructor(e){this.fields=e,e.sort(ir.comparator)}static empty(){return new gs([])}unionWith(e){let t=new pn(ir.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new gs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class mr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new mr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new mr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mr.EMPTY_BYTE_STRING=new mr("");const _C=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ku(n){if(_t(!!n),"string"==typeof n){let e=0;const t=_C.exec(n);if(_t(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jn(n.seconds),nanos:jn(n.nanos)}}function jn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function bl(n){return"string"==typeof n?mr.fromBase64String(n):mr.fromUint8Array(n)}function vv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Nb(n){const e=n.mapValue.fields.__previous_value__;return vv(e)?Nb(e):e}function El(n){const e=Ku(n.mapValue.fields.__local_write_time__.timestampValue);return new Bn(e.seconds,e.nanos)}class wv{constructor(e,t,r,o,u,f,y,b){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=y,this.useFetchStreams=b}}class la{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new la("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof la&&e.projectId===this.projectId&&e.database===this.database}}function Il(n){return null==n}function mp(n){return 0===n&&1/n==-1/0}function kb(n){return"number"==typeof n&&Number.isInteger(n)&&!mp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const da={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Fm={nullValue:"NULL_VALUE"};function Yu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?vv(n)?4:Lb(n)?9007199254740991:10:rt()}function ha(n,e){if(n===e)return!0;const t=Yu(n);if(t!==Yu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return El(n).isEqual(El(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Ku(r.timestampValue),f=Ku(o.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,bl(n.bytesValue).isEqual(bl(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return jn(r.geoPointValue.latitude)===jn(o.geoPointValue.latitude)&&jn(r.geoPointValue.longitude)===jn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return jn(r.integerValue)===jn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=jn(r.doubleValue),f=jn(o.doubleValue);return u===f?mp(u)===mp(f):isNaN(u)&&isNaN(f)}return!1}(n,e);case 9:return fh(n.arrayValue.values||[],e.arrayValue.values||[],ha);case 10:return function(r,o){const u=r.mapValue.fields||{},f=o.mapValue.fields||{};if(Mb(u)!==Mb(f))return!1;for(const y in u)if(u.hasOwnProperty(y)&&(void 0===f[y]||!ha(u[y],f[y])))return!1;return!0}(n,e);default:return rt()}var o}function gh(n,e){return void 0!==(n.values||[]).find(t=>ha(t,e))}function Qu(n,e){if(n===e)return 0;const t=Yu(n),r=Yu(e);if(t!==r)return Ot(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ot(n.booleanValue,e.booleanValue);case 2:return function(o,u){const f=jn(o.integerValue||o.doubleValue),y=jn(u.integerValue||u.doubleValue);return f<y?-1:f>y?1:f===y?0:isNaN(f)?isNaN(y)?0:-1:1}(n,e);case 3:return bv(n.timestampValue,e.timestampValue);case 4:return bv(El(n),El(e));case 5:return Ot(n.stringValue,e.stringValue);case 6:return function(o,u){const f=bl(o),y=bl(u);return f.compareTo(y)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const f=o.split("/"),y=u.split("/");for(let b=0;b<f.length&&b<y.length;b++){const C=Ot(f[b],y[b]);if(0!==C)return C}return Ot(f.length,y.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const f=Ot(jn(o.latitude),jn(u.latitude));return 0!==f?f:Ot(jn(o.longitude),jn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const f=o.values||[],y=u.values||[];for(let b=0;b<f.length&&b<y.length;++b){const C=Qu(f[b],y[b]);if(C)return C}return Ot(f.length,y.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===da.mapValue&&u===da.mapValue)return 0;if(o===da.mapValue)return 1;if(u===da.mapValue)return-1;const f=o.fields||{},y=Object.keys(f),b=u.fields||{},C=Object.keys(b);y.sort(),C.sort();for(let M=0;M<y.length&&M<C.length;++M){const R=Ot(y[M],C[M]);if(0!==R)return R;const z=Qu(f[y[M]],b[C[M]]);if(0!==z)return z}return Ot(y.length,C.length)}(n.mapValue,e.mapValue);default:throw rt()}}function bv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ot(n,e);const t=Ku(n),r=Ku(e),o=Ot(t.seconds,r.seconds);return 0!==o?o:Ot(t.nanos,r.nanos)}function yp(n){return Ev(n)}function Ev(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Ku(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?bl(n.bytesValue).toBase64():"referenceValue"in n?He.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const f of r.values||[])u?u=!1:o+=",",o+=Ev(f);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",f=!0;for(const y of o)f?f=!1:u+=",",u+=`${y}:${Ev(r.fields[y])}`;return u+"}"}(n.mapValue):rt();var e}function Eo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Iv(n){return!!n&&"integerValue"in n}function fa(n){return!!n&&"arrayValue"in n}function mh(n){return!!n&&"nullValue"in n}function Fb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Cv(n){return!!n&&"mapValue"in n}function yh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Wu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=yh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Lb(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function vC(n){return"nullValue"in n?Fm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Eo(la.empty(),He.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:rt()}function wC(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Eo(la.empty(),He.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?da:rt()}function Vb(n,e){const t=Qu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Dv(n,e){const t=Qu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Nr{constructor(e){this.value=e}static empty(){return new Nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Cv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yh(t)}setAll(e){let t=ir.emptyPath(),r={},o=[];e.forEach((f,y)=>{if(!t.isImmediateParentOf(y)){const b=this.getFieldsMap(t);this.applyChanges(b,r,o),r={},o=[],t=y.popLast()}f?r[y.lastSegment()]=yh(f):o.push(y.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Cv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ha(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Cv(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Wu(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Nr(yh(this.value))}}function Lm(n){const e=[];return Wu(n.fields,(t,r)=>{const o=new ir([t]);if(Cv(r)){const u=Lm(r.mapValue).fields;if(0===u.length)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)}),new gs(e)}class dn{constructor(e,t,r,o,u,f){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=f}static newInvalidDocument(e){return new dn(e,0,vt.min(),vt.min(),Nr.empty(),0)}static newFoundDocument(e,t,r){return new dn(e,1,t,vt.min(),r,0)}static newNoDocument(e,t){return new dn(e,2,t,vt.min(),Nr.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,vt.min(),Nr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class _p{constructor(e,t=null,r=[],o=[],u=null,f=null,y=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=f,this.endAt=y,this.ut=null}}function Ub(n,e=null,t=[],r=[],o=null,u=null,f=null){return new _p(n,e,t,r,o,u,f)}function Ju(n){const e=Ge(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+yp(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Il(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>yp(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>yp(r)).join(",")),e.ut=t}return e.ut}function vp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!wA(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!ha(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!jm(n.startAt,e.startAt)&&jm(n.endAt,e.endAt)}function Vm(n){return He.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Um(n,e){return n.filters.filter(t=>t instanceof ci&&t.field.isEqual(e))}function Bm(n,e,t){let r=Fm,o=!0;for(const u of Um(n,e)){let f=Fm,y=!0;switch(u.op){case"<":case"<=":f=vC(u.value);break;case"==":case"in":case">=":f=u.value;break;case">":f=u.value,y=!1;break;case"!=":case"not-in":f=Fm}Vb({value:r,inclusive:o},{value:f,inclusive:y})<0&&(r=f,o=y)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const f=t.position[u];Vb({value:r,inclusive:o},{value:f,inclusive:t.inclusive})<0&&(r=f,o=t.inclusive);break}return{value:r,inclusive:o}}function jb(n,e,t){let r=da,o=!0;for(const u of Um(n,e)){let f=da,y=!0;switch(u.op){case">=":case">":f=wC(u.value),y=!1;break;case"==":case"in":case"<=":f=u.value;break;case"<":f=u.value,y=!1;break;case"!=":case"not-in":f=da}Dv({value:r,inclusive:o},{value:f,inclusive:y})>0&&(r=f,o=y)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const f=t.position[u];Dv({value:r,inclusive:o},{value:f,inclusive:t.inclusive})>0&&(r=f,o=t.inclusive);break}return{value:r,inclusive:o}}class ci extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new bC(e,t,r):"array-contains"===t?new vh(e,r):"in"===t?new vA(e,r):"not-in"===t?new $b(e,r):"array-contains-any"===t?new IC(e,r):new ci(e,t,r)}static ct(e,t,r){return"in"===t?new EC(e,r):new _h(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Qu(t,this.value)):null!==t&&Yu(this.value)===Yu(t)&&this.at(Qu(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class bC extends ci{constructor(e,t,r){super(e,t,r),this.key=He.fromName(r.referenceValue)}matches(e){const t=He.comparator(e.key,this.key);return this.at(t)}}class EC extends ci{constructor(e,t){super(e,"in",t),this.keys=Tv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class _h extends ci{constructor(e,t){super(e,"not-in",t),this.keys=Tv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Tv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>He.fromName(r.referenceValue))}class vh extends ci{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fa(t)&&gh(t.arrayValue,this.value)}}class vA extends ci{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&gh(this.value.arrayValue,t)}}class $b extends ci{constructor(e,t){super(e,"not-in",t)}matches(e){if(gh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!gh(this.value.arrayValue,t)}}class IC extends ci{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fa(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>gh(this.value.arrayValue,r))}}class Cl{constructor(e,t){this.position=e,this.inclusive=t}}class Dl{constructor(e,t="asc"){this.field=e,this.dir=t}}function wA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Av(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],f=n.position[o];if(r=u.field.isKeyField()?He.comparator(He.fromName(f.referenceValue),t.key):Qu(f,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function jm(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ha(n.position[t],e.position[t]))return!1;return!0}class ru{constructor(e,t=null,r=[],o=[],u=null,f="F",y=null,b=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=f,this.startAt=y,this.endAt=b,this.lt=null,this.ft=null}}function Zb(n,e,t,r,o,u,f,y){return new ru(n,e,t,r,o,u,f,y)}function wh(n){return new ru(n)}function Sv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function xv(n){for(const e of n.filters)if(e.ht())return e.field;return null}function Mv(n){return null!==n.collectionGroup}function bh(n){const e=Ge(n);if(null===e.lt){e.lt=[];const t=xv(e),r=Sv(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new Dl(t)),e.lt.push(new Dl(ir.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.lt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Dl(ir.keyField(),u))}}}return e.lt}function Gs(n){const e=Ge(n);if(!e.ft)if("F"===e.limitType)e.ft=Ub(e.path,e.collectionGroup,bh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of bh(e))t.push(new Dl(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Cl(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Cl(e.startAt.position,e.startAt.inclusive):null;e.ft=Ub(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.ft}function Hb(n,e,t){return new ru(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function iu(n,e){return vp(Gs(n),Gs(e))&&n.limitType===e.limitType}function Ov(n){return`${Ju(Gs(n))}|lt:${n.limitType}`}function $m(n){return`Query(target=${function Bb(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${yp(r.value)}`;var r}).join(", ")}]`),Il(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>yp(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>yp(t)).join(",")),`Target(${e})`}(Gs(n))}; limitType=${n.limitType})`}function Zm(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):He.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,f){const y=Av(o,u,f);return o.inclusive?y<=0:y<0}(t.startAt,bh(t),r)||t.endAt&&!function(o,u,f){const y=Av(o,u,f);return o.inclusive?y>=0:y>0}(t.endAt,bh(t),r)));var t,r}function Rv(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Pv(n){return(e,t)=>{let r=!1;for(const o of bh(n)){const u=DC(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function DC(n,e,t){const r=n.field.isKeyField()?He.comparator(e.key,t.key):function(o,u,f){const y=u.data.field(o),b=f.data.field(o);return null!==y&&null!==b?Qu(y,b):rt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return rt()}}function Gb(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mp(e)?"-0":e}}function qb(n){return{integerValue:""+n}}function zb(n,e){return kb(e)?qb(e):Gb(n,e)}class Hm{constructor(){this._=void 0}}function TC(n,e,t){return n instanceof Ih?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof su?Io(n,e):n instanceof Tl?Gm(n,e):function(r,o){const u=Eh(r,o),f=Wb(u)+Wb(r._t);return Iv(u)&&Iv(r._t)?qb(f):Gb(r.wt,f)}(n,e)}function AC(n,e,t){return n instanceof su?Io(n,e):n instanceof Tl?Gm(n,e):t}function Eh(n,e){return n instanceof pa?Iv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ih extends Hm{}class su extends Hm{constructor(e){super(),this.elements=e}}function Io(n,e){const t=Kb(e);for(const r of n.elements)t.some(o=>ha(o,r))||t.push(r);return{arrayValue:{values:t}}}class Tl extends Hm{constructor(e){super(),this.elements=e}}function Gm(n,e){let t=Kb(e);for(const r of n.elements)t=t.filter(o=>!ha(o,r));return{arrayValue:{values:t}}}class pa extends Hm{constructor(e,t){super(),this.wt=e,this._t=t}}function Wb(n){return jn(n.integerValue||n.doubleValue)}function Kb(n){return fa(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class wp{constructor(e,t){this.field=e,this.transform=t}}class zm{constructor(e,t){this.version=e,this.transformResults=t}}class $n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $n}static exists(e){return new $n(void 0,e)}static updateTime(e){return new $n(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class bp{}function Nv(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Xu(n.key,$n.none()):new Ep(n.key,n.data,$n.none());{const t=n.data,r=Nr.empty();let o=new pn(ir.comparator);for(let u of e.fields)if(!o.has(u)){let f=t.field(u);null===f&&u.length>1&&(u=u.popLast(),f=t.field(u)),null===f?r.delete(u):r.set(u,f),o=o.add(u)}return new Co(n.key,r,new gs(o.toArray()),$n.none())}}function kv(n,e,t){n instanceof Ep?function(r,o,u){const f=r.value.clone(),y=Fv(r.fieldTransforms,o,u.transformResults);f.setAll(y),o.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):n instanceof Co?function(r,o,u){if(!Wm(r.precondition,o))return void o.convertToUnknownDocument(u.version);const f=Fv(r.fieldTransforms,o,u.transformResults),y=o.data;y.setAll(Km(r)),y.setAll(f),o.convertToFoundDocument(u.version,y).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ch(n,e,t,r){return n instanceof Ep?function(o,u,f,y){if(!Wm(o.precondition,u))return f;const b=o.value.clone(),C=Ym(o.fieldTransforms,y,u);return b.setAll(C),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null}(n,e,t,r):n instanceof Co?function(o,u,f,y){if(!Wm(o.precondition,u))return f;const b=Ym(o.fieldTransforms,y,u),C=u.data;return C.setAll(Km(o)),C.setAll(b),u.convertToFoundDocument(u.version,C).setHasLocalMutations(),null===f?null:f.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(M=>M.field))}(n,e,t,r):(f=t,Wm(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f);var u,f}function SC(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=Eh(r.transform,o||null);null!=u&&(null===t&&(t=Nr.empty()),t.set(r.field,u))}return t||null}function Yb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&fh(t,r,(o,u)=>function qm(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof su&&r instanceof su||t instanceof Tl&&r instanceof Tl?fh(t.elements,r.elements,ha):t instanceof pa&&r instanceof pa?ha(t._t,r._t):t instanceof Ih&&r instanceof Ih);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ep extends bp{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Co extends bp{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Km(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Fv(n,e,t){const r=new Map;_t(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],f=u.transform,y=e.data.field(u.field);r.set(u.field,AC(f,y,t[o]))}return r}function Ym(n,e,t){const r=new Map;for(const o of n){const u=o.transform,f=t.data.field(o.field);r.set(o.field,TC(u,f,e))}return r}class Xu extends bp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Lv extends bp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class xC{constructor(e){this.count=e}}var yr,Wt;function Vv(n){switch(n){default:return rt();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function Qm(n){if(void 0===n)return gr("GRPC error has no .code"),ae.UNKNOWN;switch(n){case yr.OK:return ae.OK;case yr.CANCELLED:return ae.CANCELLED;case yr.UNKNOWN:return ae.UNKNOWN;case yr.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case yr.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case yr.INTERNAL:return ae.INTERNAL;case yr.UNAVAILABLE:return ae.UNAVAILABLE;case yr.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case yr.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case yr.NOT_FOUND:return ae.NOT_FOUND;case yr.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case yr.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case yr.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case yr.ABORTED:return ae.ABORTED;case yr.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case yr.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case yr.DATA_LOSS:return ae.DATA_LOSS;default:return rt()}}(Wt=yr||(yr={}))[Wt.OK=0]="OK",Wt[Wt.CANCELLED=1]="CANCELLED",Wt[Wt.UNKNOWN=2]="UNKNOWN",Wt[Wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wt[Wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wt[Wt.NOT_FOUND=5]="NOT_FOUND",Wt[Wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wt[Wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wt[Wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wt[Wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wt[Wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wt[Wt.ABORTED=10]="ABORTED",Wt[Wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wt[Wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wt[Wt.INTERNAL=13]="INTERNAL",Wt[Wt.UNAVAILABLE=14]="UNAVAILABLE",Wt[Wt.DATA_LOSS=15]="DATA_LOSS";class ou{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Wu(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return Ob(this.inner)}size(){return this.innerSize}}const MC=new Yn(He.comparator);function vi(){return MC}const Uv=new Yn(He.comparator);function Ip(...n){let e=Uv;for(const t of n)e=e.insert(t.key,t);return e}function Bv(n){let e=Uv;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Do(){return Dh()}function Qb(){return Dh()}function Dh(){return new ou(n=>n.toString(),(n,e)=>n.isEqual(e))}const OC=new Yn(He.comparator),wi=new pn(He.comparator);function Dt(...n){let e=wi;for(const t of n)e=e.add(t);return e}const RC=new pn(Ot);function Jm(){return RC}class Xm{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,au.createSynthesizedTargetChangeForCurrentChange(e,t)),new Xm(vt.min(),r,Jm(),vi(),Dt())}}class au{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new au(mr.EMPTY_BYTE_STRING,t,Dt(),Dt(),Dt())}}class ey{constructor(e,t,r,o){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=o}}class ty{constructor(e,t){this.targetId=e,this.It=t}}class Jb{constructor(e,t,r=mr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class jv{constructor(){this.Tt=0,this.Et=ny(),this.At=mr.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Dt(),t=Dt(),r=Dt();return this.Et.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:rt()}}),new au(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=ny()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class PC{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=vi(),this.Bt=Xb(),this.Lt=new pn(Ot)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:rt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,o)=>{this.jt(o)&&t(o)})}zt(e){const t=e.targetId,r=e.It.count,o=this.Ht(t);if(o){const u=o.target;if(Vm(u))if(0===r){const f=new He(u.path);this.Kt(t,f,dn.newNoDocument(f,vt.min()))}else _t(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((u,f)=>{const y=this.Ht(f);if(y){if(u.current&&Vm(y.target)){const b=new He(y.target.path);null!==this.$t.get(b)||this.Xt(f,b)||this.Kt(f,b,dn.newNoDocument(b,e))}u.vt&&(t.set(f,u.St()),u.Dt())}});let r=Dt();this.Bt.forEach((u,f)=>{let y=!0;f.forEachWhile(b=>{const C=this.Ht(b);return!C||2===C.purpose||(y=!1,!1)}),y&&(r=r.add(u))}),this.$t.forEach((u,f)=>f.setReadTime(e));const o=new Xm(e,t,this.Lt,this.$t,r);return this.$t=vi(),this.Bt=Xb(),this.Lt=new pn(Ot),o}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const o=this.Qt(e);this.Xt(e,t)?o.Ct(t,1):o.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new jv,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new pn(Ot),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new jv),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function Xb(){return new Yn(He.comparator)}function ny(){return new Yn(He.comparator)}const eE={asc:"ASCENDING",desc:"DESCENDING"},tE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ry{constructor(e,t){this.databaseId=e,this.dt=t}}function Al(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NC(n,e){return n.dt?e.toBase64():e.toUint8Array()}function nE(n,e){return Al(n,e.toTimestamp())}function kr(n){return _t(!!n),vt.fromTimestamp(function(e){const t=Ku(e);return new Bn(t.seconds,t.nanos)}(n))}function iy(n,e){return(t=n,new Zt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Cp(n){const e=Zt.fromString(n);return _t(LC(e)),e}function Th(n,e){return iy(n.databaseId,e.path)}function ga(n,e){const t=Cp(e);if(t.get(1)!==n.databaseId.projectId)throw new Te(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Te(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new He(rE(t))}function Dp(n,e){return iy(n.databaseId,e)}function sy(n){const e=Cp(n);return 4===e.length?Zt.emptyPath():rE(e)}function oy(n){return new Zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rE(n){return _t(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function iE(n,e,t){return{name:Th(n,e),fields:t.value.mapValue.fields}}function $v(n,e,t){const r=ga(n,e.name),o=kr(e.updateTime),u=new Nr({mapValue:{fields:e.fields}}),f=dn.newFoundDocument(r,o,u);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function Ah(n,e){let t;if(e instanceof Ep)t={update:iE(n,e.key,e.value)};else if(e instanceof Xu)t={delete:Th(n,e.key)};else if(e instanceof Co)t={update:iE(n,e.key,e.data),updateMask:EA(e.fieldMask)};else{if(!(e instanceof Lv))return rt();t={verify:Th(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const f=u.transform;if(f instanceof Ih)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof su)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Tl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof pa)return{fieldPath:u.field.canonicalString(),increment:f._t};throw rt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:nE(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:rt()),t;var o}function ay(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?$n.updateTime(kr(o.updateTime)):void 0!==o.exists?$n.exists(o.exists):$n.none():$n.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,f){let y=null;"setToServerValue"in f?(_t("REQUEST_TIME"===f.setToServerValue),y=new Ih):"appendMissingElements"in f?y=new su(f.appendMissingElements.values||[]):"removeAllFromArray"in f?y=new Tl(f.removeAllFromArray.values||[]):"increment"in f?y=new pa(u,f.increment):rt();const b=ir.fromServerFormat(f.fieldPath);return new wp(b,y)}(n,o)):[];var o;if(e.update){const o=ga(n,e.update.name),u=new Nr({mapValue:{fields:e.update.fields}});if(e.updateMask){const f=new gs((e.updateMask.fieldPaths||[]).map(C=>ir.fromServerFormat(C)));return new Co(o,u,f,t,r)}return new Ep(o,u,t,r)}if(e.delete){const o=ga(n,e.delete);return new Xu(o,t)}if(e.verify){const o=ga(n,e.verify);return new Lv(o,t)}return rt()}function oE(n,e){return{documents:[Dp(n,e.path)]}}function Zv(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Dp(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Dp(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(b){if(0===b.length)return;const C=b.map(M=>function(R){if("=="===R.op){if(Fb(R.value))return{unaryFilter:{field:Sh(R.field),op:"IS_NAN"}};if(mh(R.value))return{unaryFilter:{field:Sh(R.field),op:"IS_NULL"}}}else if("!="===R.op){if(Fb(R.value))return{unaryFilter:{field:Sh(R.field),op:"IS_NOT_NAN"}};if(mh(R.value))return{unaryFilter:{field:Sh(R.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sh(R.field),op:lE(R.op),value:R.value}}}(M));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(b){if(0!==b.length)return b.map(C=>{return{field:Sh((M=C).field),direction:cE(M.dir)};var M})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=(C=e.limit,n.dt||Il(C)?C:{value:C});var C,y,b;return null!==f&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt={before:(y=e.startAt).inclusive,values:y.position}),e.endAt&&(t.structuredQuery.endAt={before:!(b=e.endAt).inclusive,values:b.position}),t}function aE(n){let e=sy(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){_t(1===r);const M=t.from[0];M.allDescendants?o=M.collectionId:e=e.child(M.collectionId)}let u=[];t.where&&(u=Hv(t.where));let f=[];t.orderBy&&(f=t.orderBy.map(M=>{return new Dl(xh((R=M).field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let y=null;t.limit&&(y=function(M){let R;return R="object"==typeof M?M.value:M,Il(R)?null:R}(t.limit));let b=null;var M;t.startAt&&(b=new Cl((M=t.startAt).values||[],!!M.before));let C=null;return t.endAt&&(C=function(M){return new Cl(M.values||[],!M.before)}(t.endAt)),Zb(e,o,f,u,y,"F",b,C)}function Hv(n){return n?void 0!==n.unaryFilter?[dE(n)]:void 0!==n.fieldFilter?[bA(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Hv(e)).reduce((e,t)=>e.concat(t)):rt():[]}function cE(n){return eE[n]}function lE(n){return tE[n]}function Sh(n){return{fieldPath:n.canonicalString()}}function xh(n){return ir.fromServerFormat(n.fieldPath)}function bA(n){return ci.create(xh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(n.fieldFilter.op),n.fieldFilter.value)}function dE(n){switch(n.unaryFilter.op){case"IS_NAN":const e=xh(n.unaryFilter.field);return ci.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=xh(n.unaryFilter.field);return ci.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=xh(n.unaryFilter.field);return ci.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xh(n.unaryFilter.field);return ci.create(o,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}function EA(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function LC(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function zi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=VC(e)),e=IA(n.get(t),e);return VC(e)}function IA(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function VC(n){return n+"\x01\x01"}function uu(n){const e=n.length;if(_t(e>=2),2===e)return _t("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Zt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const f=n.indexOf("\x01",u);switch((f<0||f>t)&&rt(),n.charAt(f+1)){case"\x01":const y=n.substring(u,f);let b;0===o.length?b=y:(o+=y,b=o,o=""),r.push(b);break;case"\x10":o+=n.substring(u,f),o+="\0";break;case"\x11":o+=n.substring(u,f+1);break;default:rt()}u=f+2}return new Zt(r)}const UC=["userId","batchId"];function Gv(n,e){return[n,zi(e)]}function Tp(n,e,t){return[n,zi(e),t]}const CA={},qv=["prefixPath","collectionGroup","readTime","documentId"],Mh=["prefixPath","collectionGroup","documentId"],hE=["collectionGroup","readTime","prefixPath","documentId"],BC=["canonicalId","targetId"],jC=["targetId","path"],zv=["path","targetId"],fE=["collectionId","parent"],pE=["indexId","uid"],gE=["uid","sequenceNumber"],DA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],mE=["indexId","uid","orderedDocumentKey"],uy=["userId","collectionPath","documentId"],yE=["userId","collectionPath","largestBatchId"],TA=["userId","collectionGroup","largestBatchId"],$C=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],AA=[...$C,"documentOverlays"],_E=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],cy=_E,ZC=[...cy,"indexConfiguration","indexState","indexEntries"];class vE extends wl{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Fr(n,e){const t=Ge(n);return bo.N(t.ee,e)}class Ap{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&kv(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ch(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ch(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Qb();return this.mutations.forEach(o=>{const u=e.get(o.key),f=u.overlayedDocument;let y=this.applyToLocalView(f,u.mutatedFields);y=t.has(o.key)?null:y;const b=Nv(f,y);null!==b&&r.set(o.key,b),f.isValidDocument()||f.convertToNoDocument(vt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Dt())}isEqual(e){return this.batchId===e.batchId&&fh(this.mutations,e.mutations,(t,r)=>Yb(t,r))&&fh(this.baseMutations,e.baseMutations,(t,r)=>Yb(t,r))}}class Wv{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){_t(e.mutations.length===r.length);let o=OC;const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,r[f].version);return new Wv(e,t,r,o)}}class bi{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ec{constructor(e,t,r,o,u=vt.min(),f=vt.min(),y=mr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=y}withSequenceNumber(e){return new ec(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ec(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ec(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ly{constructor(e){this.ne=e}}function wE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Oh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Th(o=n.ne,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Al(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:tc(e.version)};else{if(!e.isUnknownDocument())return rt();r.unknownDocument={path:t.path.toArray(),version:tc(e.version)}}var o,u;return r}function Oh(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function tc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function nc(n){const e=new Bn(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function Sl(n,e){const t=(e.baseMutations||[]).map(u=>ay(n.ne,u));for(let u=0;u<e.mutations.length-1;++u){const f=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(f.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>ay(n.ne,u)),o=Bn.fromMillis(e.localWriteTimeMs);return new Ap(e.batchId,o,t,r)}function Rh(n){const e=nc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?nc(n.lastLimboFreeSnapshotVersion):vt.min();let r;var o;return void 0!==n.query.documents?(_t(1===(o=n.query).documents.length),r=Gs(wh(sy(o.documents[0])))):r=Gs(aE(n.query)),new ec(r,n.targetId,0,n.lastListenSequenceNumber,e,t,mr.fromBase64String(n.resumeToken))}function Kv(n,e){const t=tc(e.snapshotVersion),r=tc(e.lastLimboFreeSnapshotVersion);let o;o=Vm(e.target)?oE(n.ne,e.target):Zv(n.ne,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ju(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function Yv(n){const e=aE({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Hb(e,e.limit,"L"):e}function Qv(n,e){return new bi(e.largestBatchId,ay(n.ne,e.overlayMutation))}function dy(n,e){const t=e.path.lastSegment();return[n,zi(e.path.popLast()),t]}function qs(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:tc(r.readTime),documentKey:zi(r.documentKey.path),largestBatchId:r.largestBatchId}}class GC{getBundleMetadata(e,t){return qC(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:nc(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return qC(e).put({bundleId:(r=t).id,createTime:tc(kr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return bE(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:Yv(o.bundledQuery),readTime:nc(o.readTime)};var o})}saveNamedQuery(e,t){return bE(e).put({name:(r=t).name,readTime:tc(kr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function qC(n){return Fr(n,"bundles")}function bE(n){return Fr(n,"namedQueries")}class Sp{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new Sp(e,t.uid||"")}getOverlay(e,t){return xp(e).get(dy(this.userId,t)).next(r=>r?Qv(this.wt,r):null)}getOverlays(e,t){const r=Do();return ne.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,f)=>{const y=new bi(t,f);o.push(this.ie(e,y))}),ne.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(f=>o.add(zi(f.getCollectionPath())));const u=[];return o.forEach(f=>{const y=IDBKeyRange.bound([this.userId,f,r],[this.userId,f,r+1],!1,!0);u.push(xp(e).W("collectionPathOverlayIndex",y))}),ne.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Do(),u=zi(t),f=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return xp(e).K("collectionPathOverlayIndex",f).next(y=>{for(const b of y){const C=Qv(this.wt,b);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Do();let f;const y=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return xp(e).J({index:"collectionGroupOverlayIndex",range:y},(b,C,M)=>{const R=Qv(this.wt,C);u.size()<o||R.largestBatchId===f?(u.set(R.getKey(),R),f=R.largestBatchId):M.done()}).next(()=>u)}ie(e,t){return xp(e).put(function(r,o,u){const[f,y,b]=dy(o,u.mutation.key);return{userId:o,collectionPath:y,documentId:b,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Ah(r.ne,u.mutation)}}(this.wt,this.userId,t))}}function xp(n){return Fr(n,"documentOverlays")}class xl{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(jn(e.integerValue));else if("doubleValue"in e){const r=jn(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),mp(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(bl(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?Lb(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):rt()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const o of Object.keys(r))this.le(o,t),this.oe(r[o],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const o of r)this.oe(o,t)}_e(e,t){this.ce(t,37),He.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function EE(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function IE(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=EE(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}xl.ye=new xl;class SA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const o=t.codePointAt(0);this.Ie(240|o>>>18),this.Ie(128|63&o>>>12),this.Ie(128|63&o>>>6),this.Ie(128|63&o)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}ve(e){const t=this.Ve(e),r=IE(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}De(e){const t=this.Ve(e),r=IE(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class CE{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class DE{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class Mp{constructor(){this.Me=new SA,this.Fe=new CE(this.Me),this.$e=new DE(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class Ml{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ml(this.indexId,this.documentKey,this.arrayValue,r)}}function rc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Ph(n.arrayValue,e.arrayValue),0!==t?t:(t=Ph(n.directionalValue,e.directionalValue),0!==t?t:He.comparator(n.documentKey,e.documentKey)))}function Ph(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Jv{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=_l(e);if(void 0!==t&&!this.Qe(t))return!1;const r=vl(e);let o=0,u=0;for(;o<r.length&&this.Qe(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Ke){const f=r[o];if(!this.je(this.Ke,f)||!this.We(this.Ue[u++],f))return!1;++o}for(;o<r.length;++o){const f=r[o];if(u>=this.Ue.length||!this.We(this.Ue[u++],f))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class TE{constructor(){this.ze=new Xv}addToCollectionParentIndex(e,t){return this.ze.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(qi.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(qi.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class Xv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new pn(Zt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new pn(Zt.comparator)).toArray()}}const Op=new Uint8Array(0);class AE{constructor(e,t){this.user=e,this.databaseId=t,this.He=new Xv,this.Je=new ou(r=>Ju(r),(r,o)=>vp(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const u={collectionId:r,parent:zi(o)};return SE(e).put(u)}return ne.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[pC(t),""],!1,!0);return SE(e).K(o).next(u=>{for(const f of u){if(f.collectionId!==t)break;r.push(uu(f.parent))}return r})}addFieldIndex(e,t){const r=e0(e),o={indexId:(f=t).indexId,collectionGroup:f.collectionGroup,fields:f.fields.map(y=>[y.fieldPath.canonicalString(),y.kind])};var f;delete o.indexId;const u=r.add(o);if(t.indexState){const f=hy(e);return u.next(y=>{f.put(qs(y,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=e0(e),o=hy(e),u=Rp(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Rp(e);let o=!0;const u=new Map;return ne.forEach(this.Ye(t),f=>this.Xe(e,f).next(y=>{o&&(o=!!y),u.set(f,y)})).next(()=>{if(o){let f=Dt();const y=[];return ne.forEach(u,(b,C)=>{var M;Pe("IndexedDbIndexManager",`Using index ${M=b,`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(St=>`${St.fieldPath}:${St.kind}`).join(",")}`} to execute ${Ju(t)}`);const R=function(St,bt){const jt=_l(bt);if(void 0===jt)return null;for(const hn of Um(St,jt.fieldPath))switch(hn.op){case"array-contains-any":return hn.value.arrayValue.values||[];case"array-contains":return[hn.value]}return null}(C,b),z=function(St,bt){const jt=new Map;for(const hn of vl(bt))for(const Qi of Um(St,hn.fieldPath))switch(Qi.op){case"==":case"in":jt.set(hn.fieldPath.canonicalString(),Qi.value);break;case"not-in":case"!=":return jt.set(hn.fieldPath.canonicalString(),Qi.value),Array.from(jt.values())}return null}(C,b),K=function(St,bt){const jt=[];let hn=!0;for(const Qi of vl(bt)){const F0=0===Qi.kind?Bm(St,Qi.fieldPath,St.startAt):jb(St,Qi.fieldPath,St.startAt);jt.push(F0.value),hn&&(hn=F0.inclusive)}return new Cl(jt,hn)}(C,b),he=function(St,bt){const jt=[];let hn=!0;for(const Qi of vl(bt)){const F0=0===Qi.kind?jb(St,Qi.fieldPath,St.endAt):Bm(St,Qi.fieldPath,St.endAt);jt.push(F0.value),hn&&(hn=F0.inclusive)}return new Cl(jt,hn)}(C,b),Fe=this.Ze(b,C,K),je=this.Ze(b,C,he),wt=this.tn(b,C,z),Ut=this.en(b.indexId,R,Fe,K.inclusive,je,he.inclusive,wt);return ne.forEach(Ut,St=>r.j(St,t.limit).next(bt=>{bt.forEach(jt=>{const hn=He.fromSegments(jt.documentKey);f.has(hn)||(f=f.add(hn),y.push(hn))})}))}).next(()=>y)}return ne.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,o,u,f,y){const b=(null!=t?t.length:1)*Math.max(r.length,u.length),C=b/(null!=t?t.length:1),M=[];for(let R=0;R<b;++R){const z=t?this.nn(t[R/C]):Op,K=this.sn(e,z,r[R%C],o),he=this.rn(e,z,u[R%C],f),Fe=y.map(je=>this.sn(e,z,je,!0));M.push(...this.createRange(K,he,Fe))}return M}sn(e,t,r,o){const u=new Ml(e,He.empty(),t,r);return o?u:u.Le()}rn(e,t,r,o){const u=new Ml(e,He.empty(),t,r);return o?u.Le():u}Xe(e,t){const r=new Jv(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let f=null;for(const y of u)r.Ge(y)&&(!f||y.fields.length>f.fields.length)&&(f=y);return f})}getIndexType(e,t){let r=2;return ne.forEach(this.Ye(t),o=>this.Xe(e,o).next(u=>{u?0!==r&&u.fields.length<function(f){let y=new pn(ir.comparator),b=!1;for(const C of f.filters){const M=C;M.field.isKeyField()||("array-contains"===M.op||"array-contains-any"===M.op?b=!0:y=y.add(M.field))}for(const C of f.orderBy)C.field.isKeyField()||(y=y.add(C.field));return y.size+(b?1:0)}(o)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new Mp;for(const o of vl(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const f=r.Be(o.kind);xl.ye.re(u,f)}return r.Oe()}nn(e){const t=new Mp;return xl.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const r=new Mp;return xl.ye.re(Eo(this.databaseId,t),r.Be(function(o){const u=vl(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Oe()}tn(e,t,r){if(null===r)return[];let o=[];o.push(new Mp);let u=0;for(const f of vl(e)){const y=r[u++];for(const b of o)if(this.cn(t,f.fieldPath)&&fa(y))o=this.an(o,f,y);else{const C=b.Be(f.kind);xl.ye.re(y,C)}}return this.hn(o)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Oe();return t}an(e,t,r){const o=[...e],u=[];for(const f of r.arrayValue.values||[])for(const y of o){const b=new Mp;b.seed(y.Oe()),xl.ye.re(f,b.Be(t.kind)),u.push(b)}return u}cn(e,t){return!!e.filters.find(r=>r instanceof ci&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=e0(e),o=hy(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(u=>{const f=[];return ne.forEach(u,y=>o.get([y.indexId,this.uid]).next(b=>{f.push(function(C,M){const R=M?new fp(M.sequenceNumber,new qi(nc(M.readTime),new He(uu(M.documentKey)),M.largestBatchId)):fp.empty(),z=C.fields.map(([K,he])=>new Pm(ir.fromServerFormat(K),he));return new hp(C.indexId,C.collectionGroup,z,R)}(y,b))})).next(()=>f)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Ot(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=e0(e),u=hy(e);return this.ln(e).next(f=>o.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(y=>ne.forEach(y,b=>u.put(qs(b.indexId,this.user,f,r)))))}updateIndexEntries(e,t){const r=new Map;return ne.forEach(t,(o,u)=>{const f=r.get(o.collectionGroup);return(f?ne.resolve(f):this.getFieldIndexes(e,o.collectionGroup)).next(y=>(r.set(o.collectionGroup,y),ne.forEach(y,b=>this.fn(e,o,b).next(C=>{const M=this.dn(u,b);return C.isEqual(M)?ne.resolve():this._n(e,u,b,C,M)}))))})}wn(e,t,r,o){return Rp(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,o){return Rp(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const o=Rp(e);let u=new pn(rc);return o.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(f,y)=>{u=u.add(new Ml(r.indexId,t,y.arrayValue,y.directionalValue))}).next(()=>u)}dn(e,t){let r=new pn(rc);const o=this.on(t,e);if(null==o)return r;const u=_l(t);if(null!=u){const f=e.data.field(u.fieldPath);if(fa(f))for(const y of f.arrayValue.values||[])r=r.add(new Ml(t.indexId,e.key,this.nn(y),o))}else r=r.add(new Ml(t.indexId,e.key,Op,o));return r}_n(e,t,r,o,u){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const f=[];return function(y,b,C,M,R){const z=y.getIterator(),K=b.getIterator();let he=ph(z),Fe=ph(K);for(;he||Fe;){let je=!1,wt=!1;if(he&&Fe){const Ut=C(he,Fe);Ut<0?wt=!0:Ut>0&&(je=!0)}else null!=he?wt=!0:je=!0;je?(M(Fe),Fe=ph(K)):wt?(R(he),he=ph(z)):(he=ph(z),Fe=ph(K))}}(o,u,rc,y=>{f.push(this.wn(e,t,r,y))},y=>{f.push(this.mn(e,t,r,y))}),ne.waitFor(f)}ln(e){let t=1;return hy(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((f,y)=>rc(f,y)).filter((f,y,b)=>!y||0!==rc(f,b[y-1]));const o=[];o.push(e);for(const f of r){const y=rc(f,e),b=rc(f,t);if(0===y)o[0]=e.Le();else if(y>0&&b<0)o.push(f),o.push(f.Le());else if(b>0)break}o.push(t);const u=[];for(let f=0;f<o.length;f+=2)u.push(IDBKeyRange.bound([o[f].indexId,this.uid,o[f].arrayValue,o[f].directionalValue,Op,[]],[o[f+1].indexId,this.uid,o[f+1].arrayValue,o[f+1].directionalValue,Op,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(t0)}getMinOffset(e,t){return ne.mapArray(this.Ye(t),r=>this.Xe(e,r).next(o=>o||rt())).next(t0)}}function SE(n){return Fr(n,"collectionParents")}function Rp(n){return Fr(n,"indexEntries")}function e0(n){return Fr(n,"indexConfiguration")}function hy(n){return Fr(n,"indexState")}function t0(n){_t(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;mv(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new qi(e.readTime,e.documentKey,t)}const xE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Wi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Wi(e,Wi.DEFAULT_COLLECTION_PERCENTILE,Wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ME(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],f=IDBKeyRange.only(t.batchId);let y=0;const b=r.J({range:f},(M,R,z)=>(y++,z.delete()));u.push(b.next(()=>{_t(1===y)}));const C=[];for(const M of t.mutations){const R=Tp(e,M.key.path,t.batchId);u.push(o.delete(R)),C.push(M.key)}return ne.waitFor(u).next(()=>C)}function n0(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt();e=n.noDocument}return JSON.stringify(e).length}Wi.DEFAULT_COLLECTION_PERCENTILE=10,Wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wi.DEFAULT=new Wi(41943040,Wi.DEFAULT_COLLECTION_PERCENTILE,Wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wi.DISABLED=new Wi(-1,0,0);class r0{constructor(e,t,r,o){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=o,this.gn={}}static se(e,t,r,o){_t(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new r0(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ol(e).J({index:"userMutationsIndex",range:r},(o,u,f)=>{t=!1,f.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Pp(e),f=Ol(e);return f.add({}).next(y=>{_t("number"==typeof y);const b=new Ap(y,t,r,o),C=function(z,K,he){const Fe=he.baseMutations.map(wt=>Ah(z.ne,wt)),je=he.mutations.map(wt=>Ah(z.ne,wt));return{userId:K,batchId:he.batchId,localWriteTimeMs:he.localWriteTime.toMillis(),baseMutations:Fe,mutations:je}}(this.wt,this.userId,b),M=[];let R=new pn((z,K)=>Ot(z.canonicalString(),K.canonicalString()));for(const z of o){const K=Tp(this.userId,z.key.path,y);R=R.add(z.key.path.popLast()),M.push(f.put(C)),M.push(u.put(K,CA))}return R.forEach(z=>{M.push(this.indexManager.addToCollectionParentIndex(e,z))}),e.addOnCommittedListener(()=>{this.gn[y]=b.keys()}),ne.waitFor(M).next(()=>b)})}lookupMutationBatch(e,t){return Ol(e).get(t).next(r=>r?(_t(r.userId===this.userId),Sl(this.wt,r)):null)}yn(e,t){return this.gn[t]?ne.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.gn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Ol(e).J({index:"userMutationsIndex",range:o},(f,y,b)=>{y.userId===this.userId&&(_t(y.batchId>=r),u=Sl(this.wt,y)),b.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ol(e).J({index:"userMutationsIndex",range:t,reverse:!0},(o,u,f)=>{r=u.batchId,f.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ol(e).K("userMutationsIndex",t).next(r=>r.map(o=>Sl(this.wt,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Gv(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Pp(e).J({range:o},(f,y,b)=>{const[C,M,R]=f,z=uu(M);if(C===this.userId&&t.path.isEqual(z))return Ol(e).get(R).next(K=>{if(!K)throw rt();_t(K.userId===this.userId),u.push(Sl(this.wt,K))});b.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pn(Ot);const o=[];return t.forEach(u=>{const f=Gv(this.userId,u.path),y=IDBKeyRange.lowerBound(f),b=Pp(e).J({range:y},(C,M,R)=>{const[z,K,he]=C,Fe=uu(K);z===this.userId&&u.path.isEqual(Fe)?r=r.add(he):R.done()});o.push(b)}),ne.waitFor(o).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Gv(this.userId,r),f=IDBKeyRange.lowerBound(u);let y=new pn(Ot);return Pp(e).J({range:f},(b,C,M)=>{const[R,z,K]=b,he=uu(z);R===this.userId&&r.isPrefixOf(he)?he.length===o&&(y=y.add(K)):M.done()}).next(()=>this.pn(e,y))}pn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Ol(e).get(u).next(f=>{if(null===f)throw rt();_t(f.userId===this.userId),r.push(Sl(this.wt,f))}))}),ne.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return ME(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),ne.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ne.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Pp(e).J({range:r},(u,f,y)=>{if(u[0]===this.userId){const b=uu(u[1]);o.push(b)}else y.done()}).next(()=>{_t(0===o.length)})})}containsKey(e,t){return zC(e,this.userId,t)}Tn(e){return OE(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function zC(n,e,t){const r=Gv(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let f=!1;return Pp(n).J({range:u,H:!0},(y,b,C)=>{const[M,R,z]=y;M===e&&R===o&&(f=!0),C.done()}).next(()=>f)}function Ol(n){return Fr(n,"mutations")}function Pp(n){return Fr(n,"documentMutations")}function OE(n){return Fr(n,"mutationQueues")}class ma{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new ma(0)}static Rn(){return new ma(-1)}}class WC{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new ma(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>vt.fromTimestamp(new Bn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Pn(e,o)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Nh(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(_t(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Nh(e).J((f,y)=>{const b=Rh(y);b.sequenceNumber<=t&&null===r.get(b.targetId)&&(o++,u.push(this.removeTargetData(e,b)))}).next(()=>ne.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Nh(e).J((r,o)=>{const u=Rh(o);t(u)})}bn(e){return s0(e).get("targetGlobalKey").next(t=>(_t(null!==t),t))}Pn(e,t){return s0(e).put("targetGlobalKey",t)}vn(e,t){return Nh(e).put(Kv(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ju(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Nh(e).J({range:o,index:"queryTargetsIndex"},(f,y,b)=>{const C=Rh(y);vp(t,C.target)&&(u=C,b.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Ki(e);return t.forEach(f=>{const y=zi(f.path);o.push(u.put({targetId:r,path:y})),o.push(this.referenceDelegate.addReference(e,r,f))}),ne.waitFor(o)}removeMatchingKeys(e,t,r){const o=Ki(e);return ne.forEach(t,u=>{const f=zi(u.path);return ne.waitFor([o.delete([r,f]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Ki(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Ki(e);let u=Dt();return o.J({range:r,H:!0},(f,y,b)=>{const C=uu(f[1]),M=new He(C);u=u.add(M)}).next(()=>u)}containsKey(e,t){const r=zi(t.path),o=IDBKeyRange.bound([r],[pC(r)],!1,!0);let u=0;return Ki(e).J({index:"documentTargetsIndex",H:!0,range:o},([f,y],b,C)=>{0!==f&&(u++,C.done())}).next(()=>u>0)}te(e,t){return Nh(e).get(t).next(r=>r?Rh(r):null)}}function Nh(n){return Fr(n,"targets")}function s0(n){return Fr(n,"targetGlobal")}function Ki(n){return Fr(n,"targetDocuments")}function o0([n,e],[t,r]){const o=Ot(n,t);return 0===o?Ot(e,r):o}class a0{constructor(e){this.Sn=e,this.buffer=new pn(o0),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();o0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class u0{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Pe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_e.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){ca(r)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield qu(r)}yield t.kn(3e5)}))}}class KC{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ne.resolve(ui.ot);const r=new a0(t);return this.On.forEachTarget(e,o=>r.xn(o.sequenceNumber)).next(()=>this.On.Fn(e,o=>r.xn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.On.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(xE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xE):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let r,o,u,f,y,b,C;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),o=this.params.maximumSequenceNumbersToCollect):o=R,f=Date.now(),this.nthSequenceNumber(e,o))).next(R=>(r=R,y=Date.now(),this.removeTargets(e,r,t))).next(R=>(u=R,b=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(C=Date.now(),Mm()<=rl.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${f-M}ms\n\tDetermined least recently used ${o} in `+(y-f)+`ms\n\tRemoved ${u} targets in `+(b-y)+`ms\n\tRemoved ${R} documents in `+(C-b)+`ms\nTotal Duration: ${C-M}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:R})))}}class c0{constructor(e,t){this.db=e,this.garbageCollector=new KC(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,o)=>t(o))}addReference(e,t,r){return kh(e,r)}removeReference(e,t,r){return kh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return kh(e,t)}Un(e,t){return function(r,o){let u=!1;return OE(r).Y(f=>zC(r,f,o).next(y=>(y&&(u=!0),ne.resolve(!y)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Ln(e,(f,y)=>{if(y<=t){const b=this.Un(e,f).next(C=>{if(!C)return u++,r.getEntry(e,f).next(()=>(r.removeEntry(f,vt.min()),Ki(e).delete([0,zi(f.path)])))});o.push(b)}}).next(()=>ne.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return kh(e,t)}Ln(e,t){const r=Ki(e);let o,u=ui.ot;return r.J({index:"documentTargetsIndex"},([f,y],{path:b,sequenceNumber:C})=>{0===f?(u!==ui.ot&&t(new He(uu(o)),u),u=C,o=b):u=ui.ot}).next(()=>{u!==ui.ot&&t(new He(uu(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function kh(n,e){return Ki(n).put((r=n.currentSequenceNumber,{targetId:0,path:zi(e.path),sequenceNumber:r}));var r}class l0{constructor(){this.changes=new ou(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class RE{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Fh(e).put(r)}removeEntry(e,t,r){return Fh(e).delete(function(o,u){const f=o.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],Oh(u),f[f.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=dn.newInvalidDocument(t);return Fh(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(fy(t))},(o,u)=>{r=this.Kn(t,u)}).next(()=>r)}Gn(e,t){let r={size:0,document:dn.newInvalidDocument(t)};return Fh(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(fy(t))},(o,u)=>{r={document:this.Kn(t,u),size:n0(u)}}).next(()=>r)}getEntries(e,t){let r=vi();return this.Qn(e,t,(o,u)=>{const f=this.Kn(o,u);r=r.insert(o,f)}).next(()=>r)}jn(e,t){let r=vi(),o=new Yn(He.comparator);return this.Qn(e,t,(u,f)=>{const y=this.Kn(u,f);r=r.insert(u,y),o=o.insert(u,n0(f))}).next(()=>({documents:r,Wn:o}))}Qn(e,t,r){if(t.isEmpty())return ne.resolve();let o=new pn(XC);t.forEach(b=>o=o.add(b));const u=IDBKeyRange.bound(fy(o.first()),fy(o.last())),f=o.getIterator();let y=f.getNext();return Fh(e).J({index:"documentKeyIndex",range:u},(b,C,M)=>{const R=He.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;y&&XC(y,R)<0;)r(y,null),y=f.getNext();y&&y.isEqual(R)&&(r(y,C),y=f.hasNext()?f.getNext():null),y?M.q(fy(y)):M.done()}).next(()=>{for(;y;)r(y,null),y=f.hasNext()?f.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Oh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fh(e).K(IDBKeyRange.bound(o,u,!0)).next(f=>{let y=vi();for(const b of f){const C=this.Kn(He.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);y=y.insert(C.key,C)}return y})}getAllFromCollectionGroup(e,t,r,o){let u=vi();const f=JC(t,r),y=JC(t,qi.max());return Fh(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(f,y,!0)},(b,C,M)=>{const R=this.Kn(He.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(R.key,R),u.size===o&&M.done()}).next(()=>u)}newChangeBuffer(e){return new xA(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return QC(e).get("remoteDocumentGlobalKey").next(t=>(_t(!!t),t))}qn(e,t){return QC(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function HC(n,e){let t;if(e.document)t=$v(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=He.fromSegments(e.noDocument.path),o=nc(e.noDocument.readTime);t=dn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt();{const r=He.fromSegments(e.unknownDocument.path),o=nc(e.unknownDocument.version);t=dn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Bn(r[0],r[1]);return vt.fromTimestamp(o)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(vt.min()))return r}return dn.newInvalidDocument(e)}}function YC(n){return new RE(n)}class xA extends l0{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new ou(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new pn((u,f)=>Ot(u.canonicalString(),f.canonicalString()));return this.changes.forEach((u,f)=>{const y=this.Hn.get(u);if(t.push(this.zn.removeEntry(e,u,y.readTime)),f.isValidDocument()){const b=wE(this.zn.wt,f);o=o.add(u.path.popLast()),r+=n0(b)-y.size,t.push(this.zn.addEntry(e,u,b))}else if(r-=y.size,this.trackRemovals){const b=wE(this.zn.wt,f.convertToNoDocument(vt.min()));t.push(this.zn.addEntry(e,u,b))}}),o.forEach(u=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.zn.updateMetadata(e,r)),ne.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:o})=>(o.forEach((u,f)=>{this.Hn.set(u,{size:f,readTime:r.get(u).readTime})}),r))}}function QC(n){return Fr(n,"remoteDocumentGlobal")}function Fh(n){return Fr(n,"remoteDocumentsV14")}function fy(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function JC(n,e){const t=e.documentKey.path.toArray();return[n,Oh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function XC(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Ot(t[u],r[u]),o)return o;return o=Ot(t.length,r.length),o||(o=Ot(t[t.length-2],r[r.length-2]),o||Ot(t[t.length-1],r[r.length-1]))}class PE{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class NE{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&Ch(r.mutation,o,gs.empty(),Bn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Dt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Dt()){const o=Do();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let f=Ip();return u.forEach((y,b)=>{f=f.insert(y,b.overlayedDocument)}),f}))}getOverlayedDocuments(e,t){const r=Do();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Dt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((f,y)=>{t.set(f,y)})})}computeViews(e,t,r,o){let u=vi();const f=Dh(),y=Dh();return t.forEach((b,C)=>{const M=r.get(C.key);o.has(C.key)&&(void 0===M||M.mutation instanceof Co)?u=u.insert(C.key,C):void 0!==M&&(f.set(C.key,M.mutation.getFieldMask()),Ch(M.mutation,C,M.mutation.getFieldMask(),Bn.now()))}),this.recalculateAndSaveOverlays(e,u).next(b=>(b.forEach((C,M)=>f.set(C,M)),t.forEach((C,M)=>{var R;return y.set(C,new PE(M,null!==(R=f.get(C))&&void 0!==R?R:null))}),y))}recalculateAndSaveOverlays(e,t){const r=Dh();let o=new Yn((f,y)=>f-y),u=Dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(f=>{for(const y of f)y.keys().forEach(b=>{const C=t.get(b);if(null===C)return;let M=r.get(b)||gs.empty();M=y.applyToLocalView(C,M),r.set(b,M);const R=(o.get(y.batchId)||Dt()).add(b);o=o.insert(y.batchId,R)})}).next(()=>{const f=[],y=o.getReverseIterator();for(;y.hasNext();){const b=y.getNext(),C=b.key,M=b.value,R=Qb();M.forEach(z=>{if(!u.has(z)){const K=Nv(t.get(z),r.get(z));null!==K&&R.set(z,K),u=u.add(z)}}),f.push(this.documentOverlayCache.saveOverlays(e,C,R))}return ne.waitFor(f)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return He.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Mv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):ne.resolve(Do());let y=-1,b=u;return f.next(C=>ne.forEach(C,(M,R)=>(y<R.largestBatchId&&(y=R.largestBatchId),u.get(M)?ne.resolve():this.getBaseDocument(e,M,R).next(z=>{b=b.insert(M,z)}))).next(()=>this.populateOverlays(e,C,u)).next(()=>this.computeViews(e,b,C,Dt())).next(M=>({batchId:y,changes:Bv(M)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new He(t)).next(r=>{let o=Ip();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=Ip();return this.indexManager.getCollectionParents(e,o).next(f=>ne.forEach(f,y=>{const b=(C=t,M=y.child(o),new ru(M,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,M;return this.getDocumentsMatchingCollectionQuery(e,b,r).next(C=>{C.forEach((M,R)=>{u=u.insert(M,R)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((y,b)=>{const C=b.getKey();null===o.get(C)&&(o=o.insert(C,dn.newInvalidDocument(C)))});let f=Ip();return o.forEach((y,b)=>{const C=u.get(y);void 0!==C&&Ch(C.mutation,b,gs.empty(),Bn.now()),Zm(t,b)&&(f=f.insert(y,b))}),f})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ne.resolve(dn.newInvalidDocument(t))}}class eD{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return ne.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:kr(r.createTime)}),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:Yv(r.bundledQuery),readTime:kr(r.readTime)}),ne.resolve();var r}}class tD{constructor(){this.overlays=new Yn(He.comparator),this.Xn=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Do();return ne.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ie(e,t,u)}),ne.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Xn.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Xn.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const o=Do(),u=t.length+1,f=new He(t.child("")),y=this.overlays.getIteratorFrom(f);for(;y.hasNext();){const b=y.getNext().value,C=b.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&b.largestBatchId>r&&o.set(b.getKey(),b)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Yn((C,M)=>C-M);const f=this.overlays.getIterator();for(;f.hasNext();){const C=f.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let M=u.get(C.largestBatchId);null===M&&(M=Do(),u=u.insert(C.largestBatchId,M)),M.set(C.getKey(),C)}}const y=Do(),b=u.getIterator();for(;b.hasNext()&&(b.getNext().value.forEach((C,M)=>y.set(C,M)),!(y.size()>=o)););return ne.resolve(y)}ie(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const f=this.Xn.get(o.largestBatchId).delete(r.key);this.Xn.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new bi(t,r));let u=this.Xn.get(t);void 0===u&&(u=Dt(),this.Xn.set(t,u)),this.Xn.set(t,u.add(r.key))}}class d0{constructor(){this.Zn=new pn(Ir.ts),this.es=new pn(Ir.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new Ir(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new Ir(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new He(new Zt([])),r=new Ir(t,e),o=new Ir(t,e+1),u=[];return this.es.forEachInRange([r,o],f=>{this.rs(f),u.push(f.key)}),u}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new He(new Zt([])),r=new Ir(t,e),o=new Ir(t,e+1);let u=Dt();return this.es.forEachInRange([r,o],f=>{u=u.add(f.key)}),u}containsKey(e){const t=new Ir(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ir{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return He.comparator(e.key,t.key)||Ot(e.ls,t.ls)}static ns(e,t){return Ot(e.ls,t.ls)||He.comparator(e.key,t.key)}}class kE{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new pn(Ir.ts)}checkEmpty(e){return ne.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.fs;this.fs++;const f=new Ap(u,t,r,o);this.mutationQueue.push(f);for(const y of o)this.ds=this.ds.add(new Ir(y.key,u)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return ne.resolve(f)}lookupMutationBatch(e,t){return ne.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ws(t+1),u=o<0?0:o;return ne.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ir(t,0),o=new Ir(t,Number.POSITIVE_INFINITY),u=[];return this.ds.forEachInRange([r,o],f=>{const y=this._s(f.ls);u.push(y)}),ne.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pn(Ot);return t.forEach(o=>{const u=new Ir(o,0),f=new Ir(o,Number.POSITIVE_INFINITY);this.ds.forEachInRange([u,f],y=>{r=r.add(y.ls)})}),ne.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;He.isDocumentKey(u)||(u=u.child(""));const f=new Ir(new He(u),0);let y=new pn(Ot);return this.ds.forEachWhile(b=>{const C=b.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(y=y.add(b.ls)),!0)},f),ne.resolve(this.gs(y))}gs(e){const t=[];return e.forEach(r=>{const o=this._s(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){_t(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return ne.forEach(t.mutations,o=>{const u=new Ir(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new Ir(t,0),o=this.ds.firstAfterOrEqual(r);return ne.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return ne.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class FE{constructor(e){this.ps=e,this.docs=new Yn(He.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,f=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let r=vi();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():dn.newInvalidDocument(o))}),ne.resolve(r)}getAllFromCollection(e,t,r){let o=vi();const u=new He(t.child("")),f=this.docs.getIteratorFrom(u);for(;f.hasNext();){const{key:y,value:{document:b}}=f.getNext();if(!t.isPrefixOf(y.path))break;y.path.length>t.length+1||mv(Ab(b),r)<=0||(o=o.insert(b.key,b.mutableCopy()))}return ne.resolve(o)}getAllFromCollectionGroup(e,t,r,o){rt()}Is(e,t){return ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new nD(this)}getSize(e){return ne.resolve(this.size)}}class nD extends l0{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.zn.addEntry(e,o)):this.zn.removeEntry(r)}),ne.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class rD{constructor(e){this.persistence=e,this.Ts=new ou(t=>Ju(t),vp),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.Es=0,this.As=new d0,this.targetCount=0,this.Rs=ma.An()}forEachTarget(e,t){return this.Ts.forEach((r,o)=>t(o)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),ne.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new ma(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.vn(t),ne.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Ts.forEach((f,y)=>{y.sequenceNumber<=t&&null===r.get(y.targetId)&&(this.Ts.delete(f),u.push(this.removeMatchingKeysForTargetId(e,y.targetId)),o++)}),ne.waitFor(u).next(()=>o)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(f=>{u.push(o.markPotentiallyOrphaned(e,f))}),ne.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.As.containsKey(t))}}class h0{constructor(e,t){this.bs={},this.overlays={},this.Ps=new ui(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new rD(this),this.indexManager=new TE,this.remoteDocumentCache=new FE(r=>this.referenceDelegate.Ss(r)),this.wt=new ly(t),this.Ds=new eD(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new kE(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const o=new py(this.Ps.next());return this.referenceDelegate.Cs(),r(o).next(u=>this.referenceDelegate.xs(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ns(e,t){return ne.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class py extends wl{constructor(e){super(),this.currentSequenceNumber=e}}class f0{constructor(e){this.persistence=e,this.ks=new d0,this.Os=null}static Ms(e){return new f0(e)}get Fs(){if(this.Os)return this.Os;throw rt()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),ne.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(o=>this.Fs.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Fs.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.Fs,r=>{const o=He.fromPath(r);return this.$s(e,o).next(u=>{u||t.removeEntry(o,vt.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return ne.or([()=>ne.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class LE{constructor(e){this.wt=e}O(e,t,r,o){const u=new pp("createOrUpgrade",t);var y;r<1&&o>=1&&(e.createObjectStore("owner"),(y=e).createObjectStore("mutationQueues",{keyPath:"userId"}),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",UC,{unique:!0}),y.createObjectStore("documentMutations"),Np(e),function(y){y.createObjectStore("remoteDocuments")}(e));let f=ne.resolve();return r<3&&o>=3&&(0!==r&&(function(y){y.deleteObjectStore("targetDocuments"),y.deleteObjectStore("targets"),y.deleteObjectStore("targetGlobal")}(e),Np(e)),f=f.next(()=>function(y){const b=y.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return b.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(f=f.next(()=>function(y,b){return b.store("mutations").K().next(C=>{y.deleteObjectStore("mutations"),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",UC,{unique:!0});const M=b.store("mutations"),R=C.map(z=>M.put(z));return ne.waitFor(R)})}(e,u))),f=f.next(()=>{!function(y){y.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(f=f.next(()=>this.Bs(u))),r<6&&o>=6&&(f=f.next(()=>(function(y){y.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(u)))),r<7&&o>=7&&(f=f.next(()=>this.Us(u))),r<8&&o>=8&&(f=f.next(()=>this.qs(e,u))),r<9&&o>=9&&(f=f.next(()=>{!function(y){y.objectStoreNames.contains("remoteDocumentChanges")&&y.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(f=f.next(()=>this.Ks(u))),r<11&&o>=11&&(f=f.next(()=>{(function(y){y.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(y){y.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(f=f.next(()=>{!function(y){const b=y.createObjectStore("documentOverlays",{keyPath:uy});b.createIndex("collectionPathOverlayIndex",yE,{unique:!1}),b.createIndex("collectionGroupOverlayIndex",TA,{unique:!1})}(e)})),r<13&&o>=13&&(f=f.next(()=>function(y){const b=y.createObjectStore("remoteDocumentsV14",{keyPath:qv});b.createIndex("documentKeyIndex",Mh),b.createIndex("collectionGroupIndex",hE)}(e)).next(()=>this.Gs(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(f=f.next(()=>this.Qs(e,u))),r<15&&o>=15&&(f=f.next(()=>function(y){y.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),y.createObjectStore("indexState",{keyPath:pE}).createIndex("sequenceNumberIndex",gE,{unique:!1}),y.createObjectStore("indexEntries",{keyPath:DA}).createIndex("documentKeyIndex",mE,{unique:!1})}(e))),f}Ls(e){let t=0;return e.store("remoteDocuments").J((r,o)=>{t+=n0(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(o=>ne.forEach(o,u=>{const f=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",f).next(y=>ne.forEach(y,b=>{_t(b.userId===u.userId);const C=Sl(this.wt,b);return ME(e,u.userId,C).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.J((f,y)=>{const b=new Zt(f),C=[0,zi(b)];u.push(t.get(C).next(M=>M?ne.resolve():t.put({targetId:0,path:zi(b),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>ne.waitFor(u))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:fE});const r=t.store("collectionParents"),o=new Xv,u=f=>{if(o.add(f)){const y=f.lastSegment(),b=f.popLast();return r.put({collectionId:y,parent:zi(b)})}};return t.store("remoteDocuments").J({H:!0},(f,y)=>{const b=new Zt(f);return u(b.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([f,y,b],C)=>{const M=uu(y);return u(M.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,o)=>{const u=Rh(o),f=Kv(this.wt,u);return t.put(f)})}Gs(e,t){const r=t.store("remoteDocuments"),o=[];return r.J((u,f)=>{const y=t.store("remoteDocumentsV14"),b=(C=f,C.document?new He(Zt.fromString(C.document.name).popFirst(5)):C.noDocument?He.fromSegments(C.noDocument.path):C.unknownDocument?He.fromSegments(C.unknownDocument.path):rt()).path.toArray();var C;const M={prefixPath:b.slice(0,b.length-2),collectionGroup:b[b.length-2],documentId:b[b.length-1],readTime:f.readTime||[0,0],unknownDocument:f.unknownDocument,noDocument:f.noDocument,document:f.document,hasCommittedMutations:!!f.hasCommittedMutations};o.push(y.put(M))}).next(()=>ne.waitFor(o))}Qs(e,t){const r=t.store("mutations"),o=YC(this.wt),u=new h0(f0.Ms,this.wt.ne);return r.K().next(f=>{const y=new Map;return f.forEach(b=>{var C;let M=null!==(C=y.get(b.userId))&&void 0!==C?C:Dt();Sl(this.wt,b).keys().forEach(R=>M=M.add(R)),y.set(b.userId,M)}),ne.forEach(y,(b,C)=>{const M=new Pr(C),R=Sp.se(this.wt,M),z=u.getIndexManager(M),K=r0.se(M,this.wt,z,u.referenceDelegate);return new NE(o,K,R,z).recalculateAndSaveOverlaysForDocumentKeys(new vE(t,ui.ot),b).next()})})}}function Np(n){n.createObjectStore("targetDocuments",{keyPath:jC}).createIndex("documentTargetsIndex",zv,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",BC,{unique:!0}),n.createObjectStore("targetGlobal")}const p0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class g0{constructor(e,t,r,o,u,f,y,b,C,M,R=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=u,this.window=f,this.document=y,this.Ws=C,this.zs=M,this.Hs=R,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=z=>Promise.resolve(),!g0.V())throw new Te(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new c0(this,o),this.ei=t+"main",this.wt=new ly(b),this.ni=new bo(this.ei,this.Hs,new LE(this.wt)),this.Vs=new WC(this.referenceDelegate,this.wt),this.remoteDocumentCache=YC(this.wt),this.Ds=new GC,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===M&&gr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Te(ae.FAILED_PRECONDITION,p0);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new ui(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,_e.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(ca(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return kp(e).get("owner").next(t=>ne.resolve(this.di(t)))}_i(e){return gy(e).delete(this.clientId)}wi(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Fr(r,"clientMetadata");return o.K().next(u=>{const f=e.gi(u,18e5),y=u.filter(b=>-1===f.indexOf(b));return ne.forEach(y,b=>o.delete(b.clientId)).next(()=>y)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?ne.resolve(!0):kp(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Te(ae.FAILED_PRECONDITION,p0);return!1}}return!(!this.networkEnabled||!this.inForeground)||gy(e).K().next(r=>void 0===this.gi(r,5e3).find(o=>{if(this.clientId!==o.clientId){const f=!this.inForeground&&o.inForeground,y=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||f&&y)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new vE(t,ui.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>gy(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return r0.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new AE(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return Sp.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(f=this.Hs)?ZC:14===f?cy:13===f?_E:12===f?AA:11===f?$C:void rt();var f;let y;return this.ni.runTransaction(e,o,u,b=>(y=new vE(b,this.Ps?this.Ps.next():ui.ot),"readwrite-primary"===t?this.ai(y).next(C=>!!C||this.hi(y)).next(C=>{if(!C)throw gr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Te(ae.FAILED_PRECONDITION,Sb);return r(y)}).next(C=>this.fi(y).next(()=>C)):this.bi(y).next(()=>r(y)))).then(b=>(y.raiseOnCommittedEvent(),b))}bi(e){return kp(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Te(ae.FAILED_PRECONDITION,p0)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kp(e).put("owner",t)}static V(){return bo.V()}li(e){const t=kp(e);return t.get("owner").next(r=>this.di(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ne.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(gr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,Vt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return gr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){gr("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(e){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function kp(n){return Fr(n,"owner")}function gy(n){return Fr(n,"clientMetadata")}function VE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class m0{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=o}static Vi(e,t){let r=Dt(),o=Dt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new m0(e,t.fromCache,r,o)}}class UE{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Ci(e,t).next(u=>u||this.xi(e,t,o,r)).next(u=>u||this.Ni(e,t))}Ci(e,t){return ne.resolve(null)}xi(e,t,r,o){return function CC(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||o.isEqual(vt.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(u=>{const f=this.ki(t,u);return this.Oi(t,f,r,o)?this.Ni(e,t):(Mm()<=rl.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),$m(t)),this.Mi(e,f,t,Tb(o,-1)))})}ki(e,t){let r=new pn(Pv(e));return t.forEach((o,u)=>{Zm(e,u)&&(r=r.add(u))}),r}Oi(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ni(e,t){return Mm()<=rl.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",$m(t)),this.Di.getDocumentsMatchingQuery(e,t,qi.min())}Mi(e,t,r,o){return this.Di.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(f=>{u=u.insert(f.key,f)}),u))}}class iD{constructor(e,t,r,o){this.persistence=e,this.Fi=t,this.wt=o,this.$i=new Yn(Ot),this.Bi=new ou(u=>Ju(u),vp),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NE(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function BE(n,e,t,r){return new iD(n,e,t,r)}function jE(n,e){return y0.apply(this,arguments)}function y0(){return y0=(0,_e.Z)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const f=[],y=[];let b=Dt();for(const C of o){f.push(C.batchId);for(const M of C.mutations)b=b.add(M.key)}for(const C of u){y.push(C.batchId);for(const M of C.mutations)b=b.add(M.key)}return t.localDocuments.getDocuments(r,b).next(C=>({Ki:C,removedBatchIds:f,addedBatchIds:y}))})})}),y0.apply(this,arguments)}function sD(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Ui.newChangeBuffer({trackRemovals:!0});return function(f,y,b,C){const M=b.batch,R=M.keys();let z=ne.resolve();return R.forEach(K=>{z=z.next(()=>C.getEntry(y,K)).next(he=>{const Fe=b.docVersions.get(K);_t(null!==Fe),he.version.compareTo(Fe)<0&&(M.applyToRemoteDocument(he,b),he.isValidDocument()&&(he.setReadTime(b.commitVersion),C.addEntry(he)))})}),z.next(()=>f.mutationQueue.removeMutationBatch(y,M))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(f){let y=Dt();for(let b=0;b<f.mutationResults.length;++b)f.mutationResults[b].transformResults.length>0&&(y=y.add(f.batch.mutations[b].key));return y}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function $E(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function MA(n,e){const t=Ge(n),r=e.snapshotVersion;let o=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=t.Ui.newChangeBuffer({trackRemovals:!0});o=t.$i;const y=[];e.targetChanges.forEach((M,R)=>{const z=o.get(R);if(!z)return;y.push(t.Vs.removeMatchingKeys(u,M.removedDocuments,R).next(()=>t.Vs.addMatchingKeys(u,M.addedDocuments,R)));let K=z.withSequenceNumber(u.currentSequenceNumber);var he,Fe,je;e.targetMismatches.has(R)?K=K.withResumeToken(mr.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):M.resumeToken.approximateByteSize()>0&&(K=K.withResumeToken(M.resumeToken,r)),o=o.insert(R,K),Fe=K,je=M,(0===(he=z).resumeToken.approximateByteSize()||Fe.snapshotVersion.toMicroseconds()-he.snapshotVersion.toMicroseconds()>=3e8||je.addedDocuments.size+je.modifiedDocuments.size+je.removedDocuments.size>0)&&y.push(t.Vs.updateTargetData(u,K))});let b=vi(),C=Dt();if(e.documentUpdates.forEach(M=>{e.resolvedLimboDocuments.has(M)&&y.push(t.persistence.referenceDelegate.updateLimboDocument(u,M))}),y.push(oD(u,f,e.documentUpdates).next(M=>{b=M.Gi,C=M.Qi})),!r.isEqual(vt.min())){const M=t.Vs.getLastRemoteSnapshotVersion(u).next(R=>t.Vs.setTargetsMetadata(u,u.currentSequenceNumber,r));y.push(M)}return ne.waitFor(y).next(()=>f.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,b,C)).next(()=>b)}).then(u=>(t.$i=o,u))}function oD(n,e,t){let r=Dt(),o=Dt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let f=vi();return t.forEach((y,b)=>{const C=u.get(y);b.isFoundDocument()!==C.isFoundDocument()&&(o=o.add(y)),b.isNoDocument()&&b.version.isEqual(vt.min())?(e.removeEntry(y,b.readTime),f=f.insert(y,b)):!C.isValidDocument()||b.version.compareTo(C.version)>0||0===b.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(b),f=f.insert(y,b)):Pe("LocalStore","Ignoring outdated watch update for ",y,". Current version:",C.version," Watch version:",b.version)}),{Gi:f,Qi:o}})}function OA(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Fp(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Vs.getTargetData(r,e).next(u=>u?(o=u,ne.resolve(o)):t.Vs.allocateTargetId(r).next(f=>(o=new ec(e,f,0,r.currentSequenceNumber),t.Vs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.$i.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function Lp(n,e,t){return _0.apply(this,arguments)}function _0(){return _0=(0,_e.Z)(function*(n,e,t){const r=Ge(n),o=r.$i.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,f=>r.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!ca(f))throw f;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}r.$i=r.$i.remove(e),r.Bi.delete(o.target)}),_0.apply(this,arguments)}function v0(n,e,t){const r=Ge(n);let o=vt.min(),u=Dt();return r.persistence.runTransaction("Execute query","readonly",f=>function(y,b,C){const M=Ge(y),R=M.Bi.get(C);return void 0!==R?ne.resolve(M.$i.get(R)):M.Vs.getTargetData(b,C)}(r,f,Gs(e)).next(y=>{if(y)return o=y.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(f,y.targetId).next(b=>{u=b})}).next(()=>r.Fi.getDocumentsMatchingQuery(f,e,t?o:vt.min(),t?u:Dt())).next(y=>(cD(r,Rv(e),y),{documents:y,ji:u})))}function aD(n,e){const t=Ge(n),r=Ge(t.Vs),o=t.$i.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.te(u,e).next(f=>f?f.target:null))}function uD(n,e){const t=Ge(n),r=t.Li.get(e)||vt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Ui.getAllFromCollectionGroup(o,e,Tb(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(cD(t,e,o),o))}function cD(n,e,t){let r=vt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Li.set(e,r)}function s(){return s=(0,_e.Z)(function*(n,e,t,r){const o=Ge(n);let u=Dt(),f=vi();for(const C of t){const M=e.Wi(C.metadata.name);C.document&&(u=u.add(M));const R=e.zi(C);R.setReadTime(e.Hi(C.metadata.readTime)),f=f.insert(M,R)}const y=o.Ui.newChangeBuffer({trackRemovals:!0}),b=yield Fp(o,(C=r,Gs(wh(Zt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>oD(C,y,f).next(M=>(y.apply(C),M)).next(M=>o.Vs.removeMatchingKeysForTargetId(C,b.targetId).next(()=>o.Vs.addMatchingKeys(C,u,b.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(C,M.Gi,M.Qi)).next(()=>M.Gi)))}),s.apply(this,arguments)}function a(n,e){return c.apply(this,arguments)}function c(){return c=(0,_e.Z)(function*(n,e,t=Dt()){const r=yield Fp(n,Gs(Yv(e.bundledQuery))),o=Ge(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const f=kr(e.readTime);if(r.snapshotVersion.compareTo(f)>=0)return o.Ds.saveNamedQuery(u,e);const y=r.withResumeToken(mr.EMPTY_BYTE_STRING,f);return o.$i=o.$i.insert(y.targetId,y),o.Vs.updateTargetData(u,y).next(()=>o.Vs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Vs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ds.saveNamedQuery(u,e))})}),c.apply(this,arguments)}function d(n,e){return`firestore_clients_${n}_${e}`}function g(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function _(n,e){return`firestore_targets_${n}_${e}`}class w{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Ji(e,t,r){const o=JSON.parse(r);let u,f="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return f&&o.error&&(f="string"==typeof o.error.message&&"string"==typeof o.error.code,f&&(u=new Te(o.error.code,o.error.message))),f?new w(e,t,o.state,u):(gr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class E{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Te(r.error.code,r.error.message))),u?new E(e,r.state,o):(gr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class A{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Jm();for(let f=0;o&&f<r.activeTargetIds.length;++f)o=kb(r.activeTargetIds[f]),u=u.add(r.activeTargetIds[f]);return o?new A(e,u):(gr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class x{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new x(t.clientId,t.onlineState):(gr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class k{constructor(){this.activeTargetIds=Jm()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class j{constructor(e,t,r,o,u){this.window=e,this.js=t,this.persistenceKey=r,this.tr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Yn(Ot),this.started=!1,this.ir=[];const f=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.rr=d(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new k),this.cr=new RegExp(`^firestore_clients_${f}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${f}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${f}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(y){return`firestore_bundle_loaded_v2_${y}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.Ri();for(const o of t){if(o===e.tr)continue;const u=e.getItem(d(e.persistenceKey,o));if(u){const f=A.Ji(o,u);f&&(e.sr=e.sr.insert(f.clientId,f))}}e._r();const r=e.storage.getItem(e.lr);if(r){const o=e.wr(r);o&&e.mr(o)}for(const o of e.ir)e.nr(o);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(_(this.persistenceKey,e));if(r){const o=E.Ji(e,r);o&&(t=o.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.pr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void gr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const o=t.Rr(r.key);return t.br(o,null)}{const o=t.Pr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const o=t.vr(r.key,r.newValue);if(o)return t.Vr(o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.Sr(r.key,r.newValue);if(o)return t.Dr(o)}}else if(r.key===t.lr){if(null!==r.newValue){const o=t.wr(r.newValue);if(o)return t.mr(o)}}else if(r.key===t.ur){const o=function(u){let f=ui.ot;if(null!=u)try{const y=JSON.parse(u);_t("number"==typeof y),f=y}catch(y){gr("SharedClientState","Failed to read sequence number from WebStorage",y)}return f}(r.newValue);o!==ui.ot&&t.sequenceNumberHandler(o)}else if(r.key===t.dr){const o=t.Cr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Nr(u)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const o=new w(this.currentUser,e,t,r),u=g(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Yi())}pr(e){const t=g(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const o=_(this.persistenceKey,e),u=new E(e,t,r);this.setItem(o,u.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return A.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),o=Number(r[1]);return w.Ji(new Pr(void 0!==r[2]?r[2]:null),o,t)}Sr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return E.Ji(o,t)}wr(e){return x.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),o=this.gr(this.sr),u=this.gr(r),f=[],y=[];return u.forEach(b=>{o.has(b)||f.push(b)}),o.forEach(b=>{u.has(b)||y.push(b)}),this.syncEngine.Mr(f,y).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Jm();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class Y{constructor(){this.Fr=new k,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new k,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class me{Br(e){}shutdown(){}}class ke{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Ze={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Xe{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class be extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,o,u){const f=this.oo(e,t);Pe("RestConnection","Sending: ",f,r);const y={};return this.uo(y,o,u),this.co(e,f,y,r).then(b=>(Pe("RestConnection","Received: ",b),b),b=>{throw cp("RestConnection",`${e} failed with error: `,b,"url: ",f,"request:",r),b})}ao(e,t,r,o,u,f){return this.ro(e,t,r,o,u)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ml,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}oo(e,t){return`${this.so}/v1/${t}:${Ze[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,o){return new Promise((u,f)=>{const y=new bb;y.listenOnce(aC.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case hh.NO_ERROR:const C=y.getResponseJson();Pe("Connection","XHR received:",JSON.stringify(C)),u(C);break;case hh.TIMEOUT:Pe("Connection",'RPC "'+e+'" timed out'),f(new Te(ae.DEADLINE_EXCEEDED,"Request time out"));break;case hh.HTTP_ERROR:const M=y.getStatus();if(Pe("Connection",'RPC "'+e+'" failed with status:',M,"response text:",y.getResponseText()),M>0){const R=y.getResponseJson().error;if(R&&R.status&&R.message){const z=function(K){const he=K.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(he)>=0?he:ae.UNKNOWN}(R.status);f(new Te(z,R.message))}else f(new Te(ae.UNKNOWN,"Server responded with status "+y.getStatus()))}else f(new Te(ae.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{Pe("Connection",'RPC "'+e+'" completed.')}});const b=JSON.stringify(o);y.send(t,"POST",b,r,15)})}ho(e,t,r){const o=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=sC(),f=oC(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(y.xmlHttpFactory=new Kn({})),this.uo(y.initMessageHeaders,t,r),(0,Vt.uI)()||(0,Vt.b$)()||(0,Vt.d)()||(0,Vt.w1)()||(0,Vt.Mn)()||(0,Vt.ru)()||(y.httpHeadersOverwriteParam="$httpHeaders");const b=o.join("");Pe("Connection","Creating WebChannel: "+b,y);const C=u.createWebChannel(b,y);let M=!1,R=!1;const z=new Xe({jr:he=>{R?Pe("Connection","Not sending because WebChannel is closed:",he):(M||(Pe("Connection","Opening WebChannel transport."),C.open(),M=!0),Pe("Connection","WebChannel sending:",he),C.send(he))},Wr:()=>C.close()}),K=(he,Fe,je)=>{he.listen(Fe,wt=>{try{je(wt)}catch(Ut){setTimeout(()=>{throw Ut},0)}})};return K(C,fv.EventType.OPEN,()=>{R||Pe("Connection","WebChannel transport opened.")}),K(C,fv.EventType.CLOSE,()=>{R||(R=!0,Pe("Connection","WebChannel transport closed"),z.eo())}),K(C,fv.EventType.ERROR,he=>{R||(R=!0,cp("Connection","WebChannel transport errored:",he),z.eo(new Te(ae.UNAVAILABLE,"The operation could not be completed")))}),K(C,fv.EventType.MESSAGE,he=>{var Fe;if(!R){const je=he.data[0];_t(!!je);const wt=je,Ut=wt.error||(null===(Fe=wt[0])||void 0===Fe?void 0:Fe.error);if(Ut){Pe("Connection","WebChannel received error:",Ut);const St=Ut.status;let bt=function(hn){const Qi=yr[hn];if(void 0!==Qi)return Qm(Qi)}(St),jt=Ut.message;void 0===bt&&(bt=ae.INTERNAL,jt="Unknown error status: "+St+" with message "+Ut.message),R=!0,z.eo(new Te(bt,jt)),C.close()}else Pe("Connection","WebChannel received:",je),z.no(je)}}),K(f,xm.STAT_EVENT,he=>{he.stat===up.PROXY?Pe("Connection","Detected buffering proxy"):he.stat===up.NOPROXY&&Pe("Connection","Detected no buffering proxy")}),setTimeout(()=>{z.Zr()},0),z}}function ct(){return"undefined"!=typeof window?window:null}function kt(){return"undefined"!=typeof document?document:null}function Kt(n){return new ry(n,!0)}class Ei{constructor(e,t,r=1e3,o=1.5,u=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=o,this._o=u,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),o=Math.max(0,t-r);o>0&&Pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,o,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class ic{constructor(e,t,r,o,u,f,y,b){this.js=e,this.Ao=r,this.Ro=o,this.bo=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=y,this.listener=b,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Ei(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,_e.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,_e.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(gr(t.toString()),gr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Po===t&&this.Uo(r,o)},r=>{e(()=>{const o=new Te(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(o)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(o=>{r(()=>this.qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}xo(){var e=this;this.state=5,this.So.Io((0,_e.Z)(function*(){e.state=0,e.start()}))}qo(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class w0 extends ic{constructor(e,t,r,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,f),this.wt=u}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function kC(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(b=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===b?1:"REMOVE"===b?2:"CURRENT"===b?3:"RESET"===b?4:rt(),o=e.targetChange.targetIds||[],u=function(b,C){return b.dt?(_t(void 0===C||"string"==typeof C),mr.fromBase64String(C||"")):(_t(void 0===C||C instanceof Uint8Array),mr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),f=e.targetChange.cause,y=f&&function(b){const C=void 0===b.code?ae.UNKNOWN:Qm(b.code);return new Te(C,b.message||"")}(f);t=new Jb(r,o,u,y||null)}else if("documentChange"in e){const r=e.documentChange,o=ga(n,r.document.name),u=kr(r.document.updateTime),f=new Nr({mapValue:{fields:r.document.fields}}),y=dn.newFoundDocument(o,u,f);t=new ey(r.targetIds||[],r.removedTargetIds||[],y.key,y)}else if("documentDelete"in e){const r=e.documentDelete,o=ga(n,r.document),u=r.readTime?kr(r.readTime):vt.min(),f=dn.newNoDocument(o,u);t=new ey([],r.removedTargetIds||[],f.key,f)}else if("documentRemove"in e){const r=e.documentRemove,o=ga(n,r.document);t=new ey([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return rt();{const r=e.filter,u=new xC(r.count||0);t=new ty(r.targetId,u)}}var b;return t}(this.wt,e),r=function(o){if(!("targetChange"in o))return vt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?vt.min():u.readTime?kr(u.readTime):vt.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=oy(this.wt),t.addTarget=function(o,u){let f;const y=u.target;return f=Vm(y)?{documents:oE(o,y)}:{query:Zv(o,y)},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?f.resumeToken=NC(o,u.resumeToken):u.snapshotVersion.compareTo(vt.min())>0&&(f.readTime=Al(o,u.snapshotVersion.toTimestamp())),f}(this.wt,e);const r=function uE(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return rt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Mo(t)}jo(e){const t={};t.database=oy(this.wt),t.removeTarget=e,this.Mo(t)}}class b0 extends ic{constructor(e,t,r,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,f),this.wt=u,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(_t(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function FC(n,e){return n&&n.length>0?(_t(void 0!==e),n.map(t=>function(r,o){let u=kr(r.updateTime?r.updateTime:o);return u.isEqual(vt.min())&&(u=kr(o)),new zm(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=kr(e.commitTime);return this.listener.Jo(r,t)}return _t(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=oy(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ah(this.wt,r))};this.Mo(t)}}class E0 extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=o,this.Zo=!1}tu(){if(this.Zo)throw new Te(ae.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.ro(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(ae.UNKNOWN,o.toString())})}ao(e,t,r,o){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.bo.ao(e,t,r,u,f,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Te(ae.UNKNOWN,u.toString())})}terminate(){this.Zo=!0}}class I0{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(gr(t),this.su=!1):Pe("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class C0{constructor(e,t,r,o,u){var f=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=u,this.du.Br(y=>{r.enqueueAndForget((0,_e.Z)(function*(){var b;Lh(f)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(b=(0,_e.Z)(function*(C){const M=Ge(C);M.lu.add(4),yield sc(M),M._u.set("Unknown"),M.lu.delete(4),yield Rl(M)}),function(C){return b.apply(this,arguments)})(f))}))}),this._u=new I0(r,o)}}function Rl(n){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,_e.Z)(function*(n){if(Lh(n))for(const e of n.fu)yield e(!0)}),Vp.apply(this,arguments)}function sc(n){return Up.apply(this,arguments)}function Up(){return Up=(0,_e.Z)(function*(n){for(const e of n.fu)yield e(!1)}),Up.apply(this,arguments)}function ZE(n,e){const t=Ge(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),hD(t)?dD(t):yy(t).Co()&&lD(t,e))}function D0(n,e){const t=Ge(n),r=yy(t);t.hu.delete(e),r.Co()&&RA(t,e),0===t.hu.size&&(r.Co()?r.ko():Lh(t)&&t._u.set("Unknown"))}function lD(n,e){n.wu.Nt(e.targetId),yy(n).Qo(e)}function RA(n,e){n.wu.Nt(e),yy(n).jo(e)}function dD(n){n.wu=new PC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),yy(n).start(),n._u.iu()}function hD(n){return Lh(n)&&!yy(n).Do()&&n.hu.size>0}function Lh(n){return 0===Ge(n).lu.size}function PA(n){n.wu=void 0}function jx(n){return fD.apply(this,arguments)}function fD(){return fD=(0,_e.Z)(function*(n){n.hu.forEach((e,t)=>{lD(n,e)})}),fD.apply(this,arguments)}function $x(n,e){return pD.apply(this,arguments)}function pD(){return pD=(0,_e.Z)(function*(n,e){PA(n),hD(n)?(n._u.uu(e),dD(n)):n._u.set("Unknown")}),pD.apply(this,arguments)}function Zx(n,e,t){return gD.apply(this,arguments)}function gD(){return gD=(0,_e.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof Jb&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(o,u){const f=u.cause;for(const y of u.targetIds)o.hu.has(y)&&(yield o.remoteSyncer.rejectListen(y,f),o.hu.delete(y),o.wu.removeTarget(y))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield HE(n,r)}else if(e instanceof ey?n.wu.Ut(e):e instanceof ty?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(vt.min()))try{const r=yield $E(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const f=o.wu.Yt(u);return f.targetChanges.forEach((y,b)=>{if(y.resumeToken.approximateByteSize()>0){const C=o.hu.get(b);C&&o.hu.set(b,C.withResumeToken(y.resumeToken,u))}}),f.targetMismatches.forEach(y=>{const b=o.hu.get(y);if(!b)return;o.hu.set(y,b.withResumeToken(mr.EMPTY_BYTE_STRING,b.snapshotVersion)),RA(o,y);const C=new ec(b.target,y,1,b.sequenceNumber);lD(o,C)}),o.remoteSyncer.applyRemoteEvent(f)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield HE(n,r)}var r}),gD.apply(this,arguments)}function HE(n,e,t){return mD.apply(this,arguments)}function mD(){return mD=(0,_e.Z)(function*(n,e,t){if(!ca(e))throw e;n.lu.add(1),yield sc(n),n._u.set("Offline"),t||(t=()=>$E(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield Rl(n)}))}),mD.apply(this,arguments)}function NA(n,e){return e().catch(t=>HE(n,t,e))}function my(n){return yD.apply(this,arguments)}function yD(){return yD=(0,_e.Z)(function*(n){const e=Ge(n),t=Vh(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;Hx(e);)try{const o=yield OA(e.localStore,r);if(null===o){0===e.au.length&&t.ko();break}r=o.batchId,Gx(e,o)}catch(o){yield HE(e,o)}kA(e)&&FA(e)}),yD.apply(this,arguments)}function Hx(n){return Lh(n)&&n.au.length<10}function Gx(n,e){n.au.push(e);const t=Vh(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function kA(n){return Lh(n)&&!Vh(n).Do()&&n.au.length>0}function FA(n){Vh(n).start()}function qx(n){return _D.apply(this,arguments)}function _D(){return _D=(0,_e.Z)(function*(n){Vh(n).Xo()}),_D.apply(this,arguments)}function zx(n){return vD.apply(this,arguments)}function vD(){return vD=(0,_e.Z)(function*(n){const e=Vh(n);for(const t of n.au)e.Ho(t.mutations)}),vD.apply(this,arguments)}function Wx(n,e,t){return wD.apply(this,arguments)}function wD(){return wD=(0,_e.Z)(function*(n,e,t){const r=n.au.shift(),o=Wv.from(r,e,t);yield NA(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield my(n)}),wD.apply(this,arguments)}function Kx(n,e){return bD.apply(this,arguments)}function bD(){return bD=(0,_e.Z)(function*(n,e){var t;e&&Vh(n).zo&&(yield(t=(0,_e.Z)(function*(r,o){if(Vv(u=o.code)&&u!==ae.ABORTED){const f=r.au.shift();Vh(r).No(),yield NA(r,()=>r.remoteSyncer.rejectFailedWrite(f.batchId,o)),yield my(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),kA(n)&&FA(n)}),bD.apply(this,arguments)}function LA(n,e){return ED.apply(this,arguments)}function ED(){return ED=(0,_e.Z)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=Lh(t);t.lu.add(3),yield sc(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Rl(t)}),ED.apply(this,arguments)}function ID(n,e){return CD.apply(this,arguments)}function CD(){return CD=(0,_e.Z)(function*(n,e){const t=Ge(n);e?(t.lu.delete(2),yield Rl(t)):e||(t.lu.add(2),yield sc(t),t._u.set("Unknown"))}),CD.apply(this,arguments)}function yy(n){return n.mu||(n.mu=function(e,t,r){const o=Ge(e);return o.tu(),new w0(t,o.bo,o.authCredentials,o.appCheckCredentials,o.wt,r)}(n.datastore,n.asyncQueue,{zr:jx.bind(null,n),Jr:$x.bind(null,n),Go:Zx.bind(null,n)}),n.fu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.mu.No(),hD(n)?dD(n):n._u.set("Unknown")):(yield n.mu.stop(),PA(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Vh(n){return n.gu||(n.gu=function(e,t,r){const o=Ge(e);return o.tu(),new b0(t,o.bo,o.authCredentials,o.appCheckCredentials,o.wt,r)}(n.datastore,n.asyncQueue,{zr:qx.bind(null,n),Jr:Kx.bind(null,n),Yo:zx.bind(null,n),Jo:Wx.bind(null,n)}),n.fu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.gu.No(),yield my(n)):(yield n.gu.stop(),n.au.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class DD{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}static createAndSchedule(e,t,r,o,u){const f=Date.now()+r,y=new DD(e,t,f,o,u);return y.start(r),y}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Te(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _y(n,e){if(gr("AsyncQueue",`${e}: ${n}`),ca(n))return new Te(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class vy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||He.comparator(t.key,r.key):(t,r)=>He.comparator(t.key,r.key),this.keyedMap=Ip(),this.sortedSet=new Yn(this.comparator)}static emptySet(e){return new vy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new vy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class VA{constructor(){this.yu=new Yn(He.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):rt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class wy{constructor(e,t,r,o,u,f,y,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=y,this.excludesMetadataChanges=b}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(f=>{u.push({type:0,doc:f})}),new wy(e,t,vy.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&iu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class Yx{constructor(){this.Iu=void 0,this.listeners=[]}}class Qx{constructor(){this.queries=new ou(e=>Ov(e),iu),this.onlineState="Unknown",this.Tu=new Set}}function TD(n,e){return AD.apply(this,arguments)}function AD(){return AD=(0,_e.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new Yx),o)try{u.Iu=yield t.onListen(r)}catch(f){const y=_y(f,`Initialization of query '${$m(e.query)}' failed`);return void e.onError(y)}t.queries.set(r,u),u.listeners.push(e),e.Eu(t.onlineState),u.Iu&&e.Au(u.Iu)&&MD(t)}),AD.apply(this,arguments)}function SD(n,e){return xD.apply(this,arguments)}function xD(){return xD=(0,_e.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const f=u.listeners.indexOf(e);f>=0&&(u.listeners.splice(f,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),xD.apply(this,arguments)}function Jx(n,e){const t=Ge(n);let r=!1;for(const o of e){const f=t.queries.get(o.query);if(f){for(const y of f.listeners)y.Au(o)&&(r=!0);f.Iu=o}}r&&MD(t)}function Xx(n,e,t){const r=Ge(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function MD(n){n.Tu.forEach(e=>{e.next()})}class OD{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new wy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=wy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class eM{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class UA{constructor(e){this.wt=e}Wi(e){return ga(this.wt,e)}zi(e){return e.metadata.exists?$v(this.wt,e.document,!1):dn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return kr(e)}}class tM{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=BA(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Zt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new UA(this.wt);for(const o of e)if(o.metadata.queries){const u=r.Wi(o.metadata.name);for(const f of o.metadata.queries){const y=(t.get(f)||Dt()).add(u);t.set(f,y)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function i(n,e,t,r){return s.apply(this,arguments)}(e.localStore,new UA(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const o of e.queries)yield a(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function BA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class jA{constructor(e){this.key=e}}class $A{constructor(e){this.key=e}}class ZA{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Dt(),this.mutatedKeys=Dt(),this.Lu=Pv(e),this.Uu=new vy(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new VA,o=t?t.Uu:this.Uu;let u=t?t.mutatedKeys:this.mutatedKeys,f=o,y=!1;const b="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((M,R)=>{const z=o.get(M),K=Zm(this.query,R)?R:null,he=!!z&&this.mutatedKeys.has(z.key),Fe=!!K&&(K.hasLocalMutations||this.mutatedKeys.has(K.key)&&K.hasCommittedMutations);let je=!1;z&&K?z.data.isEqual(K.data)?he!==Fe&&(r.track({type:3,doc:K}),je=!0):this.Qu(z,K)||(r.track({type:2,doc:K}),je=!0,(b&&this.Lu(K,b)>0||C&&this.Lu(K,C)<0)&&(y=!0)):!z&&K?(r.track({type:0,doc:K}),je=!0):z&&!K&&(r.track({type:1,doc:z}),je=!0,(b||C)&&(y=!0)),je&&(K?(f=f.add(K),u=Fe?u.add(M):u.delete(M)):(f=f.delete(M),u=u.delete(M)))}),null!==this.query.limit)for(;f.size>this.query.limit;){const M="F"===this.query.limitType?f.last():f.first();f=f.delete(M.key),u=u.delete(M.key),r.track({type:1,doc:M})}return{Uu:f,Gu:r,Oi:y,mutatedKeys:u}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const u=e.Gu.pu();u.sort((C,M)=>function(R,z){const K=he=>{switch(he){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return K(R)-K(z)}(C.type,M.type)||this.Lu(C.doc,M.doc)),this.ju(r);const f=t?this.Wu():[],y=0===this.Bu.size&&this.current?1:0,b=y!==this.$u;return this.$u=y,0!==u.length||b?{snapshot:new wy(this.query,e.Uu,o,u,e.mutatedKeys,0===y,b,!1),zu:f}:{zu:f}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new VA,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Dt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new $A(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new jA(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=Dt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return wy.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class nM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class rM{constructor(e){this.key=e,this.Xu=!1}}class iM{constructor(e,t,r,o,u,f){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Zu={},this.tc=new ou(y=>Ov(y),iu),this.ec=new Map,this.nc=new Set,this.sc=new Yn(He.comparator),this.ic=new Map,this.rc=new d0,this.oc={},this.uc=new Map,this.cc=ma.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function sM(n,e){return RD.apply(this,arguments)}function RD(){return RD=(0,_e.Z)(function*(n,e){const t=tT(n);let r,o;const u=t.tc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.Yu();else{const f=yield Fp(t.localStore,Gs(e));t.isPrimaryClient&&ZE(t.remoteStore,f);const y=t.sharedClientState.addLocalQueryTarget(f.targetId);r=f.targetId,o=yield PD(t,e,r,"current"===y)}return o}),RD.apply(this,arguments)}function PD(n,e,t,r){return ND.apply(this,arguments)}function ND(){return ND=(0,_e.Z)(function*(n,e,t,r){n.hc=(M,R,z)=>{return(K=(0,_e.Z)(function*(he,Fe,je,wt){let Ut=Fe.view.Ku(je);Ut.Oi&&(Ut=yield v0(he.localStore,Fe.query,!1).then(({documents:jt})=>Fe.view.Ku(jt,Ut)));const St=wt&&wt.targetChanges.get(Fe.targetId),bt=Fe.view.applyChanges(Ut,he.isPrimaryClient,St);return HD(he,Fe.targetId,bt.zu),bt.snapshot}),function(he,Fe,je,wt){return K.apply(this,arguments)})(n,M,R,z);var K};const o=yield v0(n.localStore,e,!0),u=new ZA(e,o.ji),f=u.Ku(o.documents),y=au.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),b=u.applyChanges(f,n.isPrimaryClient,y);HD(n,t,b.zu);const C=new nM(e,t,u);return n.tc.set(e,C),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),b.snapshot}),ND.apply(this,arguments)}function oM(n,e){return kD.apply(this,arguments)}function kD(){return kD=(0,_e.Z)(function*(n,e){const t=Ge(n),r=t.tc.get(e),o=t.ec.get(r.targetId);if(o.length>1)return t.ec.set(r.targetId,o.filter(u=>!iu(u,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Lp(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),D0(t.remoteStore,r.targetId),by(t,r.targetId)}).catch(qu))):(by(t,r.targetId),yield Lp(t.localStore,r.targetId,!0))}),kD.apply(this,arguments)}function FD(){return FD=(0,_e.Z)(function*(n,e,t){const r=nT(n);try{const o=yield function(u,f){const y=Ge(u),b=Bn.now(),C=f.reduce((z,K)=>z.add(K.key),Dt());let M,R;return y.persistence.runTransaction("Locally write mutations","readwrite",z=>{let K=vi(),he=Dt();return y.Ui.getEntries(z,C).next(Fe=>{K=Fe,K.forEach((je,wt)=>{wt.isValidDocument()||(he=he.add(je))})}).next(()=>y.localDocuments.getOverlayedDocuments(z,K)).next(Fe=>{M=Fe;const je=[];for(const wt of f){const Ut=SC(wt,M.get(wt.key).overlayedDocument);null!=Ut&&je.push(new Co(wt.key,Ut,Lm(Ut.value.mapValue),$n.exists(!0)))}return y.mutationQueue.addMutationBatch(z,b,je,f)}).next(Fe=>{R=Fe;const je=Fe.applyToLocalDocumentSet(M,he);return y.documentOverlayCache.saveOverlays(z,Fe.batchId,je)})}).then(()=>({batchId:R.batchId,changes:Bv(M)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,f,y){let b=u.oc[u.currentUser.toKey()];b||(b=new Yn(Ot)),b=b.insert(f,y),u.oc[u.currentUser.toKey()]=b}(r,o.batchId,t),yield Pl(r,o.changes),yield my(r.remoteStore)}catch(o){const u=_y(o,"Failed to persist write");t.reject(u)}}),FD.apply(this,arguments)}function HA(n,e){return LD.apply(this,arguments)}function LD(){return LD=(0,_e.Z)(function*(n,e){const t=Ge(n);try{const r=yield MA(t.localStore,e);e.targetChanges.forEach((o,u)=>{const f=t.ic.get(u);f&&(_t(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?f.Xu=!0:o.modifiedDocuments.size>0?_t(f.Xu):o.removedDocuments.size>0&&(_t(f.Xu),f.Xu=!1))}),yield Pl(t,r,e)}catch(r){yield qu(r)}}),LD.apply(this,arguments)}function GA(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.tc.forEach((u,f)=>{const y=f.view.Eu(e);y.snapshot&&o.push(y.snapshot)}),function(u,f){const y=Ge(u);y.onlineState=f;let b=!1;y.queries.forEach((C,M)=>{for(const R of M.listeners)R.Eu(f)&&(b=!0)}),b&&MD(y)}(r.eventManager,e),o.length&&r.Zu.Go(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function uM(n,e,t){return VD.apply(this,arguments)}function VD(){return VD=(0,_e.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ic.get(e),u=o&&o.key;if(u){let f=new Yn(He.comparator);f=f.insert(u,dn.newNoDocument(u,vt.min()));const y=Dt().add(u),b=new Xm(vt.min(),new Map,new pn(Ot),f,y);yield HA(r,b),r.sc=r.sc.remove(u),r.ic.delete(e),GD(r)}else yield Lp(r.localStore,e,!1).then(()=>by(r,e,t)).catch(qu)}),VD.apply(this,arguments)}function cM(n,e){return UD.apply(this,arguments)}function UD(){return UD=(0,_e.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const o=yield sD(t.localStore,e);ZD(t,r,null),$D(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Pl(t,o)}catch(o){yield qu(o)}}),UD.apply(this,arguments)}function lM(n,e,t){return BD.apply(this,arguments)}function BD(){return BD=(0,_e.Z)(function*(n,e,t){const r=Ge(n);try{const o=yield function(u,f){const y=Ge(u);return y.persistence.runTransaction("Reject batch","readwrite-primary",b=>{let C;return y.mutationQueue.lookupMutationBatch(b,f).next(M=>(_t(null!==M),C=M.keys(),y.mutationQueue.removeMutationBatch(b,M))).next(()=>y.mutationQueue.performConsistencyCheck(b)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(b,C,f)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,C)).next(()=>y.localDocuments.getDocuments(b,C))})}(r.localStore,e);ZD(r,e,t),$D(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Pl(r,o)}catch(o){yield qu(o)}}),BD.apply(this,arguments)}function jD(){return jD=(0,_e.Z)(function*(n,e){const t=Ge(n);Lh(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const f=Ge(u);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",y=>f.mutationQueue.getHighestUnacknowledgedBatchId(y))}(t.localStore);if(-1===r)return void e.resolve();const o=t.uc.get(r)||[];o.push(e),t.uc.set(r,o)}catch(r){const o=_y(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),jD.apply(this,arguments)}function $D(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function ZD(n,e,t){const r=Ge(n);let o=r.oc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.oc[r.currentUser.toKey()]=o}}function by(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||qA(n,r)})}function qA(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(D0(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),GD(n))}function HD(n,e,t){for(const r of t)r instanceof jA?(n.rc.addReference(r.key,e),hM(n,r)):r instanceof $A?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||qA(n,r.key)):rt()}function hM(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.nc.add(r),GD(n))}function GD(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new He(Zt.fromString(e)),r=n.cc.next();n.ic.set(r,new rM(t)),n.sc=n.sc.insert(t,r),ZE(n.remoteStore,new ec(Gs(wh(t.path)),r,2,ui.ot))}}function Pl(n,e,t){return qD.apply(this,arguments)}function qD(){return qD=(0,_e.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[],f=[];var y;r.tc.isEmpty()||(r.tc.forEach((y,b)=>{f.push(r.hc(b,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(b.targetId,C.fromCache?"not-current":"current"),o.push(C);const M=m0.Vi(b.targetId,C);u.push(M)}}))}),yield Promise.all(f),r.Zu.Go(o),yield(y=(0,_e.Z)(function*(b,C){const M=Ge(b);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>ne.forEach(C,z=>ne.forEach(z.Pi,K=>M.persistence.referenceDelegate.addReference(R,z.targetId,K)).next(()=>ne.forEach(z.vi,K=>M.persistence.referenceDelegate.removeReference(R,z.targetId,K)))))}catch(R){if(!ca(R))throw R;Pe("LocalStore","Failed to update sequence numbers: "+R)}for(const R of C){const z=R.targetId;if(!R.fromCache){const K=M.$i.get(z),Fe=K.withLastLimboFreeSnapshotVersion(K.snapshotVersion);M.$i=M.$i.insert(z,Fe)}}}),function(b,C){return y.apply(this,arguments)})(r.localStore,u))}),qD.apply(this,arguments)}function fM(n,e){return zD.apply(this,arguments)}function zD(){return zD=(0,_e.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield jE(t.localStore,e);t.currentUser=e,(o=t).uc.forEach(f=>{f.forEach(y=>{y.reject(new Te(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Pl(t,r.Ki)}var o}),zD.apply(this,arguments)}function pM(n,e){const t=Ge(n),r=t.ic.get(e);if(r&&r.Xu)return Dt().add(r.key);{let o=Dt();const u=t.ec.get(e);if(!u)return o;for(const f of u){const y=t.tc.get(f);o=o.unionWith(y.view.qu)}return o}}function gM(n,e){return WD.apply(this,arguments)}function WD(){return WD=(0,_e.Z)(function*(n,e){const t=Ge(n),r=yield v0(t.localStore,e.query,!0),o=e.view.Ju(r);return t.isPrimaryClient&&HD(t,e.targetId,o.zu),o}),WD.apply(this,arguments)}function mM(n,e){return KD.apply(this,arguments)}function KD(){return KD=(0,_e.Z)(function*(n,e){const t=Ge(n);return uD(t.localStore,e).then(r=>Pl(t,r))}),KD.apply(this,arguments)}function yM(n,e,t,r){return YD.apply(this,arguments)}function YD(){return YD=(0,_e.Z)(function*(n,e,t,r){const o=Ge(n),u=yield function(f,y){const b=Ge(f),C=Ge(b.mutationQueue);return b.persistence.runTransaction("Lookup mutation documents","readonly",M=>C.yn(M,y).next(R=>R?b.localDocuments.getDocuments(M,R):ne.resolve(null)))}(o.localStore,e);var y;null!==u?("pending"===t?yield my(o.remoteStore):"acknowledged"===t||"rejected"===t?(ZD(o,e,r||null),$D(o,e),y=e,Ge(Ge(o.localStore).mutationQueue).In(y)):rt(),yield Pl(o,u)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),YD.apply(this,arguments)}function QD(){return QD=(0,_e.Z)(function*(n,e){const t=Ge(n);if(tT(t),nT(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield zA(t,r.toArray());t.ac=!0,yield ID(t.remoteStore,!0);for(const u of o)ZE(t.remoteStore,u)}else if(!1===e&&!1!==t.ac){const r=[];let o=Promise.resolve();t.ec.forEach((u,f)=>{t.sharedClientState.isLocalQueryTarget(f)?r.push(f):o=o.then(()=>(by(t,f),Lp(t.localStore,f,!0))),D0(t.remoteStore,f)}),yield o,yield zA(t,r),function(u){const f=Ge(u);f.ic.forEach((y,b)=>{D0(f.remoteStore,b)}),f.rc.cs(),f.ic=new Map,f.sc=new Yn(He.comparator)}(t),t.ac=!1,yield ID(t.remoteStore,!1)}}),QD.apply(this,arguments)}function zA(n,e,t){return JD.apply(this,arguments)}function JD(){return JD=(0,_e.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[];for(const f of e){let y;const b=r.ec.get(f);if(b&&0!==b.length){y=yield Fp(r.localStore,Gs(b[0]));for(const C of b){const M=r.tc.get(C),R=yield gM(r,M);R.snapshot&&u.push(R.snapshot)}}else{const C=yield aD(r.localStore,f);y=yield Fp(r.localStore,C),yield PD(r,WA(C),f,!1)}o.push(y)}return r.Zu.Go(u),o}),JD.apply(this,arguments)}function WA(n){return Zb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function vM(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).Ri()}function wM(n,e,t,r){return XD.apply(this,arguments)}function XD(){return XD=(0,_e.Z)(function*(n,e,t,r){const o=Ge(n);if(o.ac)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const u=o.ec.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const f=yield uD(o.localStore,Rv(u[0])),y=Xm.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Pl(o,f,y);break}case"rejected":yield Lp(o.localStore,e,!0),by(o,e,r);break;default:rt()}}),XD.apply(this,arguments)}function bM(n,e,t){return eT.apply(this,arguments)}function eT(){return eT=(0,_e.Z)(function*(n,e,t){const r=tT(n);if(r.ac){for(const o of e){if(r.ec.has(o)){Pe("SyncEngine","Adding an already active target "+o);continue}const u=yield aD(r.localStore,o),f=yield Fp(r.localStore,u);yield PD(r,WA(u),f.targetId,!1),ZE(r.remoteStore,f)}for(const o of t)r.ec.has(o)&&(yield Lp(r.localStore,o,!1).then(()=>{D0(r.remoteStore,o),by(r,o)}).catch(qu))}}),eT.apply(this,arguments)}function tT(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=HA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uM.bind(null,e),e.Zu.Go=Jx.bind(null,e.eventManager),e.Zu.lc=Xx.bind(null,e.eventManager),e}function nT(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lM.bind(null,e),e}class KA{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.wt=Kt(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return BE(this.persistence,new UE,e.initialUser,this.wt)}_c(e){return new h0(f0.Ms,this.wt)}dc(e){return new Y}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class YA extends KA{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield nT(r.yc.syncEngine),yield my(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return BE(this.persistence,new UE,e.initialUser,this.wt)}mc(e,t){return new u0(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new yC(t,this.persistence);return new mC(e.asyncQueue,r)}_c(e){const t=VE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Wi.withCacheSize(this.cacheSizeBytes):Wi.DEFAULT;return new g0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,ct(),kt(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new Y}}class IM extends YA{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const o=r.yc.syncEngine;r.sharedClientState instanceof j&&(r.sharedClientState.syncEngine={kr:yM.bind(null,o),Or:wM.bind(null,o),Mr:bM.bind(null,o),Ri:vM.bind(null,o),Nr:mM.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var u=(0,_e.Z)(function*(f){yield function _M(n,e){return QD.apply(this,arguments)}(r.yc.syncEngine,f),r.gcScheduler&&(f&&!r.gcScheduler.started?r.gcScheduler.start():f||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(f&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():f||r.indexBackfillerScheduler.stop())});return function(f){return u.apply(this,arguments)}}())})()}dc(e){const t=ct();if(!j.V(t))throw new Te(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=VE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new j(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class rT{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>GA(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=fM.bind(null,r.syncEngine),yield ID(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Qx}createDatastore(e){const t=Kt(e.databaseInfo.databaseId),r=new be(e.databaseInfo);return new E0(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=y=>GA(this.syncEngine,y,0),f=ke.V()?new ke:new me,new C0(t,r,o,u,f);var t,r,o,u,f}createSyncEngine(e,t){return function(r,o,u,f,y,b,C){const M=new iM(r,o,u,f,y,b);return C&&(M.ac=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=Ge(t);Pe("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield sc(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function QA(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class GE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class CM{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Er,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),o=Number(r);isNaN(o)&&e.Pc(`length string (${r}) is not valid number`);const u=yield e.vc(o);return new eM(JSON.parse(u),t.length+o)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,_e.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class DM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Te(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,_e.Z)(function*(u,f){const y=Ge(u),b=oy(y.wt)+"/documents",C={documents:f.map(K=>Th(y.wt,K))},M=yield y.ao("BatchGetDocuments",b,C,f.length),R=new Map;M.forEach(K=>{const he=function sE(n,e){return"found"in e?function(t,r){_t(!!r.found);const o=ga(t,r.found.name),u=kr(r.found.updateTime),f=new Nr({mapValue:{fields:r.found.fields}});return dn.newFoundDocument(o,u,f)}(n,e):"missing"in e?function(t,r){_t(!!r.missing),_t(!!r.readTime);const o=ga(t,r.missing),u=kr(r.readTime);return dn.newNoDocument(o,u)}(n,e):rt()}(y.wt,K);R.set(he.key.toString(),he)});const z=[];return f.forEach(K=>{const he=R.get(K.toString());_t(!!he),z.push(he)}),z}),function(u,f){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Xu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=He.fromPath(o);e.mutations.push(new Lv(u,e.precondition(u)))}),yield(r=(0,_e.Z)(function*(o,u){const f=Ge(o),y=oy(f.wt)+"/documents",b={writes:u.map(C=>Ah(f.wt,C))};yield f.ro("Commit",y,b)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rt();t=vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Te(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?$n.updateTime(t):$n.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vt.min()))throw new Te(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $n.updateTime(t)}return $n.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class TM{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Dc=r.maxAttempts,this.So=new Ei(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,_e.Z)(function*(){const t=new DM(e.datastore),r=e.xc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Nc(u)}))}).catch(o=>{e.Nc(o)})}))}xc(e){try{const t=this.updateFunction(e);return!Il(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Vv(t)}return!1}}class AM{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Pr.UNAUTHENTICATED,this.clientId=gv.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var f=(0,_e.Z)(function*(y){Pe("FirestoreClient","Received user=",y.uid),yield u.authCredentialListener(y),u.user=y});return function(y){return f.apply(this,arguments)}}()),this.appCheckCredentials.start(r,f=>(Pe("FirestoreClient","Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Te(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=_y(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function JA(n,e){return iT.apply(this,arguments)}function iT(){return iT=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,_e.Z)(function*(u){r.isEqual(u)||(yield jE(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),iT.apply(this,arguments)}function XA(n,e){return sT.apply(this,arguments)}function sT(){return sT=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield oT(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>LA(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>LA(e.remoteStore,u)),n.onlineComponents=e}),sT.apply(this,arguments)}function oT(n){return aT.apply(this,arguments)}function aT(){return aT=(0,_e.Z)(function*(n){return n.offlineComponents||(Pe("FirestoreClient","Using default OfflineComponentProvider"),yield JA(n,new KA)),n.offlineComponents}),aT.apply(this,arguments)}function qE(n){return uT.apply(this,arguments)}function uT(){return uT=(0,_e.Z)(function*(n){return n.onlineComponents||(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield XA(n,new rT)),n.onlineComponents}),uT.apply(this,arguments)}function eS(n){return oT(n).then(e=>e.persistence)}function cT(n){return oT(n).then(e=>e.localStore)}function tS(n){return qE(n).then(e=>e.remoteStore)}function lT(n){return qE(n).then(e=>e.syncEngine)}function Ey(n){return dT.apply(this,arguments)}function dT(){return dT=(0,_e.Z)(function*(n){const e=yield qE(n),t=e.eventManager;return t.onListen=sM.bind(null,e.syncEngine),t.onUnlisten=oM.bind(null,e.syncEngine),t}),dT.apply(this,arguments)}function nS(n,e,t={}){const r=new Er;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(o,u,f,y,b){const C=new GE({next:R=>{u.enqueueAndForget(()=>SD(o,M));const z=R.docs.has(f);!z&&R.fromCache?b.reject(new Te(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&R.fromCache&&y&&"server"===y.source?b.reject(new Te(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(R)},error:R=>b.reject(R)}),M=new OD(wh(f.path),C,{includeMetadataChanges:!0,Du:!0});return TD(o,M)}(yield Ey(n),n.asyncQueue,e,t,r)})),r.promise}function rS(n,e,t={}){const r=new Er;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(o,u,f,y,b){const C=new GE({next:R=>{u.enqueueAndForget(()=>SD(o,M)),R.fromCache&&"server"===y.source?b.reject(new Te(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):b.resolve(R)},error:R=>b.reject(R)}),M=new OD(f,C,{includeMetadataChanges:!0,Du:!0});return TD(o,M)}(yield Ey(n),n.asyncQueue,e,t,r)})),r.promise}const iS=new Map;function hT(n,e,t){if(!t)throw new Te(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function sS(n,e,t,r){if(!0===e&&!0===r)throw new Te(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function oS(n){if(!He.isDocumentKey(n))throw new Te(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function aS(n){if(He.isDocumentKey(n))throw new Te(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function zE(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":rt()}function Qt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=zE(n);throw new Te(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function uS(n,e){if(e<=0)throw new Te(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class cS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Te(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Te(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,sS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class T0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cS({}),this._settingsFrozen=!1,e instanceof la?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Te(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new la(o.options.projectId)}(e))}get app(){if(!this._app)throw new Te(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Te(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cS(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new lp;switch(t.type){case"gapi":const r=t.client;return _t(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new dC(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Te(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=iS.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),iS.delete(e),t.terminate())}(this),Promise.resolve()}}class Zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zn(this.firestore,e,this._key)}}class Yi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Yi(this.firestore,e,this._query)}}class oc extends Yi{constructor(e,t,r){super(e,t,wh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zn(this.firestore,null,new He(e))}withConverter(e){return new oc(this.firestore,e,this._path)}}function lS(n,e,...t){if(n=(0,Vt.m9)(n),hT("collection","path",e),n instanceof T0){const r=Zt.fromString(e,...t);return aS(r),new oc(n,null,r)}{if(!(n instanceof Zn||n instanceof oc))throw new Te(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zt.fromString(e,...t));return aS(r),new oc(n.firestore,null,r)}}function WE(n,e,...t){if(n=(0,Vt.m9)(n),1===arguments.length&&(e=gv.I()),hT("doc","path",e),n instanceof T0){const r=Zt.fromString(e,...t);return oS(r),new Zn(n,null,new He(r))}{if(!(n instanceof Zn||n instanceof oc))throw new Te(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zt.fromString(e,...t));return oS(r),new Zn(n.firestore,n instanceof oc?n.converter:null,new He(r))}}function dS(n,e){return n=(0,Vt.m9)(n),e=(0,Vt.m9)(e),(n instanceof Zn||n instanceof oc)&&(e instanceof Zn||e instanceof oc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function hS(n,e){return n=(0,Vt.m9)(n),e=(0,Vt.m9)(e),n instanceof Yi&&e instanceof Yi&&n.firestore===e.firestore&&iu(n._query,e._query)&&n.converter===e.converter}class VM{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Ei(this,"async_queue_retry"),this.Kc=()=>{const t=kt();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=kt();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=kt();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Er;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,_e.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!ca(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,gr("INTERNAL UNHANDLED ERROR: ",function(u){let f=u.message||"";return u.stack&&(f=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),f}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const o=DD.createAndSchedule(this,e,t,r,u=>this.Wc(u));return this.$c.push(o),o}Gc(){this.Bc&&rt()}verifyOperationInProgress(){}zc(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function fT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class UM{constructor(){this._progressObserver={},this._taskCompletionResolver=new Er,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Qn extends T0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new VM,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||fS(this),this._firestoreClient.terminate()}}function Lr(n){return n._firestoreClient||fS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function fS(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new wv(n._databaseId,u,n._persistenceKey,(y=t).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,y.useFetchStreams));var u,y;n._firestoreClient=new AM(n._authCredentials,n._appCheckCredentials,n._queue,r)}function pS(n,e,t){const r=new Er;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield JA(n,t),yield XA(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(f=u).name?f.code===ae.FAILED_PRECONDITION||f.code===ae.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&f instanceof DOMException)||22===f.code||20===f.code||11===f.code))throw u;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var f})).then(()=>r.promise)}function gS(n){if(n._initialized||n._terminated)throw new Te(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Nl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Te(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ir(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ac{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ac(mr.fromBase64String(e))}catch(t){throw new Te(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ac(mr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Bp{constructor(e){this._methodName=e}}class KE{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ot(this._lat,e._lat)||Ot(this._long,e._long)}}const KM=/^__.*__$/;class YM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Co(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ep(e,this.data,t,this.fieldTransforms)}}class mS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Co(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class YE{constructor(e,t,r,o,u,f){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=o,void 0===u&&this.Xc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new YE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ta({path:r,na:!1});return o.sa(e),o}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ta({path:r,na:!1});return o.Xc(),o}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return XE(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(yS(this.Zc)&&KM.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class QM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||Kt(e)}aa(e,t,r,o=!1){return new YE({Zc:e,methodName:t,ca:r,path:ir.emptyPath(),na:!1,ua:o},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function jp(n){const e=n._freezeSettings(),t=Kt(n._databaseId);return new QM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function QE(n,e,t,r,o,u={}){const f=n.aa(u.merge||u.mergeFields?2:0,e,t,o);yT("Data must be an object, but it was:",f,r);const y=wS(r,f);let b,C;if(u.merge)b=new gs(f.fieldMask),C=f.fieldTransforms;else if(u.mergeFields){const M=[];for(const R of u.mergeFields){const z=_T(e,R,t);if(!f.contains(z))throw new Te(ae.INVALID_ARGUMENT,`Field '${z}' is specified in your field mask but missing from your input data.`);ES(M,z)||M.push(z)}b=new gs(M),C=f.fieldTransforms.filter(R=>b.covers(R.field))}else b=null,C=f.fieldTransforms;return new YM(new Nr(y),b,C)}class A0 extends Bp{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof A0}}function _S(n,e,t){return new YE({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class pT extends Bp{_toFieldTransform(e){return new wp(e.path,new Ih)}isEqual(e){return e instanceof pT}}class JM extends Bp{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=_S(this,e,!0),r=this.ha.map(u=>$p(u,t)),o=new su(r);return new wp(e.path,o)}isEqual(e){return this===e}}class XM extends Bp{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=_S(this,e,!0),r=this.ha.map(u=>$p(u,t)),o=new Tl(r);return new wp(e.path,o)}isEqual(e){return this===e}}class e1 extends Bp{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new pa(e.wt,zb(e.wt,this.la));return new wp(e.path,t)}isEqual(e){return this===e}}function gT(n,e,t,r){const o=n.aa(1,e,t);yT("Data must be an object, but it was:",o,r);const u=[],f=Nr.empty();Wu(r,(b,C)=>{const M=JE(e,b,t);C=(0,Vt.m9)(C);const R=o.ia(M);if(C instanceof A0)u.push(M);else{const z=$p(C,R);null!=z&&(u.push(M),f.set(M,z))}});const y=new gs(u);return new mS(f,y,o.fieldTransforms)}function mT(n,e,t,r,o,u){const f=n.aa(1,e,t),y=[_T(e,r,t)],b=[o];if(u.length%2!=0)throw new Te(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let z=0;z<u.length;z+=2)y.push(_T(e,u[z])),b.push(u[z+1]);const C=[],M=Nr.empty();for(let z=y.length-1;z>=0;--z)if(!ES(C,y[z])){const K=y[z];let he=b[z];he=(0,Vt.m9)(he);const Fe=f.ia(K);if(he instanceof A0)C.push(K);else{const je=$p(he,Fe);null!=je&&(C.push(K),M.set(K,je))}}const R=new gs(C);return new mS(M,R,f.fieldTransforms)}function vS(n,e,t,r=!1){return $p(t,n.aa(r?4:3,e))}function $p(n,e){if(bS(n=(0,Vt.m9)(n)))return yT("Unsupported field value:",e,n),wS(n,e);if(n instanceof Bp)return function(t,r){if(!yS(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const f of t){let y=$p(f,r.ra(u));null==y&&(y={nullValue:"NULL_VALUE"}),o.push(y),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Vt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return zb(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Bn.fromDate(t);return{timestampValue:Al(r.wt,o)}}if(t instanceof Bn){const o=new Bn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Al(r.wt,o)}}if(t instanceof KE)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ac)return{bytesValue:NC(r.wt,t._byteString)};if(t instanceof Zn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.oa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:iy(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${zE(t)}`)}(n,e)}function wS(n,e){const t={};return Ob(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wu(n,(r,o)=>{const u=$p(o,e.ea(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function bS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Bn||n instanceof KE||n instanceof ac||n instanceof Zn||n instanceof Bp)}function yT(n,e,t){if(!bS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=zE(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function _T(n,e,t){if((e=(0,Vt.m9)(e))instanceof Nl)return e._internalPath;if("string"==typeof e)return JE(n,e);throw XE("Field path arguments must be of type string or ",n,!1,void 0,t)}const t1=new RegExp("[~\\*/\\[\\]]");function JE(n,e,t){if(e.search(t1)>=0)throw XE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nl(...e.split("."))._internalPath}catch(r){throw XE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function XE(n,e,t,r,o){const u=r&&!r.isEmpty(),f=void 0!==o;let y=`Function ${e}() called with invalid data`;t&&(y+=" (via `toFirestore()`)"),y+=". ";let b="";return(u||f)&&(b+=" (found",u&&(b+=` in field ${r}`),f&&(b+=` in document ${o}`),b+=")"),new Te(ae.INVALID_ARGUMENT,y+n+b)}function ES(n,e){return n.some(t=>t.isEqual(e))}class S0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new n1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(eI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class n1 extends S0{data(){return super.data()}}function eI(n,e){return"string"==typeof e?JE(n,e):e instanceof Nl?e._internalPath:e._delegate._internalPath}class Zp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kl extends S0{constructor(e,t,r,o,u,f){super(e,t,r,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new x0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(eI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class x0 extends kl{data(e={}){return super.data(e)}}class Uh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Zp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new x0(this._firestore,this._userDataWriter,r.key,r,new Zp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(f=>({type:"added",doc:new x0(r._firestore,r._userDataWriter,f.doc.key,f.doc,new Zp(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(f=>o||3!==f.type).map(f=>{const y=new x0(r._firestore,r._userDataWriter,f.doc.key,f.doc,new Zp(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);let b=-1,C=-1;return 0!==f.type&&(b=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),1!==f.type&&(u=u.add(f.doc),C=u.indexOf(f.doc.key)),{type:r1(f.type),doc:y,oldIndex:b,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function r1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}function IS(n,e){return n instanceof kl&&e instanceof kl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Uh&&e instanceof Uh&&n._firestore===e._firestore&&hS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function CS(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Te(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class M0{}function Bh(n,...e){for(const t of e)n=t._apply(n);return n}class i1 extends M0{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=jp(e.firestore),r=function(o,u,f,y,b,C,M){let R;if(b.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Te(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){MS(M,C);const K=[];for(const he of M)K.push(xS(y,o,he));R={arrayValue:{values:K}}}else R=xS(y,o,M)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||MS(M,C),R=vS(f,"where",M,"in"===C||"not-in"===C);const z=ci.create(b,C,R);return function(K,he){if(he.ht()){const je=xv(K);if(null!==je&&!je.isEqual(he.field))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${je.toString()}' and '${he.field.toString()}'`);const wt=Sv(K);null!==wt&&OS(0,he.field,wt)}const Fe=function(je,wt){for(const Ut of je.filters)if(wt.indexOf(Ut.op)>=0)return Ut.op;return null}(K,function(je){switch(je){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(he.op));if(null!==Fe)throw new Te(ae.INVALID_ARGUMENT,Fe===he.op?`Invalid query. You cannot use more than one '${he.op.toString()}' filter.`:`Invalid query. You cannot use '${he.op.toString()}' filters with '${Fe.toString()}' filters.`)}(o,z),z}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new Yi(e.firestore,e.converter,function(o,u){const f=o.filters.concat([u]);return new ru(o.path,o.collectionGroup,o.explicitOrderBy.slice(),f,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class o1 extends M0{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Te(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Te(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const f=new Dl(o,u);return function(y,b){if(null===Sv(y)){const C=xv(y);null!==C&&OS(0,C,b.field)}}(r,f),f}(e._query,this.fa,this.wa);return new Yi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new ru(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class DS extends M0{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new Yi(e.firestore,e.converter,Hb(e._query,this.ma,this.ga))}}class TS extends M0{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=SS(e,this.type,this.ya,this.pa);return new Yi(e.firestore,e.converter,(o=t,new ru((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class AS extends M0{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=SS(e,this.type,this.ya,this.pa);return new Yi(e.firestore,e.converter,(o=t,new ru((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function SS(n,e,t,r){if(t[0]=(0,Vt.m9)(t[0]),t[0]instanceof S0)return function(o,u,f,y,b){if(!y)throw new Te(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const C=[];for(const M of bh(o))if(M.field.isKeyField())C.push(Eo(u,y.key));else{const R=y.data.field(M.field);if(vv(R))throw new Te(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const z=M.field.canonicalString();throw new Te(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${z}' (used as the orderBy) does not exist.`)}C.push(R)}return new Cl(C,b)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=jp(n.firestore);return function(u,f,y,b,C,M){const R=u.explicitOrderBy;if(C.length>R.length)throw new Te(ae.INVALID_ARGUMENT,`Too many arguments provided to ${b}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const z=[];for(let K=0;K<C.length;K++){const he=C[K];if(R[K].field.isKeyField()){if("string"!=typeof he)throw new Te(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${b}(), but got a ${typeof he}`);if(!Mv(u)&&-1!==he.indexOf("/"))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${b}() must be a plain document ID, but '${he}' contains a slash.`);const Fe=u.path.child(Zt.fromString(he));if(!He.isDocumentKey(Fe))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${b}() must result in a valid document path, but '${Fe}' is not because it contains an odd number of segments.`);const je=new He(Fe);z.push(Eo(f,je))}else{const Fe=vS(y,b,he);z.push(Fe)}}return new Cl(z,M)}(n._query,n.firestore._databaseId,o,e,t,r)}}function xS(n,e,t){if("string"==typeof(t=(0,Vt.m9)(t))){if(""===t)throw new Te(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mv(e)&&-1!==t.indexOf("/"))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Zt.fromString(t));if(!He.isDocumentKey(r))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Eo(n,new He(r))}if(t instanceof Zn)return Eo(n,t._key);throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zE(t)}.`)}function MS(n,e){if(!Array.isArray(n)||0===n.length)throw new Te(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Te(ae.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function OS(n,e,t){if(!t.isEqual(e))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const p1={maxAttempts:5};class vT{convertValue(e,t="none"){switch(Yu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rt()}}convertObject(e,t){const r={};return Wu(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new KE(jn(e.latitude),jn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Nb(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(El(e));default:return null}}convertTimestamp(e){const t=Ku(e);return new Bn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Zt.fromString(e);_t(LC(r));const o=new la(r.get(1),r.get(3)),u=new He(r.popFirst(5));return o.isEqual(t)||gr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function tI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class g1 extends vT{constructor(e){super(),this.firestore=e}convertBytes(e){return new ac(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}class RS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=jp(e)}set(e,t,r){this._verifyNotCommitted();const o=jh(e,this._firestore),u=tI(o.converter,t,r),f=QE(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(f.toMutation(o._key,$n.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=jh(e,this._firestore);let f;return f="string"==typeof(t=(0,Vt.m9)(t))||t instanceof Nl?mT(this._dataReader,"WriteBatch.update",u._key,t,r,o):gT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(f.toMutation(u._key,$n.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=jh(e,this._firestore);return this._mutations=this._mutations.concat(new Xu(t._key,$n.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Te(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jh(n,e){if((n=(0,Vt.m9)(n)).firestore!==e)throw new Te(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Hp extends vT{constructor(e){super(),this.firestore=e}convertBytes(e){return new ac(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}function PS(n,e,t){n=Qt(n,Zn);const r=Qt(n.firestore,Qn),o=tI(n.converter,e,t);return Iy(r,[QE(jp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,$n.none())])}function NS(n,e,t,...r){n=Qt(n,Zn);const o=Qt(n.firestore,Qn),u=jp(o);let f;return f="string"==typeof(e=(0,Vt.m9)(e))||e instanceof Nl?mT(u,"updateDoc",n._key,e,t,r):gT(u,"updateDoc",n._key,e),Iy(o,[f.toMutation(n._key,$n.exists(!0))])}function kS(n,...e){var t,r,o;n=(0,Vt.m9)(n);let u={includeMetadataChanges:!1},f=0;"object"!=typeof e[f]||fT(e[f])||(u=e[f],f++);const y={includeMetadataChanges:u.includeMetadataChanges};if(fT(e[f])){const R=e[f];e[f]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[f+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[f+2]=null===(o=R.complete)||void 0===o?void 0:o.bind(R)}let b,C,M;if(n instanceof Zn)C=Qt(n.firestore,Qn),M=wh(n._key.path),b={next:R=>{e[f]&&e[f](wT(C,n,R))},error:e[f+1],complete:e[f+2]};else{const R=Qt(n,Yi);C=Qt(R.firestore,Qn),M=R._query;const z=new Hp(C);b={next:K=>{e[f]&&e[f](new Uh(C,z,R,K))},error:e[f+1],complete:e[f+2]},CS(n._query)}return function(R,z,K,he){const Fe=new GE(he),je=new OD(z,Fe,K);return R.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return TD(yield Ey(R),je)})),()=>{Fe.Tc(),R.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return SD(yield Ey(R),je)}))}}(Lr(C),M,y,b)}function Iy(n,e){return function(t,r){const o=new Er;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function aM(n,e,t){return FD.apply(this,arguments)}(yield lT(t),r,o)})),o.promise}(Lr(n),e)}function wT(n,e,t){const r=t.docs.get(e._key),o=new Hp(n);return new kl(n,o,e._key,r,new Zp(t.hasPendingWrites,t.fromCache),e.converter)}class D1 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=jp(e)}get(e){const t=jh(e,this._firestore),r=new g1(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return rt();const u=o[0];if(u.isFoundDocument())return new S0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new S0(this._firestore,r,t._key,null,t.converter);throw rt()})}set(e,t,r){const o=jh(e,this._firestore),u=tI(o.converter,t,r),f=QE(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,f),this}update(e,t,r,...o){const u=jh(e,this._firestore);let f;return f="string"==typeof(t=(0,Vt.m9)(t))||t instanceof Nl?mT(this._dataReader,"Transaction.update",u._key,t,r,o):gT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,f),this}delete(e){const t=jh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=jh(e,this._firestore),r=new Hp(this._firestore);return super.get(e).then(o=>new kl(this._firestore,r,t._key,o._document,new Zp(!1,!1),t.converter))}}function bT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Te("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function LS(){if("undefined"==typeof Uint8Array)throw new Te("unimplemented","Uint8Arrays are not available in this environment.")}function VS(){if(!function Pb(){return"undefined"!=typeof atob}())throw new Te("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ml=nl.SDK_VERSION,(0,nl._registerComponent)(new $f.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Qn(o,new cC(t.getProvider("auth-internal")),new Db(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,nl.registerVersion)(Eb,"3.4.12",n),(0,nl.registerVersion)(Eb,"3.4.12","esm2017")}();class O0{constructor(e){this._delegate=e}static fromBase64String(e){return VS(),new O0(ac.fromBase64String(e))}static fromUint8Array(e){return LS(),new O0(ac.fromUint8Array(e))}toBase64(){return VS(),this._delegate.toBase64()}toUint8Array(){return LS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ET(n){return function N1(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class k1{enableIndexedDbPersistence(e,t){return function jM(n,e){gS(n=Qt(n,Qn));const t=Lr(n),r=n._freezeSettings(),o=new rT;return pS(t,o,new YA(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function $M(n){gS(n=Qt(n,Qn));const e=Lr(n),t=n._freezeSettings(),r=new rT;return pS(e,r,new IM(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function ZM(n){if(n._initialized&&!n._terminated)throw new Te(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Er;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!bo.V())return Promise.resolve();const o=r+"main";yield bo.delete(o)}),function(r){return t.apply(this,arguments)})(VE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class US{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof la||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&cp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function FM(n,e,t,r={}){var o;const u=(n=Qt(n,T0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&cp("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let f,y;if("string"==typeof r.mockUserToken)f=r.mockUserToken,y=Pr.MOCK_USER;else{f=(0,Vt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new Te(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Pr(b)}n._authCredentials=new dp(new Cb(f,y))}}(this._delegate,e,t,r)}enableNetwork(){return function GM(n){return function SM(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield eS(n),t=yield tS(n);return e.setNetworkEnabled(!0),function(r){const o=Ge(r);return o.lu.delete(0),Rl(o)}(t)}))}(Lr(n=Qt(n,Qn)))}(this._delegate)}disableNetwork(){return function qM(n){return function xM(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield eS(n),t=yield tS(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(o){const u=Ge(o);u.lu.add(0),yield sc(u),u._u.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Lr(n=Qt(n,Qn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,sS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function HM(n){return function(e){const t=new Er;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function dM(n,e){return jD.apply(this,arguments)}(yield lT(e),t)})),t.promise}(Lr(n=Qt(n,Qn)))}(this._delegate)}onSnapshotsInSync(e){return function C1(n,e){return function RM(n,e){const t=new GE(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield Ey(n),o=t,Ge(r).Tu.add(o),void o.next();var r,o})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield Ey(n),o=t,void Ge(r).Tu.delete(o);var r,o}))}}(Lr(n=Qt(n,Qn)),fT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Te("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Cy(this,lS(this._delegate,e))}catch(t){throw ms(t,"collection()","Firestore.collection()")}}doc(e){try{return new ya(this,WE(this._delegate,e))}catch(t){throw ms(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ys(this,function LM(n,e){if(n=Qt(n,T0),hT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Te(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Yi(n,null,(t=e,new ru(Zt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ms(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function T1(n,e,t){n=Qt(n,Qn);const r=Object.assign(Object.assign({},p1),t);return function(o){if(o.maxAttempts<1)throw new Te(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function PM(n,e,t){const r=new Er;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const o=yield(u=n,qE(u).then(f=>f.datastore));var u;new TM(n.asyncQueue,o,t,e,r).run()})),r.promise}(Lr(n),o=>e(new D1(n,o)),r)}(this._delegate,t=>e(new BS(this,t)))}batch(){return Lr(this._delegate),new jS(new RS(this._delegate,e=>Iy(this._delegate,e)))}loadBundle(e){return function zM(n,e){const t=Lr(n=Qt(n,Qn)),r=new UM;return function NM(n,e,t,r){const o=function(u,f){let y;return y="string"==typeof u?(new TextEncoder).encode(u):u,b=function(b,C){if(b instanceof Uint8Array)return QA(b,C);if(b instanceof ArrayBuffer)return QA(new Uint8Array(b),C);if(b instanceof ReadableStream)return b.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(y),new CM(b,f);var b}(t,Kt(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function EM(n,e,t){const r=Ge(n);var o;(o=(0,_e.Z)(function*(u,f,y){try{const b=yield f.getMetadata();if(yield function(z,K){const he=Ge(z),Fe=kr(K.createTime);return he.persistence.runTransaction("hasNewerBundle","readonly",je=>he.Ds.getBundleMetadata(je,K.id)).then(je=>!!je&&je.createTime.compareTo(Fe)>=0)}(u.localStore,b))return yield f.close(),y._completeWith({taskState:"Success",documentsLoaded:(z=b).totalDocuments,bytesLoaded:z.totalBytes,totalDocuments:z.totalDocuments,totalBytes:z.totalBytes}),Promise.resolve(new Set);y._updateProgress(BA(b));const C=new tM(b,u.localStore,f.wt);let M=yield f.fc();for(;M;){const z=yield C.Nu(M);z&&y._updateProgress(z),M=yield f.fc()}const R=yield C.complete();return yield Pl(u,R.Mu,void 0),yield function(z,K){const he=Ge(z);return he.persistence.runTransaction("Save bundle","readwrite",Fe=>he.Ds.saveBundleMetadata(Fe,K))}(u.localStore,b),y._completeWith(R.progress),Promise.resolve(R.Ou)}catch(b){return cp("SyncEngine",`Loading bundle failed with ${b}`),y._failWith(b),Promise.resolve(new Set)}var z}),function(u,f,y){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield lT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function WM(n,e){return function kM(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const o=Ge(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ds.getNamedQuery(u,r))}(yield cT(n),e)}))}(Lr(n=Qt(n,Qn)),e).then(t=>t?new Yi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ys(this,t):null)}}class nI extends vT{constructor(e){super(),this.firestore=e}convertBytes(e){return new O0(new ac(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ya.forKey(t,this.firestore,null)}}class BS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new nI(e)}get(e){const t=qp(e);return this._delegate.get(t).then(r=>new R0(this._firestore,new kl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=qp(e);return r?(bT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=qp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=qp(e);return this._delegate.delete(t),this}}class jS{constructor(e){this._delegate=e}set(e,t,r){const o=qp(e);return r?(bT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=qp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=qp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Gp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new x0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new P0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Gp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Gp(e,new nI(e),t),o.set(t,u)),u}}Gp.INSTANCES=new WeakMap;class ya{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Te("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ya(t,new Zn(t._delegate,r,new He(e)))}static forKey(e,t,r){return new ya(t,new Zn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Cy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Cy(this.firestore,lS(this._delegate,e))}catch(t){throw ms(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Vt.m9)(e))instanceof Zn&&dS(this._delegate,e)}set(e,t){t=bT("DocumentReference.set",t);try{return t?PS(this._delegate,e,t):PS(this._delegate,e)}catch(r){throw ms(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?NS(this._delegate,e):NS(this._delegate,e,t,...r)}catch(o){throw ms(o,"updateDoc()","DocumentReference.update()")}}delete(){return function E1(n){return Iy(Qt(n.firestore,Qn),[new Xu(n._key,$n.none())])}(this._delegate)}onSnapshot(...e){const t=$S(e),r=ZS(e,o=>new R0(this.firestore,new kl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return kS(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function y1(n){n=Qt(n,Zn);const e=Qt(n.firestore,Qn),t=Lr(e),r=new Hp(e);return function MM(n,e){const t=new Er;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(o,u,f){try{const y=yield function(b,C){const M=Ge(b);return M.persistence.runTransaction("read document","readonly",R=>M.localDocuments.getDocument(R,C))}(o,u);y.isFoundDocument()?f.resolve(y):y.isNoDocument()?f.resolve(null):f.reject(new Te(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(y){const b=_y(y,`Failed to get document '${u} from cache`);f.reject(b)}}),function(o,u,f){return r.apply(this,arguments)})(yield cT(n),e,t);var r})),t.promise}(t,n._key).then(o=>new kl(e,r,n._key,o,new Zp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function _1(n){n=Qt(n,Zn);const e=Qt(n.firestore,Qn);return nS(Lr(e),n._key,{source:"server"}).then(t=>wT(e,n,t))}(this._delegate):function m1(n){n=Qt(n,Zn);const e=Qt(n.firestore,Qn);return nS(Lr(e),n._key).then(t=>wT(e,n,t))}(this._delegate),t.then(r=>new R0(this.firestore,new kl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ya(this.firestore,this._delegate.withConverter(e?Gp.getInstance(this.firestore,e):null))}}function ms(n,e,t){return n.message=n.message.replace(e,t),n}function $S(n){for(const e of n)if("object"==typeof e&&!ET(e))return e;return{}}function ZS(n,e){var t,r;let o;return o=ET(n[0])?n[0]:ET(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class R0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ya(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return IS(this._delegate,e._delegate)}}class P0 extends R0{data(e){const t=this._delegate.data(e);return function uC(n,e){n||rt()}(void 0!==t),t}}class ys{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nI(e)}where(e,t,r){try{return new ys(this.firestore,Bh(this._delegate,function s1(n,e,t){const r=e,o=eI("where",n);return new i1(o,r,t)}(e,t,r)))}catch(o){throw ms(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ys(this.firestore,Bh(this._delegate,function a1(n,e="asc"){const t=e,r=eI("orderBy",n);return new o1(r,t)}(e,t)))}catch(r){throw ms(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ys(this.firestore,Bh(this._delegate,function u1(n){return uS("limit",n),new DS("limit",n,"F")}(e)))}catch(t){throw ms(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ys(this.firestore,Bh(this._delegate,function c1(n){return uS("limitToLast",n),new DS("limitToLast",n,"L")}(e)))}catch(t){throw ms(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ys(this.firestore,Bh(this._delegate,function l1(...n){return new TS("startAt",n,!0)}(...e)))}catch(t){throw ms(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ys(this.firestore,Bh(this._delegate,function d1(...n){return new TS("startAfter",n,!1)}(...e)))}catch(t){throw ms(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ys(this.firestore,Bh(this._delegate,function h1(...n){return new AS("endBefore",n,!1)}(...e)))}catch(t){throw ms(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ys(this.firestore,Bh(this._delegate,function f1(...n){return new AS("endAt",n,!0)}(...e)))}catch(t){throw ms(t,"endAt()","Query.endAt()")}}isEqual(e){return hS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function w1(n){n=Qt(n,Yi);const e=Qt(n.firestore,Qn),t=Lr(e),r=new Hp(e);return function OM(n,e){const t=new Er;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(o,u,f){try{const y=yield v0(o,u,!0),b=new ZA(u,y.ji),C=b.Ku(y.documents),M=b.applyChanges(C,!1);f.resolve(M.snapshot)}catch(y){const b=_y(y,`Failed to execute query '${u} against cache`);f.reject(b)}}),function(o,u,f){return r.apply(this,arguments)})(yield cT(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Uh(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function b1(n){n=Qt(n,Yi);const e=Qt(n.firestore,Qn),t=Lr(e),r=new Hp(e);return rS(t,n._query,{source:"server"}).then(o=>new Uh(e,r,n,o))}(this._delegate):function v1(n){n=Qt(n,Yi);const e=Qt(n.firestore,Qn),t=Lr(e),r=new Hp(e);return CS(n._query),rS(t,n._query).then(o=>new Uh(e,r,n,o))}(this._delegate),t.then(r=>new IT(this.firestore,new Uh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=$S(e),r=ZS(e,o=>new IT(this.firestore,new Uh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return kS(this._delegate,t,r)}withConverter(e){return new ys(this.firestore,this._delegate.withConverter(e?Gp.getInstance(this.firestore,e):null))}}class L1{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new P0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class IT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ys(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new P0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new L1(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new P0(this._firestore,r))})}isEqual(e){return IS(this._delegate,e._delegate)}}class Cy extends ys{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ya(this.firestore,e):null}doc(e){try{return new ya(this.firestore,void 0===e?WE(this._delegate):WE(this._delegate,e))}catch(t){throw ms(t,"doc()","CollectionReference.doc()")}}add(e){return function I1(n,e){const t=Qt(n.firestore,Qn),r=WE(n),o=tI(n.converter,e);return Iy(t,[QE(jp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,$n.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ya(this.firestore,t))}isEqual(e){return dS(this._delegate,e._delegate)}withConverter(e){return new Cy(this.firestore,this._delegate.withConverter(e?Gp.getInstance(this.firestore,e):null))}}function qp(n){return Qt(n,Zn)}class CT{constructor(...e){this._delegate=new Nl(...e)}static documentId(){return new CT(ir.keyField().canonicalString())}isEqual(e){return(e=(0,Vt.m9)(e))instanceof Nl&&this._delegate._internalPath.isEqual(e._internalPath)}}class zp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function S1(){return new pT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new zp(e)}static delete(){const e=function A1(){return new A0("deleteField")}();return e._methodName="FieldValue.delete",new zp(e)}static arrayUnion(...e){const t=function x1(...n){return new JM("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new zp(t)}static arrayRemove(...e){const t=function M1(...n){return new XM("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new zp(t)}static increment(e){const t=function O1(n){return new e1("increment",n)}(e);return t._methodName="FieldValue.increment",new zp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const V1={Firestore:US,GeoPoint:KE,Timestamp:Bn,Blob:O0,Transaction:BS,WriteBatch:jS,DocumentReference:ya,DocumentSnapshot:R0,Query:ys,QueryDocumentSnapshot:P0,QuerySnapshot:IT,CollectionReference:Cy,FieldPath:CT,FieldValue:zp,setLogLevel:function F1(n){!function Ib(n){nu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function B1(n){(function U1(n,e){n.INTERNAL.registerComponent(new $f.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},V1)))})(n,(e,t)=>new US(e,t,new k1)),n.registerVersion("@firebase/firestore-compat","0.1.21")}(LI.Z);var j1=P(6451),rI=P(5363),$1=P(6063);class Z1 extends ss.x{constructor(e=1/0,t=1/0,r=$1.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:f}=this;t||(r.push(e),!o&&r.push(u.now()+f)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let f=0;f<u.length&&!e.closed;f+=r?1:2)e.next(u[f]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const f=t.now();let y=0;for(let b=1;b<r.length&&r[b]<=f;b+=2)y=b;y&&r.splice(0,y+1)}}}var H1=P(3099);function HS(n,e,t){var r,o;let u,f=!1;return n&&"object"==typeof n?(u=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(o=n.windowTime)&&void 0!==o?o:1/0,f=!!n.refCount,t=n.scheduler):u=null!=n?n:1/0,(0,H1.B)({connector:()=>new Z1(u,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:f})}function GS(n,e){return(0,Fa.m)(e)?tr(()=>n,e):tr(()=>n)}var DT=P(9468);P(5867);const zS=new Map,K1={activated:!1,tokenObservers:[]},Y1={initialized:!1,enabled:!1};function li(n){return zS.get(n)||K1}function cu(n,e){zS.set(n,e)}function sI(){return Y1}class tO{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new Vt.BH,yield function nO(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Vt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const _s=new Vt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function KS(n){if(!li(n).activated)throw _s.create("use-before-activation",{appName:n.name})}function xT(n,e){return MT.apply(this,arguments)}function MT(){return MT=(0,_e.Z)(function*({url:n,body:e},t){var r,o;const u={"Content-Type":"application/json"},f=t.getImmediate({optional:!0});if(f){const K=yield f.getHeartbeatsHeader();K&&(u["X-Firebase-Client"]=K)}const y={method:"POST",body:JSON.stringify(e),headers:u};let b,C;try{b=yield fetch(n,y)}catch(K){throw _s.create("fetch-network-error",{originalErrorMessage:null===(r=K)||void 0===r?void 0:r.message})}if(200!==b.status)throw _s.create("fetch-status-error",{httpStatus:b.status});try{C=yield b.json()}catch(K){throw _s.create("fetch-parse-error",{originalErrorMessage:null===(o=K)||void 0===o?void 0:o.message})}const M=C.ttl.match(/^([\d.]+)(s)$/);if(!M||!M[2]||isNaN(Number(M[1])))throw _s.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${C.ttl}`});const R=1e3*Number(M[1]),z=Date.now();return{token:C.token,expireTimeMillis:z+R,issuedAtTimeMillis:z}}),MT.apply(this,arguments)}function oO(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const N0="firebase-app-check-store";let uI=null;function QS(){return uI||(uI=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var u;e(_s.create("storage-open",{originalErrorMessage:null===(u=o.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(N0,{keyPath:"compositeKey"})}}catch(r){e(_s.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),uI)}function OT(){return OT=(0,_e.Z)(function*(n,e){const r=(yield QS()).transaction(N0,"readwrite"),u=r.objectStore(N0).put({compositeKey:n,value:e});return new Promise((f,y)=>{u.onsuccess=b=>{f()},r.onerror=b=>{var C;y(_s.create("storage-set",{originalErrorMessage:null===(C=b.target.error)||void 0===C?void 0:C.message}))}})}),OT.apply(this,arguments)}const k0=new rl.Yd("@firebase/app-check");function tx(n,e){return(0,Vt.hl)()?function lO(n,e){return function JS(n,e){return OT.apply(this,arguments)}(function ex(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{k0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function nx(){return sI().enabled}function rx(){return kT.apply(this,arguments)}function kT(){return kT=(0,_e.Z)(function*(){const n=sI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),kT.apply(this,arguments)}const mO={error:"UNKNOWN_ERROR"};function yO(n){return Vt.US.encodeString(JSON.stringify(n),!1)}function cI(n){return FT.apply(this,arguments)}function FT(){return FT=(0,_e.Z)(function*(n,e=!1){const t=n.app;KS(t);const r=li(t);let u,o=r.token;if(!o){const b=yield r.cachedTokenPromise;b&&lI(b)&&(o=b)}if(!e&&o&&lI(o))return{token:o.token};let y,f=!1;if(nx()){r.exchangeTokenPromise||(r.exchangeTokenPromise=xT(oO(t,yield rx()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),f=!0);const b=yield r.exchangeTokenPromise;return yield tx(t,b),cu(t,Object.assign(Object.assign({},r),{token:b})),{token:b.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(b=>(r.exchangeTokenPromise=void 0,b)),f=!0),o=yield r.exchangeTokenPromise}catch(b){"appCheck/throttled"===b.code?k0.warn(b.message):k0.error(b),u=b}return o?(y={token:o.token},cu(t,Object.assign(Object.assign({},r),{token:o})),yield tx(t,o)):y=vO(u),f&&sx(t,y),y}),FT.apply(this,arguments)}function VT(n,e){const t=li(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),cu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function ix(n){const{app:e}=n,t=li(e);let r=t.tokenRefresher;r||(r=function _O(n){const{app:e}=n;return new tO((0,_e.Z)(function*(){let r;if(r=li(e).token?yield cI(n,!0):yield cI(n),r.error)throw r.error}),()=>!0,()=>{const t=li(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),cu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function sx(n,e){const t=li(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function lI(n){return n.expireTimeMillis-Date.now()>0}function vO(n){return{token:yO(mO),error:n}}class wO{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=li(this.app);for(const t of e)VT(this.app,t.next);return Promise.resolve()}}const fx="app-check-internal";!function NO(){(0,nl._registerComponent)(new $f.wA("app-check",n=>function bO(n,e){return new wO(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(fx).initialize()})),(0,nl._registerComponent)(new $f.wA(fx,n=>function EO(n){return{getToken:e=>cI(n,e),addTokenListener:e=>function LT(n,e,t,r){const{app:o}=n,u=li(o),f={next:t,error:r,type:e};if(cu(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,f]})),u.token&&lI(u.token)){const y=u.token;Promise.resolve().then(()=>{t({token:y.token}),ix(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>ix(n))}(n,"INTERNAL",e),removeTokenListener:e=>VT(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,nl.registerVersion)("@firebase/app-check","0.5.11")}();class $T{constructor(){return(0,br.vb)("app-check")}}"undefined"!=typeof window&&window;var UO=P(127);const gx=new l.OlP("angularfire2.auth.use-emulator"),mx=new l.OlP("angularfire2.auth.settings"),yx=new l.OlP("angularfire2.auth.tenant-id"),_x=new l.OlP("angularfire2.auth.langugage-code"),vx=new l.OlP("angularfire2.auth.use-device-language"),wx=new l.OlP("angularfire.auth.persistence"),bx=(n,e,t,r,o,u,f,y)=>(0,Zs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const b=e.runOutsideAngular(()=>n.auth());if(t&&b.useEmulator(...t),r&&(b.tenantId=r),b.languageCode=o,u&&b.useDeviceLanguage(),f)for(const[C,M]of Object.entries(f))b.settings[C]=M;return y&&b.setPersistence(y),b},[t,r,o,u,f,y]);let Ex=(()=>{class n{constructor(t,r,o,u,f,y,b,C,M,R,z,K){const he=new ss.x,Fe=Je(void 0).pipe((0,rI.Q)(f.outsideAngular),tr(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,1121)))),(0,It.U)(()=>(0,Zs.on)(t,u,r)),(0,It.U)(je=>bx(je,u,y,C,M,R,b,z)),HS({bufferSize:1,refCount:!1}));if(Da(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Je(null);else{Fe.pipe(Fi()).subscribe();const wt=Fe.pipe(tr(bt=>bt.getRedirectResult().then(jt=>jt,()=>null)),br.iC,HS({bufferSize:1,refCount:!1})),Ut=Fe.pipe(tr(bt=>new hr.y(jt=>({unsubscribe:u.runOutsideAngular(()=>bt.onAuthStateChanged(hn=>jt.next(hn),hn=>jt.error(hn),()=>jt.complete()))})))),St=Fe.pipe(tr(bt=>new hr.y(jt=>({unsubscribe:u.runOutsideAngular(()=>bt.onIdTokenChanged(hn=>jt.next(hn),hn=>jt.error(hn),()=>jt.complete()))}))));this.authState=wt.pipe(GS(Ut),(0,DT.R)(f.outsideAngular),(0,rI.Q)(f.insideAngular)),this.user=wt.pipe(GS(St),(0,DT.R)(f.outsideAngular),(0,rI.Q)(f.insideAngular)),this.idToken=this.user.pipe(tr(bt=>bt?(0,mn.D)(bt.getIdToken()):Je(null))),this.idTokenResult=this.user.pipe(tr(bt=>bt?(0,mn.D)(bt.getIdTokenResult()):Je(null))),this.credential=(0,j1.T)(wt,he,this.authState.pipe(Ar(bt=>!bt))).pipe((0,It.U)(bt=>(null==bt?void 0:bt.user)?bt:null),(0,DT.R)(f.outsideAngular),(0,rI.Q)(f.insideAngular))}return(0,Zs.pX)(this,Fe,u,{spy:{apply:(je,wt,Ut)=>{(je.startsWith("signIn")||je.startsWith("createUser"))&&Ut.then(St=>he.next(St))}}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Zs.Dh),l.LFG(Zs.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(br.HU),l.LFG(gx,8),l.LFG(mx,8),l.LFG(yx,8),l.LFG(_x,8),l.LFG(vx,8),l.LFG(wx,8),l.LFG($T,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Ix(n,e){return function jO(n,e=$s.z){return new hr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function HT(n,e){return Ix(n,e).pipe((0,It.U)(t=>({payload:t,type:"query"})))}function hI(n,e){return HT(n,e).pipe(ki(void 0),Wg(),(0,It.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(f=>({type:f.type,payload:f}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((f,y)=>{const b=o.find(M=>M.doc.ref.isEqual(f.ref)),C=null==t?void 0:t.payload.docs.find(M=>M.ref.isEqual(f.ref));b&&JSON.stringify(b.doc.metadata)===JSON.stringify(f.metadata)||!b&&C&&JSON.stringify(C.metadata)===JSON.stringify(f.metadata)||u.push({type:"modified",payload:{oldIndex:y,newIndex:y,type:"modified",doc:f}})}),u}))}function Cx(n,e,t){return hI(n,t).pipe(cs((r,o)=>function ZO(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function HO(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return GT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return GT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return GT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function Mw(n,e=jo.y){return n=null!=n?n:Ow,(0,Nn.e)((t,r)=>{let o,u=!0;t.subscribe(new er.Q(r,f=>{const y=e(f);(u||!n(o,y))&&(u=!1,o=y,r.next(f))}))})}(),(0,It.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function GT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function Dx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Tx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=hI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,It.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(ki(void 0),Wg(),Ar(([r,o])=>o.length>0||!r),(0,It.U)(([r,o])=>o),br.iC)}auditTrail(e){return this.stateChanges(e).pipe(cs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Dx(e);return Cx(this.query,t,this.afs.schedulers.outsideAngular).pipe(br.iC)}valueChanges(e={}){return HT(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),br.iC)}get(e){return(0,mn.D)(this.query.get(e)).pipe(br.iC)}add(e){return this.ref.add(e)}doc(e){return new Ax(this.ref.doc(e),this.afs)}}class Ax{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=Mx(r,t);return new Tx(o,u,this.afs)}snapshotChanges(){return function $O(n,e){return Ix(n,e).pipe(ki(void 0),Wg(),(0,It.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(br.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,It.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,mn.D)(this.ref.get(e)).pipe(br.iC)}}class GO{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?hI(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ar(t=>t.length>0),br.iC):hI(this.query,this.afs.schedulers.outsideAngular).pipe(br.iC)}auditTrail(e){return this.stateChanges(e).pipe(cs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Dx(e);return Cx(this.query,t,this.afs.schedulers.outsideAngular).pipe(br.iC)}valueChanges(e={}){return HT(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),br.iC)}get(e){return(0,mn.D)(this.query.get(e)).pipe(br.iC)}}const Sx=new l.OlP("angularfire2.enableFirestorePersistence"),xx=new l.OlP("angularfire2.firestore.persistenceSettings"),qO=new l.OlP("angularfire2.firestore.settings"),zO=new l.OlP("angularfire2.firestore.use-emulator");function Mx(n,e=(t=>t)){return{query:e(n),ref:n}}let Ox=(()=>{class n{constructor(t,r,o,u,f,y,b,C,M,R,z,K,he,Fe,je,wt,Ut){this.schedulers=b;const St=(0,Zs.on)(t,y,r),bt=M;R&&bx(St,y,z,he,Fe,je,K,wt),[this.firestore,this.persistenceEnabled$]=(0,Zs.cc)(`${St.name}.firestore`,"AngularFirestore",St.name,()=>{const jt=y.runOutsideAngular(()=>St.firestore());if(u&&jt.settings(u),bt&&jt.useEmulator(...bt),o&&!Da(f)){const hn=()=>{try{return(0,mn.D)(jt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Qi){return"undefined"!=typeof console&&console.warn(Qi),Je(!1)}};return[jt,y.runOutsideAngular(hn)]}return[jt,Je(!1)]},[u,bt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:f}=Mx(o,r),y=this.schedulers.ngZone.run(()=>u);return new Tx(y,f,this)}collectionGroup(t,r){const o=r||(f=>f),u=this.firestore.collectionGroup(t);return new GO(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new Ax(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Zs.Dh),l.LFG(Zs.xv,8),l.LFG(Sx,8),l.LFG(qO,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(br.HU),l.LFG(xx,8),l.LFG(zO,8),l.LFG(Ex,8),l.LFG(gx,8),l.LFG(mx,8),l.LFG(yx,8),l.LFG(_x,8),l.LFG(vx,8),l.LFG(wx,8),l.LFG($T,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),WO=(()=>{class n{constructor(){UO.Z.registerVersion("angularfire",br.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Sx,useValue:!0},{provide:xx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Ox]}),n})();function KO(n,e){if(1&n&&(l.TgZ(0,"p",19),l._uU(1),l.qZA()),2&n){const t=l.oxw();l.xp6(1),l.Oqu(t.submitMessage)}}function YO(n,e){if(1&n&&(l.TgZ(0,"p",19),l._uU(1),l.qZA()),2&n){const t=l.oxw();l.xp6(1),l.Oqu(t.submitMessage)}}let QO=(()=>{class n{constructor(t){this.firestore=t,this.isSubmit=!0,this.submitMessage=""}ngOnInit(){this.myForm=this.firestore.collection("enquiry"),this.contactForms=new jg({name:new Mr("",Af.required),email:new Mr("",[Af.required,Af.email]),mobile:new Mr("",Af.required),message:new Mr("",Af.required)})}submitmessage(){this.myForm.add(this.contactForms.value).then(t=>{this.submitMessage="Submitted Successfully"}).catch(t=>{console.log(t)}),this.isSubmit=!0,setTimeout(()=>{this.isSubmit=!1},1e4)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ox))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-contact-us"]],decls:60,vars:4,consts:[[1,"contact"],[1,"container"],[2,"font-weight","900","color","#F48574"],[2,"font-size","larger"],[1,"row","web"],[1,"col-lg-6"],[3,"formGroup"],["for","name"],["type","text","formControlName","name","placeholder","Enter your Name",1,"form-control"],["for","email"],["type","email","formControlName","email","placeholder","Enter your Email-id",1,"form-control"],["for","mobile"],["type","text","formControlName","mobile","placeholder","Enter your Mobile No.",1,"form-control"],["for","message"],["formControlName","message","placeholder","Leave your Message here",1,"form-control"],["type","reset",1,"btn","btn-primary",3,"click"],["class","submitMessage",4,"ngIf"],["src","assets/images/contact-us1.jpg","alt","",1,"contact-us"],[1,"row","mobile"],[1,"submitMessage"]],template:function(t,r){1&t&&(l.TgZ(0,"section",0),l.TgZ(1,"div",1),l._UZ(2,"br"),l.TgZ(3,"h2",2),l._uU(4,"Contact Us"),l.qZA(),l.TgZ(5,"p",3),l._uU(6,"Our Friendly Team would love to hear your Problem, "),l._UZ(7,"br"),l._uU(8," We'll give the best solution for you."),l.qZA(),l.qZA(),l._UZ(9,"br"),l.TgZ(10,"div",1),l.TgZ(11,"div",4),l.TgZ(12,"div",5),l.TgZ(13,"form",6),l.TgZ(14,"label",7),l._uU(15,"Name"),l.qZA(),l._UZ(16,"input",8),l._UZ(17,"br"),l.TgZ(18,"label",9),l._uU(19,"Email-id"),l.qZA(),l._UZ(20,"input",10),l._UZ(21,"br"),l.TgZ(22,"label",11),l._uU(23,"Contact No"),l.qZA(),l._UZ(24,"input",12),l._UZ(25,"br"),l.TgZ(26,"label",13),l._uU(27,"Message"),l.qZA(),l._UZ(28,"textarea",14),l._UZ(29,"br"),l.TgZ(30,"button",15),l.NdJ("click",function(){return r.submitmessage()}),l._uU(31,"Send"),l.qZA(),l.YNc(32,KO,2,1,"p",16),l.qZA(),l.qZA(),l.TgZ(33,"div",5),l._UZ(34,"img",17),l.qZA(),l.qZA(),l.TgZ(35,"div",18),l.TgZ(36,"div",5),l._UZ(37,"img",17),l.qZA(),l.TgZ(38,"div",5),l.TgZ(39,"form",6),l.TgZ(40,"label",7),l._uU(41,"Name"),l.qZA(),l._UZ(42,"input",8),l._UZ(43,"br"),l.TgZ(44,"label",9),l._uU(45,"Email-id"),l.qZA(),l._UZ(46,"input",10),l._UZ(47,"br"),l.TgZ(48,"label",11),l._uU(49,"Contact No"),l.qZA(),l._UZ(50,"input",12),l._UZ(51,"br"),l.TgZ(52,"label",13),l._uU(53,"Message"),l.qZA(),l._UZ(54,"textarea",14),l._UZ(55,"br"),l.TgZ(56,"button",15),l.NdJ("click",function(){return r.submitmessage()}),l._uU(57,"Send"),l.qZA(),l.YNc(58,YO,2,1,"p",16),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l._UZ(59,"br"),l.qZA()),2&t&&(l.xp6(13),l.Q6J("formGroup",r.contactForms),l.xp6(19),l.Q6J("ngIf",r.isSubmit),l.xp6(7),l.Q6J("formGroup",r.contactForms),l.xp6(19),l.Q6J("ngIf",r.isSubmit))},directives:[Zg,Mf,jd,Tf,tw,Ff,Pn],styles:[".contact[_ngcontent-%COMP%]{overflow-x:hidden}.col-6[_ngcontent-%COMP%]{padding-bottom:20px}.sumbitMessage[_ngcontent-%COMP%]{color:green;font-weight:700}.contact-us[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:20px}.mobile[_ngcontent-%COMP%]{display:none}@media screen and (max-width:480px){.mobile[_ngcontent-%COMP%]{display:block}.web[_ngcontent-%COMP%]{display:none}h2[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{text-align:center}}"]}),n})(),qT=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-home"]],decls:262,vars:0,consts:[[1,"main"],["id","home",1,"sect20"],[1,"hero"],[1,"row"],[1,"col-lg-6","he1"],[1,"he2"],[2,"color","#F48574"],[1,"he3"],[1,"btn","btn-light","he4"],[1,"col-lg-6"],["src","assets/images/Group 297.png","alt","",1,"img2"],[1,"sect30"],["src","assets/images/Group 297.png","alt","",1,"img3"],["id","services"],[1,"real"],[1,"col-lg-4"],[1,"card","real1"],[1,"card-body"],["src","assets/images/web-design 1.png","alt","",1,"web"],[1,"card-subtitle","mb-2","text-center"],[1,"card-text","text-center"],[1,"card","real2"],["src","assets/images/web-design 1 (1).png","alt","",1,"web"],[1,"card","real3"],["src","assets/images/web-design 1 (2).png","alt","",1,"web"],[1,"sect"],[1,"row","sect1"],["src","assets/images/Group 298.png","alt","",1,"grp"],[1,"col-lg-6","sect2"],[1,"btn","btn-light","sect3"],["id","how"],[1,"sec2"],[1,"sec21"],[1,"work"],[1,"row","sec22"],[1,"col-lg-3"],[1,"card","c1"],["src","assets/images/market-research (1).png","alt","",1,"warning"],[1,"card-subtitle","mb-2","text-muted"],[1,"card-text"],["src","assets/images/arrow-right 1.png","alt","",1,"sec24"],["src","assets/images/arrow-right 2.png","alt","",1,"sec23"],[1,"card","c2"],["src","assets/images/market-research (2).png","alt",""],[1,"card","c3"],["src","assets/images/market-research.png","alt",""],["src","assets/images/arrow-right 1.png","alt","",1,"sec11"],[1,"card","c4"],["src","assets/images/market-research (3).png","alt",""],[1,"sec3"],[1,"col-lg-5"],[1,"sec31"],[1,"btn","btn-light","sec32"],[1,"col-lg-7"],["src","assets/images/Group 299.png","alt","",1,"img4"],["src","assets/images/Frame 22.png","alt","",1,"img1"],[1,"sec8"],[1,"sec7"],[1,"sec81"],[1,"card","c11"],["src","assets/images/team/adi.png","alt","Card image cap",1,"card-img-top"],[1,"card-subtitle"],[1,"card","c12"],["src","assets/images/team/nisarg.png","alt","Card image cap",1,"card-img-top"],[1,"card","c13"],["src","assets/images/team/abhi.png","alt","Card image cap",1,"card-img-top"],[1,"sec12"],[1,"sec14"],[1,"card","c43"],["src","assets/images/Frame 27.png","alt","Card image cap",1,"card-img"],["src","assets/images/Frame 30.png","alt","Card image cap",1,"card-img"],[1,"card","c44"],["src","assets/images/Frame 28.png","alt","Card image cap",1,"card-img"],["src","assets/images/Frame 31.png","alt","Card image cap",1,"card-img"],[1,"card","c45"],["src","assets/images/Frame 29.png","alt","Card image cap",1,"card-img"],["src","assets/images/Frame 32.png","alt","Card image cap",1,"card-img"],[1,"sec13"],[1,"sec15"],[1,"fa-solid","fa-envelope","ic"],["type","text","placeholder","      Enter your Mail",1,"form-control","in"],[1,"btn","btn-light","b1",2,"background-color","#F48574"]],template:function(t,r){1&t&&(l.TgZ(0,"section",0),l.TgZ(1,"section",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div",4),l.TgZ(5,"h2",5),l._uU(6,"Delivering "),l.TgZ(7,"span",6),l._uU(8," IT Services"),l.qZA(),l._UZ(9,"br"),l._uU(10," For Your Bussiness"),l.qZA(),l._UZ(11,"br"),l.TgZ(12,"p",7),l._uU(13,"ABN is a professional IT firm that provides IT services mainly responsive website design & development, custom software solutions, and mobile applications. we're a crew of creatives, designers & developers who work together to create beautiful, engaging digital experiences. Our Crew is specially composed to create successfully, custom, innovative digital products from the initial concept through full product launch."),l.qZA(),l.TgZ(14,"button",8),l._uU(15,"Read More"),l.qZA(),l.qZA(),l.TgZ(16,"div",9),l._UZ(17,"img",10),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(18,"section",11),l.TgZ(19,"div",2),l.TgZ(20,"div",3),l.TgZ(21,"div",9),l._UZ(22,"img",12),l.qZA(),l.TgZ(23,"div",4),l.TgZ(24,"h2",5),l._uU(25,"Delivering "),l.TgZ(26,"span",6),l._uU(27," IT Services"),l.qZA(),l._UZ(28,"br"),l._uU(29," For Your Bussiness"),l.qZA(),l._UZ(30,"br"),l._UZ(31,"br"),l.TgZ(32,"p",7),l._uU(33,"ABN is a professional IT firm that provides IT services mainly responsive website design & development, custom software solutions, and mobile applications. we're a crew of creatives, designers & developers who work together to create beautiful, engaging digital experiences. Our Crew is specially composed to create successfully, custom, innovative digital products from the initial concept through full product launch."),l.qZA(),l.TgZ(34,"button",8),l._uU(35,"Read More"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(36,"section",13),l.TgZ(37,"div",14),l.TgZ(38,"h3"),l._uU(39,"Turn Your "),l.TgZ(40,"span",6),l._uU(41," Amazing "),l._UZ(42,"br"),l._uU(43," Ideas"),l.qZA(),l._uU(44," Into Reality"),l.qZA(),l.qZA(),l._UZ(45,"br"),l._UZ(46,"br"),l.TgZ(47,"div",3),l.TgZ(48,"div",15),l.TgZ(49,"div",16),l.TgZ(50,"div",17),l._UZ(51,"img",18),l._UZ(52,"br"),l.TgZ(53,"h5",19),l._uU(54,"Design & "),l._UZ(55,"br"),l._uU(56," Creativity "),l.qZA(),l._UZ(57,"br"),l.TgZ(58,"p",20),l._uU(59,"Creativity play a big role in how a solution to a problem is outlined, and how to identify new ways of looking at the problem"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(60,"div",15),l.TgZ(61,"div",21),l.TgZ(62,"div",17),l._UZ(63,"img",22),l._UZ(64,"br"),l.TgZ(65,"h5",19),l._uU(66,"Web "),l._UZ(67,"br"),l._uU(68," Development"),l.qZA(),l._UZ(69,"br"),l.TgZ(70,"p",20),l._uU(71,"We create, deploy, and support websites and web-based applications of any scale and complexity."),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(72,"div",15),l.TgZ(73,"div",23),l.TgZ(74,"div",17),l._UZ(75,"img",24),l._UZ(76,"br"),l.TgZ(77,"h5",19),l._uU(78,"Mobile App "),l._UZ(79,"br"),l._uU(80," Development "),l.qZA(),l._UZ(81,"br"),l.TgZ(82,"p",20),l._uU(83,"Our talent pool of mobile application developers includes highly-skilled analysts, UX experts and certified software engineers "),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(84,"section"),l.TgZ(85,"div",25),l.TgZ(86,"div"),l.TgZ(87,"div",26),l.TgZ(88,"div",9),l._UZ(89,"img",27),l.qZA(),l.TgZ(90,"div",28),l.TgZ(91,"h3"),l._uU(92,"Why Choose Us"),l.qZA(),l._UZ(93,"br"),l._UZ(94,"br"),l.TgZ(95,"p"),l._uU(96,"We place our clients\u2019 needs first, the technology "),l._UZ(97,"br"),l._uU(98," is simply a means to an end that supports growth "),l._UZ(99,"br"),l._uU(100," and success. Find out how we are different and "),l._UZ(101,"br"),l._uU(102," why we should be your IT provider of choice. "),l._UZ(103,"br"),l._uU(104," We will achieve success by adopting transparent "),l._UZ(105,"br"),l._uU(106," and honest business practices thereby generating "),l._UZ(107,"br"),l._uU(108," immense goodwill with clients, employees, our "),l._UZ(109,"br"),l._uU(110," vendors and society we operate in. "),l.qZA(),l.TgZ(111,"button",29),l._uU(112,"Read More"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(113,"section",30),l.TgZ(114,"div",31),l.TgZ(115,"div",32),l.TgZ(116,"div",33),l.TgZ(117,"h2"),l._uU(118,"Our Working "),l.TgZ(119,"span"),l._uU(120,"Process"),l.qZA(),l._uU(121," How"),l.qZA(),l.TgZ(122,"h2"),l._uU(123,"We work for our "),l.TgZ(124,"span"),l._uU(125,"customer"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(126,"div"),l.TgZ(127,"div",34),l.TgZ(128,"div",35),l.TgZ(129,"div",36),l.TgZ(130,"div",17),l._UZ(131,"img",37),l._UZ(132,"br"),l._UZ(133,"br"),l.TgZ(134,"h4",38),l._uU(135,"Define"),l.qZA(),l.TgZ(136,"p",39),l._uU(137,"In this stage you accumulate the information gathered during the Empathize stage and analyse them to define the core problems."),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(138,"div",35),l._UZ(139,"img",40),l._UZ(140,"img",41),l.TgZ(141,"div",42),l.TgZ(142,"div",17),l._UZ(143,"img",43),l._UZ(144,"br"),l._UZ(145,"br"),l.TgZ(146,"h4",38),l._uU(147,"Ideate"),l.qZA(),l.TgZ(148,"p",39),l._uU(149,"Now, you need to think outside the box and look for alternatives solutions to the problem statements created."),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(150,"div",35),l.TgZ(151,"div",44),l.TgZ(152,"div",17),l._UZ(153,"img",45),l._UZ(154,"br"),l._UZ(155,"br"),l.TgZ(156,"h4",38),l._uU(157,"Prototype"),l.qZA(),l.TgZ(158,"p",39),l._uU(159,"This is an experimental phase where you try the best feasible solution for each problem found"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(160,"div",35),l._UZ(161,"img",46),l.TgZ(162,"div",47),l.TgZ(163,"div",17),l._UZ(164,"img",48),l._UZ(165,"br"),l.TgZ(166,"h4",38),l._uU(167,"Test"),l.qZA(),l.TgZ(168,"p",39),l._uU(169,"The prototypes are tested rigorously in this final phase. The results can also be used to redefine any further problems encountered."),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l._UZ(170,"br"),l._UZ(171,"br"),l.TgZ(172,"section"),l.TgZ(173,"div",49),l.TgZ(174,"div",3),l.TgZ(175,"div",50),l.TgZ(176,"h3",51),l._uU(177,"Our Mission"),l.qZA(),l._UZ(178,"br"),l._UZ(179,"br"),l.TgZ(180,"p",51),l._uU(181,"Abn Solutions is a premium IT service provider located in Gujarat. Our Company is offering high quality products/services in Web Development, Web Hosting , Software Development & IT Training sectors. Our products are more efficient, reliable and high performance. With same sincerity and vision to create better and more skilled workforce in the industry, we are offering our specially designed training courses which are result oriented and targeted towards specialization in development. "),l.qZA(),l._UZ(182,"br"),l._UZ(183,"br"),l.TgZ(184,"button",52),l._uU(185,"Read More"),l.qZA(),l.qZA(),l.TgZ(186,"div",53),l._UZ(187,"img",54),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(188,"section"),l.TgZ(189,"div"),l._UZ(190,"img",55),l.qZA(),l.qZA(),l._UZ(191,"br"),l.TgZ(192,"section"),l.TgZ(193,"div",56),l.TgZ(194,"div",57),l.TgZ(195,"div"),l.TgZ(196,"h2",58),l._uU(197,"Our Team Member"),l.qZA(),l.qZA(),l._UZ(198,"br"),l.TgZ(199,"div",3),l.TgZ(200,"div",15),l.TgZ(201,"div",59),l._UZ(202,"img",60),l.TgZ(203,"div",17),l.TgZ(204,"h4",61),l._uU(205,"Aditya Patel"),l.qZA(),l.TgZ(206,"p",39),l._uU(207,"UI/UX Designer"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(208,"div",15),l.TgZ(209,"div",62),l._UZ(210,"img",63),l.TgZ(211,"div",17),l.TgZ(212,"h4",61),l._uU(213,"Nisarg Patel"),l.qZA(),l.TgZ(214,"p",39),l._uU(215,"Web Developer"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(216,"div",15),l.TgZ(217,"div",64),l._UZ(218,"img",65),l.TgZ(219,"div",17),l.TgZ(220,"h4",61),l._uU(221,"Abhijit Rath"),l.qZA(),l.TgZ(222,"p",39),l._uU(223,"Android Developer"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l._UZ(224,"br"),l._UZ(225,"br"),l.TgZ(226,"section"),l.TgZ(227,"div",66),l.TgZ(228,"div",67),l.TgZ(229,"h2"),l._uU(230,"Our Portfolio"),l.qZA(),l.TgZ(231,"p"),l._uU(232,"Your portfolio can be a space for you to express yourself, amaze any future employers, and get your work noticed."),l.qZA(),l.qZA(),l.TgZ(233,"div",3),l.TgZ(234,"div",15),l.TgZ(235,"div",68),l._UZ(236,"img",69),l._UZ(237,"br"),l._UZ(238,"img",70),l.qZA(),l.qZA(),l.TgZ(239,"div",15),l.TgZ(240,"div",71),l._UZ(241,"img",72),l._UZ(242,"br"),l._UZ(243,"img",73),l.qZA(),l.qZA(),l.TgZ(244,"div",15),l.TgZ(245,"div",74),l._UZ(246,"img",75),l._UZ(247,"br"),l._UZ(248,"img",76),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l._UZ(249,"br"),l._UZ(250,"br"),l.qZA(),l.TgZ(251,"section"),l.TgZ(252,"div",77),l.TgZ(253,"h1",78),l._uU(254,"Contact Us"),l.qZA(),l.TgZ(255,"form"),l.TgZ(256,"span"),l._UZ(257,"i",79),l._UZ(258,"input",80),l.TgZ(259,"button",81),l._uU(260,"Submit"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l._UZ(261,"br"),l.qZA(),l.qZA())},directives:[Zg,Mf,Bd],styles:[".main[_ngcontent-%COMP%]{overflow-x:hidden}.sect30[_ngcontent-%COMP%]{display:none}.hero[_ngcontent-%COMP%]{margin-top:100px}.he1[_ngcontent-%COMP%]{margin-top:70px}.he2[_ngcontent-%COMP%], .he3[_ngcontent-%COMP%]{margin-left:60px}.he4[_ngcontent-%COMP%]{background-color:#f48574;color:#fff;margin-left:60px;padding:8px 110px}.real[_ngcontent-%COMP%]{margin-top:50px;text-align:center}.real1[_ngcontent-%COMP%]{width:295px;height:420px;margin-left:205px;background-color:#fff;border-radius:40px;border:none}.real2[_ngcontent-%COMP%]{width:295px;height:420px;margin-left:auto;margin-right:auto;background-color:#fff;border-radius:40px;border:none}.real3[_ngcontent-%COMP%]{width:295px;height:420px;margin-left:-10px;background-color:#fff;border:none;border-radius:40px}.sect[_ngcontent-%COMP%]{background-image:url(Ellipse\\ 411.d3caca4ecd985c66.png);background-repeat:no-repeat;background-position:right;height:500px}.sect1[_ngcontent-%COMP%]{margin-top:80px}.sect2[_ngcontent-%COMP%]{padding-top:50px}.sect3[_ngcontent-%COMP%]{background-color:#f48574;color:#fff;padding:8px 160px;margin-top:50px}span[_ngcontent-%COMP%]{color:#f48574}.work[_ngcontent-%COMP%]{text-align:center;margin-top:50px}.sec21[_ngcontent-%COMP%]{background-image:url(Ellipse\\ 410.9155738c5c5bf7c4.png);background-repeat:no-repeat;height:550px;margin-top:120px}.sec2[_ngcontent-%COMP%]{background-image:url(Group\\ 294.a1b4a5de23d7fe8f.png);background-repeat:no-repeat;background-position:bottom;background-position-x:right}.sec22[_ngcontent-%COMP%]{margin-top:65px}.sec23[_ngcontent-%COMP%]{margin-left:230px}.web[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;margin-top:70px}.grp[_ngcontent-%COMP%]{padding-top:25px}.card[_ngcontent-%COMP%]{box-shadow:0 10px 50px 1px #fcb49b1f}.c1[_ngcontent-%COMP%]{border-radius:40px;box-shadow:0 4px 30px #f485743d;width:290px;height:290px;margin-left:82px;background-color:#fff;border:none}.c2[_ngcontent-%COMP%]{border-radius:40px;box-shadow:0 4px 30px #f485743d;width:290px;height:290px;margin-left:50px;background-color:#fff;border:none}.c3[_ngcontent-%COMP%]{border-radius:40px;box-shadow:0 4px 30px #f485743d;width:290px;height:290px;margin-left:20px;background-color:#fff;border:none}.c4[_ngcontent-%COMP%]{border-radius:40px;box-shadow:0 4px 30px #f485743d;width:290px;height:290px;margin-left:-10px;background-color:#fff;border:none}.sec3[_ngcontent-%COMP%]{background-image:url(Ellipse\\ 412.b5b48784710fd8e5.png);background-repeat:no-repeat}.sec31[_ngcontent-%COMP%]{margin-left:50px}.sec32[_ngcontent-%COMP%]{margin-left:50px;background-color:#f48574;color:#fff;padding:5px 110px}.sec5[_ngcontent-%COMP%]{background-image:url(Frame\\ 22.97258e7d732a4663.png);background-repeat:no-repeat;background-position:center;width:1240px;height:704px;margin-top:50px;margin-left:150px}.sec7[_ngcontent-%COMP%]{background-image:url(Ellipse\\ 413.837f95f5b33d95b7.png);background-repeat:no-repeat;background-position:right;margin-top:70px}.sec8[_ngcontent-%COMP%]{background-image:url(Group\\ 294.a1b4a5de23d7fe8f.png);background-repeat:no-repeat;background-position:bottom;background-position-x:left}.sec81[_ngcontent-%COMP%]{text-align:center}.c11[_ngcontent-%COMP%]{border-radius:40px;box-shadow:0 20px 60px 1px #fcb49b33;margin-left:170px;border:none;width:18rem}.c12[_ngcontent-%COMP%]{border-radius:40px;box-shadow:0 20px 60px 1px #fcb49b33;margin-left:70px;border:none;width:18rem}.c13[_ngcontent-%COMP%]{border-radius:40px;box-shadow:0 20px 60px 1px #fcb49b33;margin-left:-25px;border:none;width:18rem}.c43[_ngcontent-%COMP%]{border:none;margin-left:300px;margin-top:20px;width:18rem}.c44[_ngcontent-%COMP%]{border:none;margin-left:auto;margin-right:auto;margin-top:20px;width:18rem}.c45[_ngcontent-%COMP%]{border:none;margin-left:-100px;margin-top:20px;width:18rem}.sec12[_ngcontent-%COMP%]{background-image:url(Ellipse\\ 410.9155738c5c5bf7c4.png);background-repeat:no-repeat;margin-top:50px}.sec14[_ngcontent-%COMP%]{text-align:center}.sec15[_ngcontent-%COMP%]{text-align:center;color:#fff;margin-top:50px;padding-top:50px}.sec13[_ngcontent-%COMP%]{background-image:url(Subscribe.5d7ac49802389d32.png);background-repeat:no-repeat;background-position:center;width:100%;height:100%}.in[_ngcontent-%COMP%]{border-radius:10px;border:none;width:624px;height:58px;margin-top:100px;margin-left:430px}.ic[_ngcontent-%COMP%]{position:absolute;left:440px;margin-top:22px;color:#000}.b1[_ngcontent-%COMP%]{margin-left:940px;margin-top:-86px;color:#fff;padding:10px 25px}.ch1[_ngcontent-%COMP%]{margin-top:20px;margin-left:20px}.img1[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;margin-top:50px}@media screen and (max-width:768px){.sect20[_ngcontent-%COMP%]{display:none}.sect30[_ngcontent-%COMP%]{display:block}.hero[_ngcontent-%COMP%], .he1[_ngcontent-%COMP%]{margin-top:0}.he2[_ngcontent-%COMP%], .he3[_ngcontent-%COMP%]{text-align:center;margin-left:0}.he4[_ngcontent-%COMP%]{background-color:#f48574;margin-left:250px;padding:8px 110px}.img3[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto}.real[_ngcontent-%COMP%]{margin-top:50px;text-align:center}.real1[_ngcontent-%COMP%], .real2[_ngcontent-%COMP%]{width:295px;height:420px;margin-left:auto;margin-right:auto;margin-bottom:25px;background-color:#fff;border-radius:40px;border:none}.real3[_ngcontent-%COMP%]{width:295px;height:420px;margin-left:auto;margin-right:auto;background-color:#fff;border:none;border-radius:40px}.sect[_ngcontent-%COMP%]{background-image:url(Ellipse\\ 411.d3caca4ecd985c66.png);background-repeat:no-repeat;background-position:right;height:auto}.sect1[_ngcontent-%COMP%]{margin-top:50px}.sect2[_ngcontent-%COMP%]{text-align:center;padding-top:0}.sect3[_ngcontent-%COMP%]{background-color:#f48574;padding:8px 160px;margin-top:0}span[_ngcontent-%COMP%]{color:#f48574}.work[_ngcontent-%COMP%]{text-align:center;margin-top:50px}.sec21[_ngcontent-%COMP%]{background-image:url(Ellipse\\ 410.9155738c5c5bf7c4.png);background-repeat:no-repeat;height:auto;margin-top:120px}.sec2[_ngcontent-%COMP%]{background-image:url(Group\\ 294.a1b4a5de23d7fe8f.png);background-repeat:no-repeat;background-position:bottom;background-position-x:right}.sec22[_ngcontent-%COMP%]{margin-top:65px}.sec23[_ngcontent-%COMP%]{display:none;margin-left:0}.web[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;margin-top:70px}.grp[_ngcontent-%COMP%]{padding-top:25px;display:block;margin-left:auto;margin-right:auto}.card[_ngcontent-%COMP%]{box-shadow:0 10px 50px 1px #fcb49b1f}.c1[_ngcontent-%COMP%], .c2[_ngcontent-%COMP%], .c3[_ngcontent-%COMP%]{border-radius:40px;box-shadow:0 4px 30px #f485743d;width:290px;height:290px;margin-left:auto;margin-right:auto;margin-bottom:25px;background-color:#fff;border:none}.c4[_ngcontent-%COMP%]{border-radius:40px;box-shadow:0 4px 30px #f485743d;width:290px;height:290px;margin-left:auto;margin-right:auto;background-color:#fff;border:none}.sec3[_ngcontent-%COMP%]{background-image:url(Ellipse\\ 412.b5b48784710fd8e5.png);background-repeat:no-repeat}.sec31[_ngcontent-%COMP%]{text-align:center;margin-left:0}.sec32[_ngcontent-%COMP%]{margin-left:250px;margin-bottom:45px;background-color:#f48574;padding:5px 110px}.img4[_ngcontent-%COMP%]{width:100%;height:100%}.sec5[_ngcontent-%COMP%]{background-image:url(Frame\\ 22.97258e7d732a4663.png);background-repeat:no-repeat;background-position:center;width:1240px;height:704px;margin-top:50px;margin-left:150px}.sec7[_ngcontent-%COMP%]{background-image:url(Ellipse\\ 413.837f95f5b33d95b7.png);background-repeat:no-repeat;background-position:right;margin-top:20px}.sec8[_ngcontent-%COMP%]{background-image:url(Group\\ 294.a1b4a5de23d7fe8f.png);background-repeat:no-repeat;background-position:bottom;background-position-x:left}.sec81[_ngcontent-%COMP%]{text-align:center}.c11[_ngcontent-%COMP%], .c12[_ngcontent-%COMP%]{border-radius:40px;box-shadow:0 20px 60px 1px #fcb49b33;margin-left:auto;margin-right:auto;margin-bottom:25px;border:none;width:18rem}.c13[_ngcontent-%COMP%]{border-radius:40px;box-shadow:0 20px 60px 1px #fcb49b33;margin-left:auto;margin-right:auto;border:none;width:18rem}.c43[_ngcontent-%COMP%], .c44[_ngcontent-%COMP%], .c45[_ngcontent-%COMP%]{border:none;margin-left:auto;margin-right:auto;margin-top:20px;width:18rem}.sec12[_ngcontent-%COMP%]{background-image:url(Ellipse\\ 410.9155738c5c5bf7c4.png);background-repeat:no-repeat;margin-top:50px}.sec14[_ngcontent-%COMP%]{text-align:center}.sec15[_ngcontent-%COMP%]{text-align:center;color:#fff;margin-top:50px;padding-top:50px}.sec13[_ngcontent-%COMP%]{display:none}.in[_ngcontent-%COMP%]{border-radius:10px;border:none;width:624px;height:58px;margin-top:130px;margin-left:75px}.ic[_ngcontent-%COMP%]{position:absolute;left:90px;margin-top:22px;color:#000}.b1[_ngcontent-%COMP%]{margin-left:585px;margin-top:-86px;color:#fff;padding:10px 25px}.ch1[_ngcontent-%COMP%]{margin-top:20px;margin-left:20px}.img1[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;margin-top:50px;width:100%;height:100%}}@media screen and (max-width:480px){.sect20[_ngcontent-%COMP%]{display:none}.sect30[_ngcontent-%COMP%]{display:block}.hero[_ngcontent-%COMP%], .he1[_ngcontent-%COMP%]{margin-top:0}.he2[_ngcontent-%COMP%]{text-align:center;margin-left:0;margin-top:40px}.he3[_ngcontent-%COMP%]{text-align:center;font-size:14px;margin-left:0}.he4[_ngcontent-%COMP%]{background-color:#f48574;color:#fff;margin-left:45px;padding:8px 110px}.img3[_ngcontent-%COMP%]{width:100%;height:100%}.real[_ngcontent-%COMP%]{margin-top:50px;text-align:center}.real1[_ngcontent-%COMP%], .real2[_ngcontent-%COMP%]{width:295px;height:420px;margin-left:auto;margin-right:auto;margin-bottom:20px;background-color:#fff;border-radius:40px;border:none}.real3[_ngcontent-%COMP%]{width:295px;height:420px;margin-left:auto;margin-right:auto;background-color:#fff;border:none;border-radius:40px}.sect[_ngcontent-%COMP%]{background-image:url(Ellipse\\ 411.d3caca4ecd985c66.png);background-repeat:no-repeat;background-position:right;height:auto}.sect1[_ngcontent-%COMP%]{margin-top:80px}.sect2[_ngcontent-%COMP%]{text-align:center;padding-top:0}.sect3[_ngcontent-%COMP%]{background-color:#f48574;color:#fff;padding:8px 120px;margin-top:0}span[_ngcontent-%COMP%]{color:#f48574}.work[_ngcontent-%COMP%]{text-align:center;margin-top:50px}.sec21[_ngcontent-%COMP%]{background-image:url(Ellipse\\ 410.9155738c5c5bf7c4.png);background-repeat:no-repeat;height:auto;margin-top:50px}.sec2[_ngcontent-%COMP%]{background-image:url(Group\\ 294.a1b4a5de23d7fe8f.png);background-repeat:no-repeat;background-position:bottom;background-position-x:right}.sec22[_ngcontent-%COMP%]{margin-top:65px}.sec23[_ngcontent-%COMP%]{display:none;margin-left:0}.sec24[_ngcontent-%COMP%]{display:none}.web[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;margin-top:70px}.grp[_ngcontent-%COMP%]{padding-top:25px;width:100%;height:100%}.card[_ngcontent-%COMP%]{box-shadow:0 10px 50px 1px #fcb49b1f}.c1[_ngcontent-%COMP%], .c2[_ngcontent-%COMP%], .c3[_ngcontent-%COMP%]{border-radius:40px;box-shadow:0 4px 30px #f485743d;width:290px;height:290px;margin-left:auto;margin-right:auto;margin-bottom:20px;background-color:#fff;border:none}.c4[_ngcontent-%COMP%]{border-radius:40px;box-shadow:0 4px 30px #f485743d;width:290px;height:290px;margin-left:auto;margin-right:auto;background-color:#fff;border:none}.sec3[_ngcontent-%COMP%]{background-image:url(Ellipse\\ 412.b5b48784710fd8e5.png);background-repeat:no-repeat}.sec31[_ngcontent-%COMP%]{text-align:center;margin-left:0}.sec32[_ngcontent-%COMP%]{margin-left:45px;margin-bottom:35px;background-color:#f48574;color:#fff;padding:5px 110px}.img4[_ngcontent-%COMP%]{width:100%;height:100%}.sec5[_ngcontent-%COMP%]{background-image:url(Frame\\ 22.97258e7d732a4663.png);background-repeat:no-repeat;background-position:center;width:1240px;height:704px;margin-top:50px;margin-left:150px}.sec7[_ngcontent-%COMP%]{background-image:url(Ellipse\\ 413.837f95f5b33d95b7.png);background-repeat:no-repeat;background-position:right;margin-top:0}.sec8[_ngcontent-%COMP%]{background-image:url(Group\\ 294.a1b4a5de23d7fe8f.png);background-repeat:no-repeat;background-position:bottom;background-position-x:left}.sec81[_ngcontent-%COMP%]{text-align:center}.c11[_ngcontent-%COMP%], .c12[_ngcontent-%COMP%]{border-radius:40px;box-shadow:0 20px 60px 1px #fcb49b33;margin-left:auto;margin-right:auto;margin-bottom:20px;border:none;width:18rem}.c13[_ngcontent-%COMP%]{border-radius:40px;box-shadow:0 20px 60px 1px #fcb49b33;margin-left:auto;margin-right:auto;border:none;width:18rem}.c43[_ngcontent-%COMP%], .c44[_ngcontent-%COMP%], .c45[_ngcontent-%COMP%]{border:none;margin-left:auto;margin-right:auto;margin-top:20px;width:18rem}.sec12[_ngcontent-%COMP%]{background-image:url(Ellipse\\ 410.9155738c5c5bf7c4.png);background-repeat:no-repeat;margin-top:0}.sec14[_ngcontent-%COMP%]{text-align:center}.sec15[_ngcontent-%COMP%]{text-align:center;color:#fff;margin-top:0;padding-top:20px}.sec13[_ngcontent-%COMP%]{background-image:url(Subscribe1.409894211f3f43d5.png);background-repeat:no-repeat;background-position:center;background-attachment:fixed;width:100%;height:100%;margin-left:0}.in[_ngcontent-%COMP%]{border-radius:5px;border:none;width:274px;height:30px;margin-top:0;margin-left:73px}.ic[_ngcontent-%COMP%]{position:absolute;left:85px;margin-top:8px;color:#000}.b1[_ngcontent-%COMP%]{margin-left:273px;margin-top:-57px;color:#fff;padding:0 5px}.ch1[_ngcontent-%COMP%]{margin-top:20px;margin-left:20px}.img1[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;margin-top:50px;width:100%;height:100%}.sec11[_ngcontent-%COMP%]{display:none}}"]}),n})();const JO=[{path:"#",component:qT},{path:"",component:qT},{path:"home",component:qT},{path:"contact",component:QO}];let XO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[tt.forRoot(JO)],tt]}),n})(),eR=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-header"]],decls:26,vars:2,consts:[[1,"head"],[1,"background"],[1,"navbar","navbar-expand-lg","navbar-light"],[1,"container-fluid"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarTogglerDemo03","aria-controls","navbarTogglerDemo03","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["src","assets/images/Fox_Coder_Logo__2_-removebg-preview 1.png","alt","","width","61","height","57",1,"d-inline-block","align-text-top","img1"],["href","#",1,"navbar-brand","c1"],["id","navbarTogglerDemo03",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page",1,"nav-link","active",3,"routerLink"],["href","#how",1,"nav-link"],["href","#services",1,"nav-link"],[1,"nav-link",3,"routerLink"],[1,"d-flex"],["type","submit",1,"btn","btn-light","b1"]],template:function(t,r){1&t&&(l.TgZ(0,"section",0),l.TgZ(1,"div",1),l.TgZ(2,"nav",2),l.TgZ(3,"div",3),l.TgZ(4,"button",4),l._UZ(5,"span",5),l.qZA(),l._UZ(6,"img",6),l.TgZ(7,"a",7),l._uU(8,"ABN Solutions"),l.qZA(),l.TgZ(9,"div",8),l.TgZ(10,"ul",9),l.TgZ(11,"li",10),l.TgZ(12,"a",11),l._uU(13,"Home"),l.qZA(),l.qZA(),l.TgZ(14,"li",10),l.TgZ(15,"a",12),l._uU(16,"How we work"),l.qZA(),l.qZA(),l.TgZ(17,"li",10),l.TgZ(18,"a",13),l._uU(19,"Services"),l.qZA(),l.qZA(),l.TgZ(20,"li",10),l.TgZ(21,"a",14),l._uU(22,"Contact Us"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(23,"form",15),l.TgZ(24,"button",16),l._uU(25,"Get Quote"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(12),l.Q6J("routerLink","home"),l.xp6(9),l.Q6J("routerLink","contact"))},directives:[Kc,Zg,Mf,Bd],styles:[".head[_ngcontent-%COMP%]{overflow-x:hidden}ul[_ngcontent-%COMP%]{list-style-type:none;padding-left:300px}li[_ngcontent-%COMP%]{margin-left:35px}.b1[_ngcontent-%COMP%]{margin-right:120px;padding:3px 10px;color:#fff;background-color:#f48574}.c1[_ngcontent-%COMP%]{padding-left:15px}.img1[_ngcontent-%COMP%]{margin-left:110px}@media screen and (max-width:768px){ul[_ngcontent-%COMP%]{list-style-type:none;padding-left:0}li[_ngcontent-%COMP%]{text-align:center;margin-left:0}.b1[_ngcontent-%COMP%]{margin-left:325px;margin-right:0;padding:3px 10px;color:#fff;background-color:#f48574}.c1[_ngcontent-%COMP%]{padding-left:0}.img1[_ngcontent-%COMP%]{margin-left:450px}}@media screen and (max-width:480px){ul[_ngcontent-%COMP%]{list-style-type:none;padding-left:0}li[_ngcontent-%COMP%]{text-align:center;margin-left:0}.b1[_ngcontent-%COMP%]{display:none;margin-left:180px;margin-right:0;padding:3px 10px;color:#fff;background-color:#f48574}.c1[_ngcontent-%COMP%]{padding-left:0;font-size:16px}.img1[_ngcontent-%COMP%]{margin-left:100px}}"]}),n})(),tR=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-footer"]],decls:71,vars:1,consts:[[1,"footer"],[1,"sec2"],[1,"row"],[1,"col-lg-3","abn"],[1,"fa-brands","fa-facebook-f"],[1,"fa-brands","fa-instagram"],[1,"fa-brands","fa-twitter"],[1,"col-lg-3","abn1"],["href","#home"],["href","#how"],["href","#services"],[3,"routerLink"],[1,"col-lg-3","abn2"],[1,"col-lg-3","abn3"],[1,"sec"],[1,"col-lg-6"],[1,"text-muted","copy"],[1,"text-muted","term"]],template:function(t,r){1&t&&(l.TgZ(0,"section",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"ul"),l.TgZ(5,"li"),l.TgZ(6,"h2"),l._uU(7,"Abn Solutions"),l.qZA(),l.qZA(),l.TgZ(8,"li"),l.TgZ(9,"p"),l._uU(10,"We Provide best It "),l._UZ(11,"br"),l._uU(12," Solutions"),l.qZA(),l.qZA(),l.TgZ(13,"li"),l._UZ(14,"i",4),l._uU(15,"\xa0\xa0\xa0"),l._UZ(16,"i",5),l._uU(17,"\xa0\xa0\xa0"),l._UZ(18,"i",6),l.qZA(),l.qZA(),l.qZA(),l.TgZ(19,"div",7),l.TgZ(20,"ul"),l.TgZ(21,"li"),l.TgZ(22,"h4"),l._uU(23,"Quick links"),l.qZA(),l.qZA(),l.TgZ(24,"li"),l.TgZ(25,"a",8),l._uU(26,"Home"),l.qZA(),l.qZA(),l.TgZ(27,"li"),l.TgZ(28,"a",9),l._uU(29,"How we work"),l.qZA(),l.qZA(),l.TgZ(30,"li"),l.TgZ(31,"a",10),l._uU(32,"Services"),l.qZA(),l.qZA(),l.TgZ(33,"li"),l.TgZ(34,"a",11),l._uU(35,"Contact Us"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(36,"div",12),l.TgZ(37,"ul"),l.TgZ(38,"li"),l.TgZ(39,"h4"),l._uU(40,"Contact"),l.qZA(),l.qZA(),l.TgZ(41,"li"),l._uU(42,"Help/FAQ"),l.qZA(),l.TgZ(43,"li"),l._uU(44,"Contact No: "),l._UZ(45,"br"),l._uU(46," 7046102173 "),l._UZ(47,"br"),l._uU(48," 8460805960"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(49,"div",13),l.TgZ(50,"ul"),l.TgZ(51,"li"),l.TgZ(52,"h4"),l._uU(53,"More"),l.qZA(),l.qZA(),l.TgZ(54,"li"),l.TgZ(55,"p"),l._uU(56,"Press Centre"),l.qZA(),l.qZA(),l.TgZ(57,"li"),l.TgZ(58,"p"),l._uU(59,"Our Blog"),l.qZA(),l.qZA(),l.TgZ(60,"li"),l.TgZ(61,"p"),l._uU(62,"Low fare tips"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(63,"div",14),l.TgZ(64,"div",2),l.TgZ(65,"div",15),l.TgZ(66,"p",16),l._uU(67,"Copyright, ABN SOLUTIONS 2022. All rights reserved."),l.qZA(),l.qZA(),l.TgZ(68,"div",15),l.TgZ(69,"p",17),l._uU(70,"Terms & Conditions"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(34),l.Q6J("routerLink","contact"))},directives:[Kc],styles:[".footer[_ngcontent-%COMP%]{background-color:#1e1e1e;color:#fff;height:350px;overflow-x:hidden;overflow-y:hidden}ul[_ngcontent-%COMP%]{list-style-type:none}.sec2[_ngcontent-%COMP%]{padding-top:100px}.sec[_ngcontent-%COMP%]{padding-top:50px}.term[_ngcontent-%COMP%]{margin-left:450px}.copy[_ngcontent-%COMP%]{margin-left:80px}li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff}@media screen and (max-width:768px){.footer[_ngcontent-%COMP%]{background-color:#1e1e1e;color:#fff;height:650px}ul[_ngcontent-%COMP%]{list-style-type:none}.sec2[_ngcontent-%COMP%], .sec[_ngcontent-%COMP%]{text-align:center;padding-top:0}.term[_ngcontent-%COMP%], .copy[_ngcontent-%COMP%]{text-align:center;margin-left:0}}@media screen and (max-width:480px){.footer[_ngcontent-%COMP%]{background-color:#1e1e1e;color:#fff;height:620px}ul[_ngcontent-%COMP%]{list-style-type:none}.sec2[_ngcontent-%COMP%], .sec[_ngcontent-%COMP%]{text-align:center;padding-top:0}.term[_ngcontent-%COMP%], .copy[_ngcontent-%COMP%]{text-align:center;margin-left:0}}"]}),n})();function nR(n,e){1&n&&l._UZ(0,"app-header")}function rR(n,e){1&n&&l._UZ(0,"app-footer")}let iR=(()=>{class n{constructor(){this.title="abn",this.showHeader=!0,this.showFooter=!0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:2,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(l.YNc(0,nR,1,0,"app-header",0),l._UZ(1,"router-outlet"),l.YNc(2,rR,1,0,"app-footer",0)),2&t&&(l.Q6J("ngIf",r.showHeader),l.xp6(2),l.Q6J("ngIf",r.showFooter))},directives:[Pn,eR,Id,tR],styles:[""]}),n})();const Rx_firebaseConfig={apiKey:"AIzaSyAqlE_TKvQl36NJw3OIvGcOE3nITW92DOo",authDomain:"abnsolutions-8f0f2.firebaseapp.com",projectId:"abnsolutions-8f0f2",storageBucket:"abnsolutions-8f0f2.appspot.com",messagingSenderId:"469357806534",appId:"1:469357806534:web:484ba7c48e73734e7328c7"};let sR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[iR]}),n.\u0275inj=l.cJS({providers:[],imports:[[pc,XO,$d,FI,Zs.hO.initializeApp(Rx_firebaseConfig),WO]]}),n})();(0,l.G48)(),Uo().bootstrapModule(sR).catch(n=>console.error(n))},5867:(We,ve,P)=>{P.d(ve,{C6:()=>l.getApps,Mq:()=>l.getApp});var l=P(9681);(0,l.registerVersion)("firebase","9.9.0","app")},127:(We,ve,P)=>{P.d(ve,{Z:()=>l.Z});var l=P(3942);l.Z.registerVersion("firebase","9.9.0","app-compat")},1121:(We,ve,P)=>{P.r(ve);var l=P(5861),J=P(3942),N=P(2090),ie=P(9681);function se(m,h){var p={};for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&h.indexOf(v)<0&&(p[v]=m[v]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(v=Object.getOwnPropertySymbols(m);D<v.length;D++)h.indexOf(v[D])<0&&Object.prototype.propertyIsEnumerable.call(m,v[D])&&(p[v[D]]=m[v[D]])}return p}var te=P(1877),ft=P(4859);const rn=function Jt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Gr=function sr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},qr=new N.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),vs=new te.Yd("@firebase/auth");function Cr(m,...h){vs.logLevel<=te.in.ERROR&&vs.error(`Auth (${ie.SDK_VERSION}): ${m}`,...h)}function Ht(m,...h){throw _r(m,...h)}function An(m,...h){return _r(m,...h)}function Ji(m,h,p){const v=Object.assign(Object.assign({},Gr()),{[h]:p});return new N.LL("auth","Firebase",v).create(h,{appName:m.name})}function zr(m,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&Ht(m,"argument-error"),Ji(m,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _r(m,...h){if("string"!=typeof m){const p=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=m.name),m._errorFactory.create(p,...v)}return qr.create(m,...h)}function Re(m,h,...p){if(!m)throw _r(h,...p)}function st(m){const h="INTERNAL ASSERTION FAILED: "+m;throw Cr(h),new Error(h)}function Sn(m,h){m||st(h)}const xn=new Map;function Xt(m){Sn(m instanceof Function,"Expected a class definition");let h=xn.get(m);return h?(Sn(h instanceof m,"Instance stored in cache mismatched with class"),h):(h=new m,xn.set(m,h),h)}function Mn(){var m;return"undefined"!=typeof self&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function wn(){return"http:"===Wr()||"https:"===Wr()}function Wr(){var m;return"undefined"!=typeof self&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class it{constructor(h,p){this.shortDelay=h,this.longDelay=p,Sn(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,N.uI)()||(0,N.b$)()}get(){return function lu(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(wn()||(0,N.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function pt(m,h){Sn(m.emulator,"Emulator should always be set here");const{url:p}=m.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class ws{static initialize(h,p,v){this.fetchImpl=h,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void st("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void st("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void st("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ci={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ft=new it(3e4,6e4);function sn(m,h){return m.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:m.tenantId}):h}function $t(m,h,p,v){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,l.Z)(function*(m,h,p,v,D={}){return ut(m,D,(0,l.Z)(function*(){let S={},L={};v&&("GET"===h?L=v:S={body:JSON.stringify(v)});const Q=(0,N.xO)(Object.assign({key:m.config.apiKey},L)).slice(1),xe=yield m._getAdditionalHeaders();return xe["Content-Type"]="application/json",m.languageCode&&(xe["X-Firebase-Locale"]=m.languageCode),ws.fetch()(V(m,m.config.apiHost,p,Q),Object.assign({method:h,headers:xe,referrerPolicy:"no-referrer"},S))}))})).apply(this,arguments)}function ut(m,h,p){return Di.apply(this,arguments)}function Di(){return(Di=(0,l.Z)(function*(m,h,p){m._canInitEmulator=!1;const v=Object.assign(Object.assign({},Ci),h);try{const D=new B(m),S=yield Promise.race([p(),D.promise]);D.clearNetworkTimeout();const L=yield S.json();if("needConfirmation"in L)throw G(m,"account-exists-with-different-credential",L);if(S.ok&&!("errorMessage"in L))return L;{const Q=S.ok?L.errorMessage:L.error.message,[xe,De]=Q.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===xe)throw G(m,"credential-already-in-use",L);if("EMAIL_EXISTS"===xe)throw G(m,"email-already-in-use",L);if("USER_DISABLED"===xe)throw G(m,"user-disabled",L);const Ye=v[xe]||xe.toLowerCase().replace(/[_\s]+/g,"-");if(De)throw Ji(m,Ye,De);Ht(m,Ye)}}catch(D){if(D instanceof N.ZR)throw D;Ht(m,"network-request-failed")}})).apply(this,arguments)}function U(m,h,p,v){return H.apply(this,arguments)}function H(){return(H=(0,l.Z)(function*(m,h,p,v,D={}){const S=yield $t(m,h,p,v,D);return"mfaPendingCredential"in S&&Ht(m,"multi-factor-auth-required",{_serverResponse:S}),S})).apply(this,arguments)}function V(m,h,p,v){const D=`${h}${p}?${v}`;return m.config.emulator?pt(m.config,D):`${m.config.apiScheme}://${D}`}class B{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(An(this.auth,"network-request-failed")),Ft.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function G(m,h,p){const v={appName:m.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const D=An(m,h,v);return D.customData._tokenResponse=p,D}function $e(){return($e=(0,l.Z)(function*(m,h){return $t(m,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function gt(m,h){return qt.apply(this,arguments)}function qt(){return(qt=(0,l.Z)(function*(m,h){return $t(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function tn(m,h){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,l.Z)(function*(m,h){return $t(m,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Pt(m){if(m)try{const h=new Date(Number(m));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function To(){return(To=(0,l.Z)(function*(m,h=!1){const p=(0,N.m9)(m),v=yield p.getIdToken(h),D=On(v);Re(D&&D.exp&&D.auth_time&&D.iat,p.auth,"internal-error");const S="object"==typeof D.firebase?D.firebase:void 0,L=null==S?void 0:S.sign_in_provider;return{claims:D,token:v,authTime:Pt(Ao(D.auth_time)),issuedAtTime:Pt(Ao(D.iat)),expirationTime:Pt(Ao(D.exp)),signInProvider:L||null,signInSecondFactor:(null==S?void 0:S.sign_in_second_factor)||null}})).apply(this,arguments)}function Ao(m){return 1e3*Number(m)}function On(m){var h;const[p,v,D]=m.split(".");if(void 0===p||void 0===v||void 0===D)return Cr("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,N.tV)(v);return S?JSON.parse(S):(Cr("Failed to decode base64 JWT payload"),null)}catch(S){return Cr("Caught error parsing JWT payload as JSON",null===(h=S)||void 0===h?void 0:h.toString()),null}}function or(m,h){return kn.apply(this,arguments)}function kn(){return(kn=(0,l.Z)(function*(m,h,p=!1){if(p)return h;try{return yield h}catch(v){throw v instanceof N.ZR&&bs(v)&&m.auth.currentUser===m&&(yield m.auth.signOut()),v}})).apply(this,arguments)}function bs({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}class Fl{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const D=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,D)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,l.Z)(function*(){yield p.iteration()}),v)}iteration(){var h=this;return(0,l.Z)(function*(){var p;try{yield h.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===(null===(p=v)||void 0===p?void 0:p.code)&&h.schedule(!0))}h.schedule()})()}}class Es{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pt(this.lastLoginAt),this.creationTime=Pt(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function es(m){return ts.apply(this,arguments)}function ts(){return(ts=(0,l.Z)(function*(m){var h;const p=m.auth,v=yield m.getIdToken(),D=yield or(m,tn(p,{idToken:v}));Re(null==D?void 0:D.users.length,p,"internal-error");const S=D.users[0];m._notifyReloadListener(S);const L=(null===(h=S.providerUserInfo)||void 0===h?void 0:h.length)?qe(S.providerUserInfo):[],Q=Ur(m.providerData,L),Ye=!!m.isAnonymous&&!(m.email&&S.passwordHash||(null==Q?void 0:Q.length)),tt={uid:S.localId,displayName:S.displayName||null,photoURL:S.photoUrl||null,email:S.email||null,emailVerified:S.emailVerified||!1,phoneNumber:S.phoneNumber||null,tenantId:S.tenantId||null,providerData:Q,metadata:new Es(S.createdAt,S.lastLoginAt),isAnonymous:Ye};Object.assign(m,tt)})).apply(this,arguments)}function Ws(){return(Ws=(0,l.Z)(function*(m){const h=(0,N.m9)(m);yield es(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ur(m,h){return[...m.filter(v=>!h.some(D=>D.providerId===v.providerId)),...h]}function qe(m){return m.map(h=>{var{providerId:p}=h,v=se(h,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function en(){return(en=(0,l.Z)(function*(m,h){const p=yield ut(m,{},(0,l.Z)(function*(){const v=(0,N.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:D,apiKey:S}=m.config,L=V(m,D,"/v1/token",`key=${S}`),Q=yield m._getAdditionalHeaders();return Q["Content-Type"]="application/x-www-form-urlencoded",ws.fetch()(L,{method:"POST",headers:Q,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Jn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){Re(h.idToken,"internal-error"),Re(void 0!==h.idToken,"internal-error"),Re(void 0!==h.refreshToken,"internal-error");const p="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function Ai(m){const h=On(m);return Re(h,"internal-error"),Re(void 0!==h.exp,"internal-error"),Re(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var v=this;return(0,l.Z)(function*(){return Re(!v.accessToken||v.refreshToken,h,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var v=this;return(0,l.Z)(function*(){const{accessToken:D,refreshToken:S,expiresIn:L}=yield function xt(m,h){return en.apply(this,arguments)}(h,p);v.updateTokensAndExpiration(D,S,Number(L))})()}updateTokensAndExpiration(h,p,v){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,p){const{refreshToken:v,accessToken:D,expirationTime:S}=p,L=new Jn;return v&&(Re("string"==typeof v,"internal-error",{appName:h}),L.refreshToken=v),D&&(Re("string"==typeof D,"internal-error",{appName:h}),L.accessToken=D),S&&(Re("number"==typeof S,"internal-error",{appName:h}),L.expirationTime=S),L}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Jn,this.toJSON())}_performRefresh(){return st("not implemented")}}function ur(m,h){Re("string"==typeof m||void 0===m,"internal-error",{appName:h})}class un{constructor(h){var{uid:p,auth:v,stsTokenManager:D}=h,S=se(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Fl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=D,this.accessToken=D.accessToken,this.displayName=S.displayName||null,this.email=S.email||null,this.emailVerified=S.emailVerified||!1,this.phoneNumber=S.phoneNumber||null,this.photoURL=S.photoURL||null,this.isAnonymous=S.isAnonymous||!1,this.tenantId=S.tenantId||null,this.providerData=S.providerData?[...S.providerData]:[],this.metadata=new Es(S.createdAt||void 0,S.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,l.Z)(function*(){const v=yield or(p,p.stsTokenManager.getToken(p.auth,h));return Re(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(h){return function Xi(m){return To.apply(this,arguments)}(this,h)}reload(){return function ar(m){return Ws.apply(this,arguments)}(this)}_assign(h){this!==h&&(Re(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new un(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var v=this;return(0,l.Z)(function*(){let D=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),D=!0),p&&(yield es(v)),yield v.auth._persistUserIfCurrent(v),D&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,l.Z)(function*(){const p=yield h.getIdToken();return yield or(h,function Ae(m,h){return $e.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var v,D,S,L,Q,xe,De,Ye;const tt=null!==(v=p.displayName)&&void 0!==v?v:void 0,Lt=null!==(D=p.email)&&void 0!==D?D:void 0,nr=null!==(S=p.phoneNumber)&&void 0!==S?S:void 0,mo=null!==(L=p.photoURL)&&void 0!==L?L:void 0,Wa=null!==(Q=p.tenantId)&&void 0!==Q?Q:void 0,Od=null!==(xe=p._redirectEventId)&&void 0!==xe?xe:void 0,Yc=null!==(De=p.createdAt)&&void 0!==De?De:void 0,Qc=null!==(Ye=p.lastLoginAt)&&void 0!==Ye?Ye:void 0,{uid:ku,emailVerified:Rd,isAnonymous:Df,providerData:Fu,stsTokenManager:Lu}=p;Re(ku&&Lu,h,"internal-error");const j0=Jn.fromJSON(this.name,Lu);Re("string"==typeof ku,h,"internal-error"),ur(tt,h.name),ur(Lt,h.name),Re("boolean"==typeof Rd,h,"internal-error"),Re("boolean"==typeof Df,h,"internal-error"),ur(nr,h.name),ur(mo,h.name),ur(Wa,h.name),ur(Od,h.name),ur(Yc,h.name),ur(Qc,h.name);const Pd=new un({uid:ku,auth:h,email:Lt,emailVerified:Rd,displayName:tt,isAnonymous:Df,photoURL:mo,phoneNumber:nr,tenantId:Wa,stsTokenManager:j0,createdAt:Yc,lastLoginAt:Qc});return Fu&&Array.isArray(Fu)&&(Pd.providerData=Fu.map(Sg=>Object.assign({},Sg))),Od&&(Pd._redirectEventId=Od),Pd}static _fromIdTokenResponse(h,p,v=!1){return(0,l.Z)(function*(){const D=new Jn;D.updateFromServerResponse(p);const S=new un({uid:p.localId,auth:h,stsTokenManager:D,isAnonymous:v});return yield es(S),S})()}}const zt=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(p,v){var D=this;return(0,l.Z)(function*(){D.storage[p]=v})()}_get(p){var v=this;return(0,l.Z)(function*(){const D=v.storage[p];return void 0===D?null:D})()}_remove(p){var v=this;return(0,l.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return m.type="NONE",m})();function Yr(m,h,p){return`firebase:${m}:${h}:${p}`}class fn{constructor(h,p,v){this.persistence=h,this.auth=p,this.userKey=v;const{config:D,name:S}=this.auth;this.fullUserKey=Yr(this.userKey,D.apiKey,S),this.fullPersistenceKey=Yr("persistence",D.apiKey,S),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,l.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?un._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,l.Z)(function*(){if(p.persistence===h)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,v="authUser"){return(0,l.Z)(function*(){if(!p.length)return new fn(Xt(zt),h,v);const D=(yield Promise.all(p.map(function(){var De=(0,l.Z)(function*(Ye){if(yield Ye._isAvailable())return Ye});return function(Ye){return De.apply(this,arguments)}}()))).filter(De=>De);let S=D[0]||Xt(zt);const L=Yr(v,h.config.apiKey,h.name);let Q=null;for(const De of p)try{const Ye=yield De._get(L);if(Ye){const tt=un._fromJSON(h,Ye);De!==S&&(Q=tt),S=De;break}}catch(Ye){}const xe=D.filter(De=>De._shouldAllowMigration);return S._shouldAllowMigration&&xe.length?(S=xe[0],Q&&(yield S._set(L,Q.toJSON())),yield Promise.all(p.map(function(){var De=(0,l.Z)(function*(Ye){if(Ye!==S)try{yield Ye._remove(L)}catch(tt){}});return function(Ye){return De.apply(this,arguments)}}())),new fn(S,h,v)):new fn(S,h,v)})()}}function Tt(m){const h=m.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Ks(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(_a(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(So(h))return"Blackberry";if(xo(h))return"Webos";if(Cs(h))return"Safari";if((h.includes("chrome/")||va(h))&&!h.includes("edge/"))return"Chrome";if(Rn(h))return"Android";{const v=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function _a(m=(0,N.z$)()){return/firefox\//i.test(m)}function Cs(m=(0,N.z$)()){const h=m.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function va(m=(0,N.z$)()){return/crios\//i.test(m)}function Ks(m=(0,N.z$)()){return/iemobile/i.test(m)}function Rn(m=(0,N.z$)()){return/android/i.test(m)}function So(m=(0,N.z$)()){return/blackberry/i.test(m)}function xo(m=(0,N.z$)()){return/webos/i.test(m)}function Pn(m=(0,N.z$)()){return/iphone|ipad|ipod/i.test(m)||/macintosh/i.test(m)&&/mobile/i.test(m)}function Qr(m=(0,N.z$)()){return Pn(m)||Rn(m)||xo(m)||So(m)||/windows phone/i.test(m)||Ks(m)}function uc(m,h=[]){let p;switch(m){case"Browser":p=Tt((0,N.z$)());break;case"Worker":p=`${Tt((0,N.z$)())}-${m}`;break;default:p=m}const v=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${ie.SDK_VERSION}/${v}`}class Vl{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const v=S=>new Promise((L,Q)=>{try{L(h(S))}catch(xe){Q(xe)}});v.onAbort=p,this.queue.push(v);const D=this.queue.length-1;return()=>{this.queue[D]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,l.Z)(function*(){var v;if(p.auth.currentUser===h)return;const D=[];try{for(const S of p.queue)yield S(h),S.onAbort&&D.push(S.onAbort)}catch(S){D.reverse();for(const L of D)try{L()}catch(Q){}throw p.auth._errorFactory.create("login-blocked",{originalMessage:null===(v=S)||void 0===v?void 0:v.message})}})()}}class Ds{constructor(h,p,v){this.app=h,this.heartbeatServiceProvider=p,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ul(this),this.idTokenSubscription=new Ul(this),this.beforeStateQueue=new Vl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qr,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(h,p){var v=this;return p&&(this._popupRedirectResolver=Xt(p)),this._initializationPromise=this.queue((0,l.Z)(function*(){var D,S;if(!v._deleted&&(v.persistenceManager=yield fn.create(v,h),!v._deleted)){if(null===(D=v._popupRedirectResolver)||void 0===D?void 0:D._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(L){}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(S=v.currentUser)||void 0===S?void 0:S.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,l.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,l.Z)(function*(){var v;const D=yield p.assertedPersistence.getCurrentUser();let S=D,L=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const Q=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,xe=null==S?void 0:S._redirectEventId,De=yield p.tryRedirectSignIn(h);(!Q||Q===xe)&&(null==De?void 0:De.user)&&(S=De.user,L=!0)}if(!S)return p.directlySetCurrentUser(null);if(!S._redirectEventId){if(L)try{yield p.beforeStateQueue.runMiddleware(S)}catch(Q){S=D,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(Q))}return S?p.reloadAndSetCurrentUserOrClear(S):p.directlySetCurrentUser(null)}return Re(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===S._redirectEventId?p.directlySetCurrentUser(S):p.reloadAndSetCurrentUserOrClear(S)})()}tryRedirectSignIn(h){var p=this;return(0,l.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch(D){yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,l.Z)(function*(){var v;try{yield es(h)}catch(D){if("auth/network-request-failed"!==(null===(v=D)||void 0===v?void 0:v.code))return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Gt(){if("undefined"==typeof navigator)return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var h=this;return(0,l.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,l.Z)(function*(){const v=h?(0,N.m9)(h):null;return v&&Re(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(h,p=!1){var v=this;return(0,l.Z)(function*(){if(!v._deleted)return h&&Re(v.tenantId===h.tenantId,v,"tenant-id-mismatch"),p||(yield v.beforeStateQueue.runMiddleware(h)),v.queue((0,l.Z)(function*(){yield v.directlySetCurrentUser(h),v.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,l.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,l.Z)(function*(){yield p.assertedPersistence.setPersistence(Xt(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new N.LL("auth","Firebase",h())}onAuthStateChanged(h,p,v){return this.registerStateListener(this.authStateSubscription,h,p,v)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,v){return this.registerStateListener(this.idTokenSubscription,h,p,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var v=this;return(0,l.Z)(function*(){const D=yield v.getOrInitRedirectPersistenceManager(p);return null===h?D.removeCurrentUser():D.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,l.Z)(function*(){if(!p.redirectPersistenceManager){const v=h&&Xt(h)||p._popupRedirectResolver;Re(v,p,"argument-error"),p.redirectPersistenceManager=yield fn.create(p,[Xt(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,l.Z)(function*(){var v,D;return p._isInitialized&&(yield p.queue((0,l.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===h?p._currentUser:(null===(D=p.redirectUser)||void 0===D?void 0:D._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,l.Z)(function*(){if(h===p.currentUser)return p.queue((0,l.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,v,D){if(this._deleted)return()=>{};const S="function"==typeof p?p:p.next.bind(p),L=this._isInitialized?Promise.resolve():this._initializationPromise;return Re(L,this,"internal-error"),L.then(()=>S(this.currentUser)),"function"==typeof p?h.addObserver(p,v,D):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,l.Z)(function*(){p.currentUser&&p.currentUser!==h&&(p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh()),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=uc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,l.Z)(function*(){var p;const v={"X-Client-Version":h.clientVersion};h.app.options.appId&&(v["X-Firebase-gmpid"]=h.app.options.appId);const D=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return D&&(v["X-Firebase-Client"]=D),v})()}}function nn(m){return(0,N.m9)(m)}class Ul{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,N.ne)(p=>this.observer=p)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function $h(m){const h=m.indexOf(":");return h<0?"":m.substr(0,h+1)}function Zh(m){if(!m)return null;const h=Number(m);return isNaN(h)?null:h}class ba{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return st("not implemented")}_getIdTokenResponse(h){return st("not implemented")}_linkToIdToken(h,p){return st("not implemented")}_getReauthenticationResolver(h){return st("not implemented")}}function Hh(m,h){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,l.Z)(function*(m,h){return $t(m,"POST","/v1/accounts:resetPassword",sn(m,h))})).apply(this,arguments)}function Gh(m,h){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,l.Z)(function*(m,h){return $t(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Mo(m,h){return jl.apply(this,arguments)}function jl(){return(jl=(0,l.Z)(function*(m,h){return $t(m,"POST","/v1/accounts:update",sn(m,h))})).apply(this,arguments)}function $l(){return($l=(0,l.Z)(function*(m,h){return U(m,"POST","/v1/accounts:signInWithPassword",sn(m,h))})).apply(this,arguments)}function cc(m,h){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,l.Z)(function*(m,h){return $t(m,"POST","/v1/accounts:sendOobCode",sn(m,h))})).apply(this,arguments)}function Qp(m,h){return lc.apply(this,arguments)}function lc(){return(lc=(0,l.Z)(function*(m,h){return cc(m,h)})).apply(this,arguments)}function Ia(m,h){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,l.Z)(function*(m,h){return cc(m,h)})).apply(this,arguments)}function dc(m,h){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,l.Z)(function*(m,h){return cc(m,h)})).apply(this,arguments)}function Ys(m,h){return du.apply(this,arguments)}function du(){return(du=(0,l.Z)(function*(m,h){return cc(m,h)})).apply(this,arguments)}function Qs(){return(Qs=(0,l.Z)(function*(m,h){return U(m,"POST","/v1/accounts:signInWithEmailLink",sn(m,h))})).apply(this,arguments)}function ql(){return(ql=(0,l.Z)(function*(m,h){return U(m,"POST","/v1/accounts:signInWithEmailLink",sn(m,h))})).apply(this,arguments)}class Oo extends ba{constructor(h,p,v,D=null){super("password",v),this._email=h,this._password=p,this._tenantId=D}static _fromEmailAndPassword(h,p){return new Oo(h,p,"password")}static _fromEmailAndCode(h,p,v=null){return new Oo(h,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,l.Z)(function*(){switch(p.signInMethod){case"password":return function Yp(m,h){return $l.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Ca(m,h){return Qs.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:Ht(h,"internal-error")}})()}_linkToIdToken(h,p){var v=this;return(0,l.Z)(function*(){switch(v.signInMethod){case"password":return Gh(h,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function qh(m,h){return ql.apply(this,arguments)}(h,{idToken:p,email:v._email,oobCode:v._password});default:Ht(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function xi(m,h){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,l.Z)(function*(m,h){return U(m,"POST","/v1/accounts:signInWithIdp",sn(m,h))})).apply(this,arguments)}class Mi extends ba{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new Mi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):Ht("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:D}=p,S=se(p,["providerId","signInMethod"]);if(!v||!D)return null;const L=new Mi(v,D);return L.idToken=S.idToken||void 0,L.accessToken=S.accessToken||void 0,L.secret=S.secret,L.nonce=S.nonce,L.pendingToken=S.pendingToken||null,L}_getIdTokenResponse(h){return xi(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,xi(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,xi(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,N.xO)(p)}return h}}function Br(m,h){return Da.apply(this,arguments)}function Da(){return(Da=(0,l.Z)(function*(m,h){return $t(m,"POST","/v1/accounts:sendVerificationCode",sn(m,h))})).apply(this,arguments)}function hu(){return(hu=(0,l.Z)(function*(m,h){return U(m,"POST","/v1/accounts:signInWithPhoneNumber",sn(m,h))})).apply(this,arguments)}function Ta(){return(Ta=(0,l.Z)(function*(m,h){const p=yield U(m,"POST","/v1/accounts:signInWithPhoneNumber",sn(m,h));if(p.temporaryProof)throw G(m,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Jp={USER_NOT_FOUND:"user-not-found"};function Oi(){return(Oi=(0,l.Z)(function*(m,h){return U(m,"POST","/v1/accounts:signInWithPhoneNumber",sn(m,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Jp)})).apply(this,arguments)}class As extends ba{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new As({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new As({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function zl(m,h){return hu.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Wl(m,h){return Ta.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function gn(m,h){return Oi.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:v,verificationCode:D}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:v,code:D}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:v,phoneNumber:D,temporaryProof:S}=h;return v||p||D||S?new As({verificationId:p,verificationCode:v,phoneNumber:D,temporaryProof:S}):null}}class Ss{constructor(h){var p,v,D,S,L,Q;const xe=(0,N.zd)((0,N.pd)(h)),De=null!==(p=xe.apiKey)&&void 0!==p?p:null,Ye=null!==(v=xe.oobCode)&&void 0!==v?v:null,tt=function bn(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(D=xe.mode)&&void 0!==D?D:null);Re(De&&Ye&&tt,"argument-error"),this.apiKey=De,this.operation=tt,this.code=Ye,this.continueUrl=null!==(S=xe.continueUrl)&&void 0!==S?S:null,this.languageCode=null!==(L=xe.languageCode)&&void 0!==L?L:null,this.tenantId=null!==(Q=xe.tenantId)&&void 0!==Q?Q:null}static parseLink(h){const p=function Kl(m){const h=(0,N.zd)((0,N.pd)(m)).link,p=h?(0,N.zd)((0,N.pd)(h)).deep_link_id:null,v=(0,N.zd)((0,N.pd)(m)).deep_link_id;return(v?(0,N.zd)((0,N.pd)(v)).link:null)||v||p||h||m}(h);try{return new Ss(p)}catch(v){return null}}}let cr=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(p,v){return Oo._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const D=Ss.parseLink(v);return Re(D,"argument-error"),Oo._fromEmailAndCode(p,D.code,D.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class Jr{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Ri extends Jr{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Dr extends Ri{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return Re("providerId"in p&&"signInMethod"in p,"argument-error"),Mi._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return Re(h.idToken||h.accessToken,"argument-error"),Mi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Dr.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Dr.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:D,pendingToken:S,nonce:L,providerId:Q}=h;if(!v&&!D&&!p&&!S||!Q)return null;try{return new Dr(Q)._credential({idToken:p,accessToken:v,nonce:L,pendingToken:S})}catch(xe){return null}}}let Tr=(()=>{class m extends Ri{constructor(){super("facebook.com")}static credential(p){return Mi._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return m.credential(p.oauthAccessToken)}catch(v){return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),Fn=(()=>{class m extends Ri{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return Mi._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:D}=p;if(!v&&!D)return null;try{return m.credential(v,D)}catch(S){return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),Ro=(()=>{class m extends Ri{constructor(){super("github.com")}static credential(p){return Mi._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return m.credential(p.oauthAccessToken)}catch(v){return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class lr extends ba{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return xi(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,xi(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,xi(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:D,pendingToken:S}=p;return v&&D&&S&&v===D?new lr(v,S):null}static _create(h,p){return new lr(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class xs extends Jr{constructor(h){Re(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return xs.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return xs.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=lr.fromJSON(h);return Re(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:v}=h;if(!p||!v)return null;try{return lr._create(v,p)}catch(D){return null}}}let lt=(()=>{class m extends Ri{constructor(){super("twitter.com")}static credential(p,v){return Mi._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:D}=p;if(!v||!D)return null;try{return m.credential(v,D)}catch(S){return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function Xs(m,h){return Po.apply(this,arguments)}function Po(){return(Po=(0,l.Z)(function*(m,h){return U(m,"POST","/v1/accounts:signUp",sn(m,h))})).apply(this,arguments)}class dr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,v,D=!1){return(0,l.Z)(function*(){const S=yield un._fromIdTokenResponse(h,v,D),L=Aa(v);return new dr({user:S,providerId:L,_tokenResponse:v,operationType:p})})()}static _forOperation(h,p,v){return(0,l.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const D=Aa(v);return new dr({user:h,providerId:D,_tokenResponse:v,operationType:p})})()}}function Aa(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function fu(){return(fu=(0,l.Z)(function*(m){var h;const p=nn(m);if(yield p._initializationPromise,null===(h=p.currentUser)||void 0===h?void 0:h.isAnonymous)return new dr({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield Xs(p,{returnSecureToken:!0}),D=yield dr._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(D.user),D})).apply(this,arguments)}class No extends N.ZR{constructor(h,p,v,D){var S;super(p.code,p.message),this.operationType=v,this.user=D,Object.setPrototypeOf(this,No.prototype),this.customData={appName:h.name,tenantId:null!==(S=h.tenantId)&&void 0!==S?S:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,p,v,D){return new No(h,p,v,D)}}function Ie(m,h,p,v){return("reauthenticate"===h?p._getReauthenticationResolver(m):p._getIdTokenResponse(m)).catch(S=>{throw"auth/multi-factor-auth-required"===S.code?No._fromErrorAndOperation(m,S,h,v):S})}function Nt(m){return new Set(m.map(({providerId:h})=>h).filter(h=>!!h))}function an(){return(an=(0,l.Z)(function*(m,h){const p=(0,N.m9)(m);yield vr(!0,p,h);const{providerUserInfo:v}=yield gt(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),D=Nt(v||[]);return p.providerData=p.providerData.filter(S=>D.has(S.providerId)),D.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function ko(m,h){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,l.Z)(function*(m,h,p=!1){const v=yield or(m,h._linkToIdToken(m.auth,yield m.getIdToken()),p);return dr._forOperation(m,"link",v)})).apply(this,arguments)}function vr(m,h,p){return rs.apply(this,arguments)}function rs(){return(rs=(0,l.Z)(function*(m,h,p){yield es(h);const D=!1===m?"provider-already-linked":"no-such-provider";Re(Nt(h.providerData).has(p)===m,h.auth,D)})).apply(this,arguments)}function pu(m,h){return gu.apply(this,arguments)}function gu(){return(gu=(0,l.Z)(function*(m,h,p=!1){var v;const{auth:D}=m,S="reauthenticate";try{const L=yield or(m,Ie(D,S,h,m),p);Re(L.idToken,D,"internal-error");const Q=On(L.idToken);Re(Q,D,"internal-error");const{sub:xe}=Q;return Re(m.uid===xe,D,"user-mismatch"),dr._forOperation(m,S,L)}catch(L){throw"auth/user-not-found"===(null===(v=L)||void 0===v?void 0:v.code)&&Ht(D,"user-mismatch"),L}})).apply(this,arguments)}function Yl(m,h){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,l.Z)(function*(m,h,p=!1){const v="signIn",D=yield Ie(m,v,h),S=yield dr._fromIdTokenResponse(m,v,D);return p||(yield m._updateCurrentUser(S.user)),S})).apply(this,arguments)}function eo(m,h){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,l.Z)(function*(m,h){return Yl(nn(m),h)})).apply(this,arguments)}function fi(m,h){return mu.apply(this,arguments)}function mu(){return(mu=(0,l.Z)(function*(m,h){const p=(0,N.m9)(m);return yield vr(!1,p,h.providerId),ko(p,h)})).apply(this,arguments)}function Pi(m,h){return pi.apply(this,arguments)}function pi(){return(pi=(0,l.Z)(function*(m,h){return pu((0,N.m9)(m),h)})).apply(this,arguments)}function Ql(m,h){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,l.Z)(function*(m,h){return U(m,"POST","/v1/accounts:signInWithCustomToken",sn(m,h))})).apply(this,arguments)}function Sa(){return(Sa=(0,l.Z)(function*(m,h){const p=nn(m),v=yield Ql(p,{token:h,returnSecureToken:!0}),D=yield dr._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(D.user),D})).apply(this,arguments)}class Vo{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?to._fromServerResponse(h,p):Ht(h,"internal-error")}}class to extends Vo{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new to(p)}}function Uo(m,h,p){var v;Re((null===(v=p.url)||void 0===v?void 0:v.length)>0,m,"invalid-continue-uri"),Re(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(Re(p.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(Re(p.android.packageName.length>0,m,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function pc(){return(pc=(0,l.Z)(function*(m,h,p){const v=(0,N.m9)(m),D={requestType:"PASSWORD_RESET",email:h};p&&Uo(v,D,p),yield Ia(v,D)})).apply(this,arguments)}function Bo(){return(Bo=(0,l.Z)(function*(m,h,p){yield Hh((0,N.m9)(m),{oobCode:h,newPassword:p})})).apply(this,arguments)}function Ma(){return(Ma=(0,l.Z)(function*(m,h){yield Mo((0,N.m9)(m),{oobCode:h})})).apply(this,arguments)}function yu(m,h){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,l.Z)(function*(m,h){const p=(0,N.m9)(m),v=yield Hh(p,{oobCode:h}),D=v.requestType;switch(Re(D,p,"internal-error"),D){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Re(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Re(v.mfaInfo,p,"internal-error");default:Re(v.email,p,"internal-error")}let S=null;return v.mfaInfo&&(S=Vo._fromServerResponse(nn(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:S},operation:D}})).apply(this,arguments)}function Jl(){return(Jl=(0,l.Z)(function*(m,h){const{data:p}=yield yu((0,N.m9)(m),h);return p.email})).apply(this,arguments)}function Ln(){return(Ln=(0,l.Z)(function*(m,h,p){const v=nn(m),D=yield Xs(v,{returnSecureToken:!0,email:h,password:p}),S=yield dr._fromIdTokenResponse(v,"signIn",D);return yield v._updateCurrentUser(S.user),S})).apply(this,arguments)}function Ra(){return(Ra=(0,l.Z)(function*(m,h,p){const v=(0,N.m9)(m),D={requestType:"EMAIL_SIGNIN",email:h};Re(p.handleCodeInApp,v,"argument-error"),p&&Uo(v,D,p),yield dc(v,D)})).apply(this,arguments)}function Qh(){return(Qh=(0,l.Z)(function*(m,h,p){const v=(0,N.m9)(m),D=cr.credentialWithLink(h,p||Mn());return Re(D._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),eo(v,D)})).apply(this,arguments)}function Xl(m,h){return Jh.apply(this,arguments)}function Jh(){return(Jh=(0,l.Z)(function*(m,h){return $t(m,"POST","/v1/accounts:createAuthUri",sn(m,h))})).apply(this,arguments)}function Os(){return(Os=(0,l.Z)(function*(m,h){const v={identifier:h,continueUri:wn()?Mn():"http://localhost"},{signinMethods:D}=yield Xl((0,N.m9)(m),v);return D||[]})).apply(this,arguments)}function wu(){return(wu=(0,l.Z)(function*(m,h){const p=(0,N.m9)(m),D={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};h&&Uo(p.auth,D,h);const{email:S}=yield Qp(p.auth,D);S!==m.email&&(yield m.reload())})).apply(this,arguments)}function ed(){return(ed=(0,l.Z)(function*(m,h,p){const v=(0,N.m9)(m),S={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:h};p&&Uo(v.auth,S,p);const{email:L}=yield Ys(v.auth,S);L!==m.email&&(yield m.reload())})).apply(this,arguments)}function is(m,h){return In.apply(this,arguments)}function In(){return(In=(0,l.Z)(function*(m,h){return $t(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function td(){return(td=(0,l.Z)(function*(m,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const v=(0,N.m9)(m),S={idToken:yield v.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},L=yield or(v,is(v.auth,S));v.displayName=L.displayName||null,v.photoURL=L.photoUrl||null;const Q=v.providerData.find(({providerId:xe})=>"password"===xe);Q&&(Q.displayName=v.displayName,Q.photoURL=v.photoURL),yield v._updateTokensIfNecessary(L)})).apply(this,arguments)}function _c(m,h,p){return rd.apply(this,arguments)}function rd(){return(rd=(0,l.Z)(function*(m,h,p){const{auth:v}=m,S={idToken:yield m.getIdToken(),returnSecureToken:!0};h&&(S.email=h),p&&(S.password=p);const L=yield or(m,Gh(v,S));yield m._updateTokensIfNecessary(L,!0)})).apply(this,arguments)}class Pa{constructor(h,p,v={}){this.isNewUser=h,this.providerId=p,this.profile=v}}class Eu extends Pa{constructor(h,p,v,D){super(h,p,v),this.username=D}}class mn extends Pa{constructor(h,p){super(h,"facebook.com",p)}}class Rs extends Eu{constructor(h,p){super(h,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class Je extends Pa{constructor(h,p){super(h,"google.com",p)}}class ss extends Eu{constructor(h,p,v){super(h,"twitter.com",p,v)}}function Xr(m){const{user:h,_tokenResponse:p}=m;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function tf(m){var h,p;if(!m)return null;const{providerId:v}=m,D=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},S=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!v&&(null==m?void 0:m.idToken)){const L=null===(p=null===(h=On(m.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(L)return new Pa(S,"anonymous"!==L&&"custom"!==L?L:null)}if(!v)return null;switch(v){case"facebook.com":return new mn(S,D);case"github.com":return new Rs(S,D);case"google.com":return new Je(S,D);case"twitter.com":return new ss(S,D,m.screenName||null);case"custom":case"anonymous":return new Pa(S,null);default:return new Pa(S,v,D)}}(p)}class no{constructor(h,p){this.type=h,this.credential=p}static _fromIdtoken(h){return new no("enroll",h)}static _fromMfaPendingCredential(h){return new no("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,v;if(null==h?void 0:h.multiFactorSession){if(null===(p=h.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return no._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(v=h.multiFactorSession)||void 0===v?void 0:v.idToken)return no._fromIdtoken(h.multiFactorSession.idToken)}return null}}class ro{constructor(h,p,v){this.session=h,this.hints=p,this.signInResolver=v}static _fromError(h,p){const v=nn(h),D=p.customData._serverResponse,S=(D.mfaInfo||[]).map(Q=>Vo._fromServerResponse(v,Q));Re(D.mfaPendingCredential,v,"internal-error");const L=no._fromMfaPendingCredential(D.mfaPendingCredential);return new ro(L,S,function(){var Q=(0,l.Z)(function*(xe){const De=yield xe._process(v,L);delete D.mfaInfo,delete D.mfaPendingCredential;const Ye=Object.assign(Object.assign({},D),{idToken:De.idToken,refreshToken:De.refreshToken});switch(p.operationType){case"signIn":const tt=yield dr._fromIdTokenResponse(v,p.operationType,Ye);return yield v._updateCurrentUser(tt.user),tt;case"reauthenticate":return Re(p.user,v,"internal-error"),dr._forOperation(p.user,p.operationType,Ye);default:Ht(v,"internal-error")}});return function(xe){return Q.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,l.Z)(function*(){return p.signInResolver(h)})()}}function $o(m,h){return $t(m,"POST","/v2/accounts/mfaEnrollment:start",sn(m,h))}class wc{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>Vo._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new wc(h)}getSession(){var h=this;return(0,l.Z)(function*(){return no._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,p){var v=this;return(0,l.Z)(function*(){const D=h,S=yield v.getSession(),L=yield or(v.user,D._process(v.user.auth,S,p));return yield v.user._updateTokensIfNecessary(L),v.user.reload()})()}unenroll(h){var p=this;return(0,l.Z)(function*(){var v;const D="string"==typeof h?h:h.uid,S=yield p.user.getIdToken(),L=yield or(p.user,function Zo(m,h){return $t(m,"POST","/v2/accounts/mfaEnrollment:withdraw",sn(m,h))}(p.user.auth,{idToken:S,mfaEnrollmentId:D}));p.enrolledFactors=p.enrolledFactors.filter(({uid:Q})=>Q!==D),yield p.user._updateTokensIfNecessary(L);try{yield p.user.reload()}catch(Q){if("auth/user-token-expired"!==(null===(v=Q)||void 0===v?void 0:v.code))throw Q}})()}}const Ho=new WeakMap,io="__sak";class Go{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(io,"1"),this.storage.removeItem(io),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const zo=(()=>{class m extends Go{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function qo(){const m=(0,N.z$)();return Cs(m)||Pn(m)}()&&function Si(){try{return!(!window||window===window.top)}catch(m){return!1}}(),this.fallbackToPolling=Qr(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const D=this.storage.getItem(v),S=this.localCache[v];D!==S&&p(v,S,D)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((Q,xe,De)=>{this.notifyListeners(Q,De)});const D=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Q=this.storage.getItem(D);if(p.newValue!==Q)null!==p.newValue?this.storage.setItem(D,p.newValue):this.storage.removeItem(D);else if(this.localCache[D]===p.newValue&&!v)return}const S=()=>{const Q=this.storage.getItem(D);!v&&this.localCache[D]===Q||this.notifyListeners(D,Q)},L=this.storage.getItem(D);!function wa(){return(0,N.w1)()&&10===document.documentMode}()||L===p.newValue||p.newValue===p.oldValue?S():setTimeout(S,10)}notifyListeners(p,v){this.localCache[p]=v;const D=this.listeners[p];if(D)for(const S of Array.from(D))S(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,D)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:D}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var D=()=>super._set,S=this;return(0,l.Z)(function*(){yield D().call(S,p,v),S.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,D=this;return(0,l.Z)(function*(){const S=yield v().call(D,p);return D.localCache[p]=JSON.stringify(S),S})()}_remove(p){var v=()=>super._remove,D=this;return(0,l.Z)(function*(){yield v().call(D,p),delete D.localCache[p]})()}}return m.type="LOCAL",m})(),Ni=(()=>{class m extends Go{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return m.type="SESSION",m})();let Ec=(()=>{class m{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(S=>S.isListeningto(p));if(v)return v;const D=new m(p);return this.receivers.push(D),D}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,l.Z)(function*(){const D=p,{eventId:S,eventType:L,data:Q}=D.data,xe=v.handlersMap[L];if(!(null==xe?void 0:xe.size))return;D.ports[0].postMessage({status:"ack",eventId:S,eventType:L});const De=Array.from(xe).map(function(){var tt=(0,l.Z)(function*(Lt){return Lt(D.origin,Q)});return function(Lt){return tt.apply(this,arguments)}}()),Ye=yield function Nn(m){return Promise.all(m.map(function(){var h=(0,l.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return h.apply(this,arguments)}}()))}(De);D.ports[0].postMessage({status:"done",eventId:S,eventType:L,response:Ye})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function as(m="",h=10){let p="";for(let v=0;v<h;v++)p+=Math.floor(10*Math.random());return m+p}class tr{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,v=50){var D=this;return(0,l.Z)(function*(){const S="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!S)throw new Error("connection_unavailable");let L,Q;return new Promise((xe,De)=>{const Ye=as("",20);S.port1.start();const tt=setTimeout(()=>{De(new Error("unsupported_event"))},v);Q={messageChannel:S,onMessage(Lt){const nr=Lt;if(nr.data.eventId===Ye)switch(nr.data.status){case"ack":clearTimeout(tt),L=setTimeout(()=>{De(new Error("timeout"))},3e3);break;case"done":clearTimeout(L),xe(nr.data.response);break;default:clearTimeout(tt),clearTimeout(L),De(new Error("invalid_response"))}}},D.handlers.add(Q),S.port1.addEventListener("message",Q.onMessage),D.target.postMessage({eventType:h,eventId:Ye,data:p},[S.port2])}).finally(()=>{Q&&D.removeMessageHandler(Q)})})()}}function Bt(){return window}function us(){return void 0!==Bt().WorkerGlobalScope&&"function"==typeof Bt().importScripts}function Ar(){return(Ar=(0,l.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(m){return null}})).apply(this,arguments)}const Fa="firebaseLocalStorageDb",Wo="firebaseLocalStorage",sd="fbase_key";class Ic{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Cu(m,h){return m.transaction([Wo],h?"readwrite":"readonly").objectStore(Wo)}function Fi(){const m=indexedDB.open(Fa,1);return new Promise((h,p)=>{m.addEventListener("error",()=>{p(m.error)}),m.addEventListener("upgradeneeded",()=>{const v=m.result;try{v.createObjectStore(Wo,{keyPath:sd})}catch(D){p(D)}}),m.addEventListener("success",(0,l.Z)(function*(){const v=m.result;v.objectStoreNames.contains(Wo)?h(v):(v.close(),yield function tg(){const m=indexedDB.deleteDatabase(Fa);return new Ic(m).toPromise()}(),h(yield Fi()))}))})}function ei(m,h,p){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,l.Z)(function*(m,h,p){const v=Cu(m,!0).put({[sd]:h,value:p});return new Ic(v).toPromise()})).apply(this,arguments)}function Cn(){return(Cn=(0,l.Z)(function*(m,h){const p=Cu(m,!1).get(h),v=yield new Ic(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function ao(m,h){const p=Cu(m,!0).delete(h);return new Ic(p).toPromise()}const qn=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,l.Z)(function*(){return p.db||(p.db=yield Fi()),p.db})()}_withRetries(p){var v=this;return(0,l.Z)(function*(){let D=0;for(;;)try{const S=yield v._openDb();return yield p(S)}catch(S){if(D++>3)throw S;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,l.Z)(function*(){return us()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,l.Z)(function*(){p.receiver=Ec._getInstance(function yn(){return us()?self:null}()),p.receiver._subscribe("keyChanged",function(){var v=(0,l.Z)(function*(D,S){return{keyProcessed:(yield p._poll()).includes(S.key)}});return function(D,S){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,l.Z)(function*(D,S){return["keyChanged"]});return function(D,S){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,l.Z)(function*(){var v,D;if(p.activeServiceWorker=yield function cs(){return Ar.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new tr(p.activeServiceWorker);const S=yield p.sender._send("ping",{},800);!S||(null===(v=S[0])||void 0===v?void 0:v.fulfilled)&&(null===(D=S[0])||void 0===D?void 0:D.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,l.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Sr(){var m;return(null===(m=null==navigator?void 0:navigator.serviceWorker)||void 0===m?void 0:m.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch(D){}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Fi();return yield ei(p,io,"1"),yield ao(p,io),!0}catch(p){}return!1})()}_withPendingWrite(p){var v=this;return(0,l.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var D=this;return(0,l.Z)(function*(){return D._withPendingWrite((0,l.Z)(function*(){return yield D._withRetries(S=>ei(S,p,v)),D.localCache[p]=v,D.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,l.Z)(function*(){const D=yield v._withRetries(S=>function oo(m,h){return Cn.apply(this,arguments)}(S,p));return v.localCache[p]=D,D})()}_remove(p){var v=this;return(0,l.Z)(function*(){return v._withPendingWrite((0,l.Z)(function*(){return yield v._withRetries(D=>ao(D,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,l.Z)(function*(){const v=yield p._withRetries(L=>{const Q=Cu(L,!1).getAll();return new Ic(Q).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const D=[],S=new Set;for(const{fbase_key:L,value:Q}of v)S.add(L),JSON.stringify(p.localCache[L])!==JSON.stringify(Q)&&(p.notifyListeners(L,Q),D.push(L));for(const L of Object.keys(p.localCache))p.localCache[L]&&!S.has(L)&&(p.notifyListeners(L,null),D.push(L));return D})()}notifyListeners(p,v){this.localCache[p]=v;const D=this.listeners[p];if(D)for(const S of Array.from(D))S(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})();function Li(m,h){return $t(m,"POST","/v2/accounts/mfaSignIn:start",sn(m,h))}function Ns(){return(Ns=(0,l.Z)(function*(m){return(yield $t(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ad(m){return new Promise((h,p)=>{const v=document.createElement("script");v.setAttribute("src",m),v.onload=h,v.onerror=D=>{const S=An("internal-error");S.customData=D,p(S)},v.type="text/javascript",v.charset="UTF-8",function Cc(){var m,h;return null!==(h=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==h?h:document}().appendChild(v)})}function of(m){return`__${m}${Math.floor(1e6*Math.random())}`}const Qo=1e12;class dt{constructor(h){this.auth=h,this.counter=Qo,this._widgets=new Map}render(h,p){const v=this.counter;return this._widgets.set(v,new Dc(h,this.auth.name,p||{})),this.counter++,v}reset(h){var p;const v=h||Qo;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(h){var p;return(null===(p=this._widgets.get(h||Qo))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,l.Z)(function*(){var v;return null===(v=p._widgets.get(h||Qo))||void 0===v||v.execute(),""})()}}class Dc{constructor(h,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const D="string"==typeof h?document.getElementById(h):h;Re(D,"argument-error",{appName:p}),this.container=D,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ti(m){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<m;v++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const La=of("rcb"),Va=new it(3e4,6e4);class ud{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(h=Bt().grecaptcha)||void 0===h?void 0:h.render)}load(h,p=""){return Re(function Ac(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Bt().grecaptcha):new Promise((v,D)=>{const S=Bt().setTimeout(()=>{D(An(h,"network-request-failed"))},Va.get());Bt()[La]=()=>{Bt().clearTimeout(S),delete Bt()[La];const Q=Bt().grecaptcha;if(!Q)return void D(An(h,"internal-error"));const xe=Q.render;Q.render=(De,Ye)=>{const tt=xe(De,Ye);return this.counter++,tt},this.hostLanguage=p,v(Q)},ad(`https://www.google.com/recaptcha/api.js??${(0,N.xO)({onload:La,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(S),D(An(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!!(null===(p=Bt().grecaptcha)||void 0===p?void 0:p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ni{load(h){return(0,l.Z)(function*(){return new dt(h)})()}clearedOneInstance(){}}const cd="recaptcha",ld={theme:"light",type:"image"};class Sc{constructor(h,p=Object.assign({},ld),v){this.parameters=p,this.type=cd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=nn(v),this.isInvisible="invisible"===this.parameters.size,Re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const D="string"==typeof h?document.getElementById(h):h;Re(D,this.auth,"argument-error"),this.container=D,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ni:new ud,this.validateStartingState()}verify(){var h=this;return(0,l.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(p)||new Promise(S=>{const L=Q=>{!Q||(h.tokenChangeListeners.delete(L),S(Q))};h.tokenChangeListeners.add(L),h.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){Re(!this.parameters.sitekey,this.auth,"argument-error"),Re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof h)h(p);else if("string"==typeof h){const v=Bt()[h];"function"==typeof v&&v(p)}}}assertNotDestroyed(){Re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,l.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,l.Z)(function*(){Re(wn()&&!us(),h.auth,"internal-error"),yield function xc(){let m=null;return new Promise(h=>{"complete"!==document.readyState?(m=()=>h(),window.addEventListener("load",m)):h()}).catch(h=>{throw m&&window.removeEventListener("load",m),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function Du(m){return Ns.apply(this,arguments)}(h.auth);Re(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return Re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class zn{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=As._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function Jo(){return(Jo=(0,l.Z)(function*(m,h,p){const v=nn(m),D=yield ri(v,h,(0,N.m9)(p));return new zn(D,S=>eo(v,S))})).apply(this,arguments)}function Au(){return(Au=(0,l.Z)(function*(m,h,p){const v=(0,N.m9)(m);yield vr(!1,v,"phone");const D=yield ri(v.auth,h,(0,N.m9)(p));return new zn(D,S=>fi(v,S))})).apply(this,arguments)}function Mc(){return(Mc=(0,l.Z)(function*(m,h,p){const v=(0,N.m9)(m),D=yield ri(v.auth,h,(0,N.m9)(p));return new zn(D,S=>Pi(v,S))})).apply(this,arguments)}function ri(m,h,p){return dd.apply(this,arguments)}function dd(){return(dd=(0,l.Z)(function*(m,h,p){var v;const D=yield p.verify();try{let S;if(Re("string"==typeof D,m,"argument-error"),Re(p.type===cd,m,"argument-error"),S="string"==typeof h?{phoneNumber:h}:h,"session"in S){const L=S.session;if("phoneNumber"in S)return Re("enroll"===L.type,m,"internal-error"),(yield $o(m,{idToken:L.credential,phoneEnrollmentInfo:{phoneNumber:S.phoneNumber,recaptchaToken:D}})).phoneSessionInfo.sessionInfo;{Re("signin"===L.type,m,"internal-error");const Q=(null===(v=S.multiFactorHint)||void 0===v?void 0:v.uid)||S.multiFactorUid;return Re(Q,m,"missing-multi-factor-info"),(yield Li(m,{mfaPendingCredential:L.credential,mfaEnrollmentId:Q,phoneSignInInfo:{recaptchaToken:D}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:L}=yield Br(m,{phoneNumber:S.phoneNumber,recaptchaToken:D});return L}}finally{p._reset()}})).apply(this,arguments)}function Xo(){return(Xo=(0,l.Z)(function*(m,h){yield ko((0,N.m9)(m),h)})).apply(this,arguments)}let Fs=(()=>{class m{constructor(p){this.providerId=m.PROVIDER_ID,this.auth=nn(p)}verifyPhoneNumber(p,v){return ri(this.auth,p,(0,N.m9)(v))}static credential(p,v){return As._fromVerification(p,v)}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:D}=p;return v&&D?As._fromTokenResponse(v,D):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function Yt(m,h){return h?Xt(h):(Re(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class Mt extends ba{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return xi(h,this._buildIdpRequest())}_linkToIdToken(h,p){return xi(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return xi(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function I(m){return Yl(m.auth,new Mt(m),m.bypassAuthState)}function T(m){const{auth:h,user:p}=m;return Re(p,h,"internal-error"),pu(p,new Mt(m),m.bypassAuthState)}function O(m){return F.apply(this,arguments)}function F(){return(F=(0,l.Z)(function*(m){const{auth:h,user:p}=m;return Re(p,h,"internal-error"),ko(p,new Mt(m),m.bypassAuthState)})).apply(this,arguments)}class W{constructor(h,p,v,D,S=!1){this.auth=h,this.resolver=v,this.user=D,this.bypassAuthState=S,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,l.Z)(function*(v,D){h.pendingPromise={resolve:v,reject:D};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(S){h.reject(S)}});return function(v,D){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,l.Z)(function*(){const{urlResponse:v,sessionId:D,postBody:S,tenantId:L,error:Q,type:xe}=h;if(Q)return void p.reject(Q);const De={auth:p.auth,requestUri:v,sessionId:D,tenantId:L||void 0,postBody:S||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(xe)(De))}catch(Ye){p.reject(Ye)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return I;case"linkViaPopup":case"linkViaRedirect":return O;case"reauthViaPopup":case"reauthViaRedirect":return T;default:Ht(this.auth,"internal-error")}}resolve(h){Sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const oe=new it(2e3,1e4);function Ue(){return(Ue=(0,l.Z)(function*(m,h,p){const v=nn(m);zr(m,h,Jr);const D=Yt(v,p);return new Dn(v,"signInViaPopup",h,D).executeNotNull()})).apply(this,arguments)}function ht(){return(ht=(0,l.Z)(function*(m,h,p){const v=(0,N.m9)(m);zr(v.auth,h,Jr);const D=Yt(v.auth,p);return new Dn(v.auth,"reauthViaPopup",h,D,v).executeNotNull()})).apply(this,arguments)}function at(){return(at=(0,l.Z)(function*(m,h,p){const v=(0,N.m9)(m);zr(v.auth,h,Jr);const D=Yt(v.auth,p);return new Dn(v.auth,"linkViaPopup",h,D,v).executeNotNull()})).apply(this,arguments)}let Dn=(()=>{class m extends W{constructor(p,v,D,S,L){super(p,v,S,L),this.provider=D,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var p=this;return(0,l.Z)(function*(){const v=yield p.execute();return Re(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,l.Z)(function*(){Sn(1===p.filter.length,"Popup operations only handle one event");const v=as();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(D=>{p.reject(D)}),p.resolver._isIframeWebStorageSupported(p.auth,D=>{D||p.reject(An(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(An(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,D;this.pollId=(null===(D=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===D?void 0:D.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(An(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,oe.get())};p()}}return m.currentPopupAction=null,m})();const Vi=new Map;class ea extends W{constructor(h,p,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,l.Z)(function*(){let v=Vi.get(p.auth._key());if(!v){try{const S=(yield function ta(m,h){return Ls.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;v=()=>Promise.resolve(S)}catch(D){v=()=>Promise.reject(D)}Vi.set(p.auth._key(),v)}return p.bypassAuthState||Vi.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,v=this;return(0,l.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(v,h);if("unknown"!==h.type){if(h.eventId){const D=yield v.auth._redirectUserForId(h.eventId);if(D)return v.user=D,p().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function Ls(){return(Ls=(0,l.Z)(function*(m,h){const p=Ty(h),v=Oc(m);if(!(yield v._isAvailable()))return!1;const D="true"===(yield v._get(p));return yield v._remove(p),D})).apply(this,arguments)}function ls(m,h){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,l.Z)(function*(m,h){return Oc(m)._set(Ty(h),"true")})).apply(this,arguments)}function ds(m,h){Vi.set(m._key(),h)}function Oc(m){return Xt(m._redirectPersistence)}function Ty(m){return Yr("pendingRedirect",m.config.apiKey,m.name)}function Rc(){return(Rc=(0,l.Z)(function*(m,h,p){const v=nn(m);zr(m,h,Jr);const D=Yt(v,p);return yield ls(D,v),D._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function gi(){return(gi=(0,l.Z)(function*(m,h,p){const v=(0,N.m9)(m);zr(v.auth,h,Jr);const D=Yt(v.auth,p);yield ls(D,v.auth);const S=yield hd(v);return D._openRedirect(v.auth,h,"reauthViaRedirect",S)})).apply(this,arguments)}function ag(){return(ag=(0,l.Z)(function*(m,h,p){const v=(0,N.m9)(m);zr(v.auth,h,Jr);const D=Yt(v.auth,p);yield vr(!1,v,h.providerId),yield ls(D,v.auth);const S=yield hd(v);return D._openRedirect(v.auth,h,"linkViaRedirect",S)})).apply(this,arguments)}function xu(){return(xu=(0,l.Z)(function*(m,h){return yield nn(m)._initializationPromise,Pc(m,h,!1)})).apply(this,arguments)}function Pc(m,h){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,l.Z)(function*(m,h,p=!1){const v=nn(m),D=Yt(v,h),L=yield new ea(v,D,p).execute();return L&&!p&&(delete L.user._redirectEventId,yield v._persistUserIfCurrent(L.user),yield v._setRedirectUser(null,h)),L})).apply(this,arguments)}function hd(m){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,l.Z)(function*(m){const h=as(`${m.uid}:::`);return m._redirectEventId=h,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),h})).apply(this,arguments)}class fd{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(p=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Nc(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cg(m);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var v;if(h.error&&!cg(h)){const D=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(An(this.auth,D))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const v=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(pd(h))}saveEventToCache(h){this.cachedEventUids.add(pd(h)),this.lastProcessedEventTime=Date.now()}}function pd(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(h=>h).join("-")}function cg({type:m,error:h}){return"unknown"===m&&"auth/no-auth-event"===(null==h?void 0:h.code)}function co(m){return ja.apply(this,arguments)}function ja(){return(ja=(0,l.Z)(function*(m,h={}){return $t(m,"GET","/v1/projects",h)})).apply(this,arguments)}const Sy=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,af=/^https?/;function md(){return(md=(0,l.Z)(function*(m){if(m.config.emulator)return;const{authorizedDomains:h}=yield co(m);for(const p of h)try{if(xy(p))return}catch(v){}Ht(m,"unauthorized-domain")})).apply(this,arguments)}function xy(m){const h=Mn(),{protocol:p,hostname:v}=new URL(h);if(m.startsWith("chrome-extension://")){const L=new URL(m);return""===L.hostname&&""===v?"chrome-extension:"===p&&m.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&L.hostname===v}if(!af.test(p))return!1;if(Sy.test(m))return v===m;const D=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+D+"|"+D+")$","i").test(v)}const My=new it(3e4,6e4);function uf(){const m=Bt().___jsl;if(null==m?void 0:m.H)for(const h of Object.keys(m.H))if(m.H[h].r=m.H[h].r||[],m.H[h].L=m.H[h].L||[],m.H[h].r=[...m.H[h].L],m.CP)for(let p=0;p<m.CP.length;p++)m.CP[p]=null}let yd=null;function Oy(m){return yd=yd||function cf(m){return new Promise((h,p)=>{var v,D,S;function L(){uf(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{uf(),p(An(m,"network-request-failed"))},timeout:My.get()})}if(null===(D=null===(v=Bt().gapi)||void 0===v?void 0:v.iframes)||void 0===D?void 0:D.Iframe)h(gapi.iframes.getContext());else{if(!(null===(S=Bt().gapi)||void 0===S?void 0:S.load)){const Q=of("iframefcb");return Bt()[Q]=()=>{gapi.load?L():p(An(m,"network-request-failed"))},ad(`https://apis.google.com/js/api.js?onload=${Q}`).catch(xe=>p(xe))}L()}}).catch(h=>{throw yd=null,h})}(m),yd}const Ry=new it(5e3,15e3),vd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vs(m){const h=m.config;Re(h.authDomain,m,"auth-domain-config-required");const p=h.emulator?pt(h,"emulator/auth/iframe"):`https://${m.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:m.name,v:ie.SDK_VERSION},D=wd.get(m.config.apiHost);D&&(v.eid=D);const S=m._getFrameworks();return S.length&&(v.fw=S.join(",")),`${p}?${(0,N.xO)(v).slice(1)}`}function kc(){return kc=(0,l.Z)(function*(m){const h=yield Oy(m),p=Bt().gapi;return Re(p,m,"internal-error"),h.open({where:document.body,url:Vs(m),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vd,dontclear:!0},v=>new Promise(function(){var D=(0,l.Z)(function*(S,L){yield v.restyle({setHideOnLeave:!1});const Q=An(m,"network-request-failed"),xe=Bt().setTimeout(()=>{L(Q)},Ry.get());function De(){Bt().clearTimeout(xe),S(v)}v.ping(De).then(De,()=>{L(Q)})});return function(S,L){return D.apply(this,arguments)}}()))}),kc.apply(this,arguments)}const lg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class bd{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function Ed(m,h,p,v,D,S){Re(m.config.authDomain,m,"auth-domain-config-required"),Re(m.config.apiKey,m,"invalid-api-key");const L={apiKey:m.config.apiKey,appName:m.name,authType:p,redirectUrl:v,v:ie.SDK_VERSION,eventId:D};if(h instanceof Jr){h.setDefaultLanguage(m.languageCode),L.providerId=h.providerId||"",(0,N.xb)(h.getCustomParameters())||(L.customParameters=JSON.stringify(h.getCustomParameters()));for(const[xe,De]of Object.entries(S||{}))L[xe]=De}if(h instanceof Ri){const xe=h.getScopes().filter(De=>""!==De);xe.length>0&&(L.scopes=xe.join(","))}m.tenantId&&(L.tid=m.tenantId);const Q=L;for(const xe of Object.keys(Q))void 0===Q[xe]&&delete Q[xe];return`${function Fc({config:m}){return m.emulator?pt(m,"emulator/auth/handler"):`https://${m.authDomain}/__/auth/handler`}(m)}?${(0,N.xO)(Q).slice(1)}`}const Za="webStorageSupport";class Pu extends class Id{constructor(h){this.factorId=h}_process(h,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,v);case"signin":return this._finalizeSignIn(h,p.credential);default:return st("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Pu(h)}_finalizeEnroll(h,p,v){return function er(m,h){return $t(m,"POST","/v2/accounts/mfaEnrollment:finalize",sn(m,h))}(h,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function od(m,h){return $t(m,"POST","/v2/accounts/mfaSignIn:finalize",sn(m,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let fg=(()=>{class m{constructor(){}static assertion(p){return Pu._fromCredential(p)}}return m.FACTOR_ID="phone",m})();var Lc="@firebase/auth";class Wn{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,l.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(v=>{var D;h((null===(D=v)||void 0===D?void 0:D.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ho(){return window}function ff(){return(ff=(0,l.Z)(function*(m,h,p){var v;const{BuildInfo:D}=ho();Sn(h.sessionId,"AuthEvent did not contain a session ID");const S=yield Ha(h.sessionId),L={};return Pn()?L.ibi=D.packageName:Rn()?L.apn=D.packageName:Ht(m,"operation-not-supported-in-this-environment"),D.displayName&&(L.appDisplayName=D.displayName),L.sessionId=S,Ed(m,p,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,L)})).apply(this,arguments)}function pf(){return(pf=(0,l.Z)(function*(m){const{BuildInfo:h}=ho(),p={};Pn()?p.iosBundleId=h.packageName:Rn()?p.androidPackageName=h.packageName:Ht(m,"operation-not-supported-in-this-environment"),yield co(m,p)})).apply(this,arguments)}function ra(){return(ra=(0,l.Z)(function*(m,h,p){const{cordova:v}=ho();let D=()=>{};try{yield new Promise((S,L)=>{let Q=null;function xe(){var tt;S();const Lt=null===(tt=v.plugins.browsertab)||void 0===tt?void 0:tt.close;"function"==typeof Lt&&Lt(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function De(){Q||(Q=window.setTimeout(()=>{L(An(m,"redirect-cancelled-by-user"))},2e3))}function Ye(){"visible"===(null==document?void 0:document.visibilityState)&&De()}h.addPassiveListener(xe),document.addEventListener("resume",De,!1),Rn()&&document.addEventListener("visibilitychange",Ye,!1),D=()=>{h.removePassiveListener(xe),document.removeEventListener("resume",De,!1),document.removeEventListener("visibilitychange",Ye,!1),Q&&window.clearTimeout(Q)}})}finally{D()}})).apply(this,arguments)}function Ha(m){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,l.Z)(function*(m){const h=Uc(m),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(D=>D.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Uc(m){if(Sn(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(m);const h=new ArrayBuffer(m.length),p=new Uint8Array(h);for(let v=0;v<m.length;v++)p[v]=m.charCodeAt(v);return p}!function Bi(m){(0,ie._registerComponent)(new ft.wA("auth",(h,{options:p})=>{const v=h.getProvider("app").getImmediate(),D=h.getProvider("heartbeat"),{apiKey:S,authDomain:L}=v.options;return((Q,xe)=>{Re(S&&!S.includes(":"),"invalid-api-key",{appName:Q.name}),Re(!(null==L?void 0:L.includes(":")),"argument-error",{appName:Q.name});const De={apiKey:S,authDomain:L,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uc(m)},Ye=new Ds(Q,xe,De);return function zs(m,h){const p=(null==h?void 0:h.persistence)||[],v=(Array.isArray(p)?p:[p]).map(Xt);(null==h?void 0:h.errorMap)&&m._updateErrorMap(h.errorMap),m._initializeWithPersistence(v,null==h?void 0:h.popupRedirectResolver)}(Ye,p),Ye})(v,D)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,v)=>{h.getProvider("auth-internal").initialize()})),(0,ie._registerComponent)(new ft.wA("auth-internal",h=>{const p=nn(h.getProvider("auth").getImmediate());return new Wn(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ie.registerVersion)(Lc,"0.20.5",function df(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(m)),(0,ie.registerVersion)(Lc,"0.20.5","esm2017")}("Browser");class Bc extends fd{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,l.Z)(function*(){yield h.initPromise})()}}function gg(m){return Td.apply(this,arguments)}function Td(){return(Td=(0,l.Z)(function*(m){const h=yield Ad()._get(Ga(m));return h&&(yield Ad()._remove(Ga(m))),h})).apply(this,arguments)}function mg(){const m=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const v=Math.floor(Math.random()*h.length);m.push(h.charAt(v))}return m.join("")}function Ad(){return Xt(zo)}function Ga(m){return Yr("authEvent",m.config.apiKey,m.name)}function fo(m){if(!(null==m?void 0:m.includes("?")))return{};const[h,...p]=m.split("?");return(0,N.zd)(p.join("?"))}function yg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:An("no-auth-event")}}function Hc(){var m;return(null===(m=null==self?void 0:self.location)||void 0===m?void 0:m.protocol)||null}function _g(m=(0,N.z$)()){return!("file:"!==Hc()&&"ionic:"!==Hc()&&"capacitor:"!==Hc()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function bg(){try{const m=self.localStorage,h=as();if(m)return m.setItem(h,"1"),m.removeItem(h),!function wg(m=(0,N.z$)()){return function Zy(){return(0,N.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Hy(m=(0,N.z$)()){return/Edge\/\d+/.test(m)}(m)}()||(0,N.hl)()}catch(m){return Sd()&&(0,N.hl)()}return!1}function Sd(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function vf(){return(function $y(){return"http:"===Hc()||"https:"===Hc()}()||(0,N.ru)()||_g())&&!function vg(){return(0,N.b$)()||(0,N.UG)()}()&&bg()&&!Sd()}function Eg(){return _g()&&"undefined"!=typeof document}function po(){return(po=(0,l.Z)(function*(){return!!Eg()&&new Promise(m=>{const h=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),m(!0)})})})).apply(this,arguments)}const mi={LOCAL:"local",NONE:"none",SESSION:"session"},Gc=Re,xd="persistence";function ji(m){return qc.apply(this,arguments)}function qc(){return(qc=(0,l.Z)(function*(m){yield m._initializationPromise;const h=Ig(),p=Yr(xd,m.config.apiKey,m.name);h&&h.setItem(p,m._getPersistence())})).apply(this,arguments)}function Ig(){var m;try{return(null===(m=function go(){return"undefined"!=typeof window?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch(h){return null}}const Cg=Re;class ii{constructor(){this.browserResolver=Xt(class Ny{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ni,this._completeRedirectFn=Pc,this._overrideRedirectResult=ds}_openPopup(h,p,v,D){var S=this;return(0,l.Z)(function*(){var L;Sn(null===(L=S.eventManagers[h._key()])||void 0===L?void 0:L.manager,"_initialize() not called before _openPopup()");const Q=Ed(h,p,v,Mn(),D);return function lo(m,h,p,v=500,D=600){const S=Math.max((window.screen.availHeight-D)/2,0).toString(),L=Math.max((window.screen.availWidth-v)/2,0).toString();let Q="";const xe=Object.assign(Object.assign({},lg),{width:v.toString(),height:D.toString(),top:S,left:L}),De=(0,N.z$)().toLowerCase();p&&(Q=va(De)?"_blank":p),_a(De)&&(h=h||"http://localhost",xe.scrollbars="yes");const Ye=Object.entries(xe).reduce((Lt,[nr,mo])=>`${Lt}${nr}=${mo},`,"");if(function Ll(m=(0,N.z$)()){var h;return Pn(m)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(De)&&"_self"!==Q)return function lf(m,h){const p=document.createElement("a");p.href=m,p.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(h||"",Q),new bd(null);const tt=window.open(h||"",Q,Ye);Re(tt,m,"popup-blocked");try{tt.focus()}catch(Lt){}return new bd(tt)}(h,Q,as())})()}_openRedirect(h,p,v,D){var S=this;return(0,l.Z)(function*(){return yield S._originValidation(h),function ki(m){Bt().location.href=m}(Ed(h,p,v,Mn(),D)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:D,promise:S}=this.eventManagers[p];return D?Promise.resolve(D):(Sn(S,"If manager is not set, promise should be"),S)}const v=this.initAndGetManager(h);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(h){var p=this;return(0,l.Z)(function*(){const v=yield function Ou(m){return kc.apply(this,arguments)}(h),D=new fd(h);return v.register("authEvent",S=>(Re(null==S?void 0:S.authEvent,h,"invalid-auth-event"),{status:D.onEvent(S.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:D},p.iframes[h._key()]=v,D})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Za,{type:Za},D=>{var S;const L=null===(S=null==D?void 0:D[0])||void 0===S?void 0:S[Za];void 0!==L&&p(!!L),Ht(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function gd(m){return md.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return Qr()||Cs()||Pn()}}),this.cordovaResolver=Xt(class jc{constructor(){this._redirectPersistence=Ni,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Pc,this._overrideRedirectResult=ds}_initialize(h){var p=this;return(0,l.Z)(function*(){const v=h._key();let D=p.eventManagers.get(v);return D||(D=new Bc(h),p.eventManagers.set(v,D),p.attachCallbackListeners(h,D)),D})()}_openPopup(h){Ht(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,v,D){var S=this;return(0,l.Z)(function*(){!function xr(m){var h,p,v,D,S,L,Q,xe,De,Ye;const tt=ho();Re("function"==typeof(null===(h=null==tt?void 0:tt.universalLinks)||void 0===h?void 0:h.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Re(void 0!==(null===(p=null==tt?void 0:tt.BuildInfo)||void 0===p?void 0:p.packageName),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Re("function"==typeof(null===(S=null===(D=null===(v=null==tt?void 0:tt.cordova)||void 0===v?void 0:v.plugins)||void 0===D?void 0:D.browsertab)||void 0===S?void 0:S.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Re("function"==typeof(null===(xe=null===(Q=null===(L=null==tt?void 0:tt.cordova)||void 0===L?void 0:L.plugins)||void 0===Q?void 0:Q.browsertab)||void 0===xe?void 0:xe.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Re("function"==typeof(null===(Ye=null===(De=null==tt?void 0:tt.cordova)||void 0===De?void 0:De.InAppBrowser)||void 0===Ye?void 0:Ye.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const L=yield S._initialize(h);yield L.initialized(),L.resetRedirect(),function na(){Vi.clear()}(),yield S._originValidation(h);const Q=function mf(m,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:mg(),postBody:null,tenantId:m.tenantId,error:An(m,"no-auth-event")}}(h,v,D);yield function Fy(m,h){return Ad()._set(Ga(m),h)}(h,Q);const xe=yield function Dd(m,h,p){return ff.apply(this,arguments)}(h,Q,p),De=yield function B0(m){const{cordova:h}=ho();return new Promise(p=>{h.plugins.browsertab.isAvailable(v=>{let D=null;v?h.plugins.browsertab.openUrl(m):D=h.InAppBrowser.open(m,function on(m=(0,N.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),p(D)})})}(xe);return function gf(m,h,p){return ra.apply(this,arguments)}(h,L,De)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function ky(m){return pf.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:v,handleOpenURL:D,BuildInfo:S}=ho(),L=setTimeout((0,l.Z)(function*(){yield gg(h),p.onEvent(yg())}),500),Q=function(){var Ye=(0,l.Z)(function*(tt){clearTimeout(L);const Lt=yield gg(h);let nr=null;Lt&&(null==tt?void 0:tt.url)&&(nr=function yf(m,h){var p,v;const D=function Vy(m){const h=fo(m),p=h.link?decodeURIComponent(h.link):void 0,v=fo(p).link,D=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return fo(D).link||D||v||p||m}(h);if(D.includes("/__/auth/callback")){const S=fo(D),L=S.firebaseError?function Ly(m){try{return JSON.parse(m)}catch(h){return null}}(decodeURIComponent(S.firebaseError)):null,Q=null===(v=null===(p=null==L?void 0:L.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],xe=Q?An(Q):null;return xe?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:xe,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:D,postBody:null}}return null}(Lt,tt.url)),p.onEvent(nr||yg())});return function(Lt){return Ye.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,Q);const xe=D,De=`${S.packageName.toLowerCase()}://`;ho().handleOpenURL=function(){var Ye=(0,l.Z)(function*(tt){if(tt.toLowerCase().startsWith(De)&&Q({url:tt}),"function"==typeof xe)try{xe(tt)}catch(Lt){console.error(Lt)}});return function(tt){return Ye.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ni,this._completeRedirectFn=Pc,this._overrideRedirectResult=ds}_initialize(h){var p=this;return(0,l.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,v,D){var S=this;return(0,l.Z)(function*(){return yield S.selectUnderlyingResolver(),S.assertedUnderlyingResolver._openPopup(h,p,v,D)})()}_openRedirect(h,p,v,D){var S=this;return(0,l.Z)(function*(){return yield S.selectUnderlyingResolver(),S.assertedUnderlyingResolver._openRedirect(h,p,v,D)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Eg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Cg(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,l.Z)(function*(){if(h.underlyingResolver)return;const p=yield function Gy(){return po.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function bf(m){return m.unwrap()}function Ef(m){return Md(m)}function Md(m){const{_tokenResponse:h}=m instanceof N.ZR?m.customData:m;if(!h)return null;if(!(m instanceof N.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Fs.credentialFromResult(m);const p=h.providerId;if(!p||"password"===p)return null;let v;switch(p){case"google.com":v=Fn;break;case"facebook.com":v=Tr;break;case"github.com":v=Ro;break;case"twitter.com":v=lt;break;default:const{oauthIdToken:D,oauthAccessToken:S,oauthTokenSecret:L,pendingToken:Q,nonce:xe}=h;return S||L||D||Q?Q?p.startsWith("saml.")?lr._create(p,Q):Mi._fromParams({providerId:p,signInMethod:p,pendingToken:Q,idToken:D,accessToken:S}):new Dr(p).credential({idToken:D,accessToken:S,rawNonce:xe}):null}return m instanceof N.ZR?v.credentialFromError(m):v.credentialFromResult(m)}function yi(m,h){return h.catch(p=>{throw p instanceof N.ZR&&function zc(m,h){var p,v;const D=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===(null===(v=h)||void 0===v?void 0:v.code))h.resolver=new Tg(m,function Iu(m,h){var p;const v=(0,N.m9)(m),D=h;return Re(h.customData.operationType,v,"argument-error"),Re(null===(p=D.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),ro._fromError(v,D)}(m,h));else if(D){const S=Md(h),L=h;S&&(L.credential=S,L.tenantId=D.tenantId||void 0,L.email=D.email||void 0,L.phoneNumber=D.phoneNumber||void 0)}}(m,p),p}).then(p=>{const D=p.user;return{operationType:p.operationType,credential:Ef(p),additionalUserInfo:Xr(p),user:Us.getOrCreate(D)}})}function ia(m,h){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,l.Z)(function*(m,h){const p=yield h;return{verificationId:p.verificationId,confirm:v=>yi(m,p.confirm(v))}})).apply(this,arguments)}class Tg{constructor(h,p){this.resolver=p,this.auth=function Dg(m){return m.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return yi(bf(this.auth),this.resolver.resolveSignIn(h))}}class Us{constructor(h){this._delegate=h,this.multiFactor=function bc(m){const h=(0,N.m9)(m);return Ho.has(h)||Ho.set(h,wc._fromUser(h)),Ho.get(h)}(h)}static getOrCreate(h){return Us.USER_MAP.has(h)||Us.USER_MAP.set(h,new Us(h)),Us.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,l.Z)(function*(){return yi(p.auth,fi(p._delegate,h))})()}linkWithPhoneNumber(h,p){var v=this;return(0,l.Z)(function*(){return ia(v.auth,function Tu(m,h,p){return Au.apply(this,arguments)}(v._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,l.Z)(function*(){return yi(p.auth,function Ct(m,h,p){return at.apply(this,arguments)}(p._delegate,h,ii))})()}linkWithRedirect(h){var p=this;return(0,l.Z)(function*(){return yield ji(nn(p.auth)),function sg(m,h,p){return function og(m,h,p){return ag.apply(this,arguments)}(m,h,p)}(p._delegate,h,ii)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,l.Z)(function*(){return yi(p.auth,Pi(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return ia(this.auth,function ks(m,h,p){return Mc.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return yi(this.auth,function ot(m,h,p){return ht.apply(this,arguments)}(this._delegate,h,ii))}reauthenticateWithRedirect(h){var p=this;return(0,l.Z)(function*(){return yield ji(nn(p.auth)),function Su(m,h,p){return function hs(m,h,p){return gi.apply(this,arguments)}(m,h,p)}(p._delegate,h,ii)})()}sendEmailVerification(h){return function vu(m,h){return wu.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,l.Z)(function*(){return yield function zh(m,h){return an.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function bu(m,h){return _c((0,N.m9)(m),h,null)}(this._delegate,h)}updatePassword(h){return function nd(m,h){return _c((0,N.m9)(m),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Ua(m,h){return Xo.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function ef(m,h){return td.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function Xh(m,h,p){return ed.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Us.USER_MAP=new WeakMap;const qa=Re;let Ag=(()=>{class m{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:D}=p.options;qa(D,"invalid-api-key",{appName:p.name}),qa(D,"invalid-api-key",{appName:p.name});const S="undefined"!=typeof window?ii:void 0;this._delegate=v.initialize({options:{persistence:zy(D,p.name),popupRedirectResolver:S}}),this._delegate._updateErrorMap(rn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Us.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function Wp(m,h,p){const v=nn(m);Re(v._canInitEmulator,v,"emulator-config-failed"),Re(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const D=!!(null==p?void 0:p.disableWarnings),S=$h(h),{host:L,port:Q}=function di(m){const h=$h(m),p=/(\/\/)?([^?#/]+)/.exec(m.substr(h.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",D=/^(\[[^\]]+\])(:|$)/.exec(v);if(D){const S=D[1];return{host:S,port:Zh(v.substr(S.length+1))}}{const[S,L]=v.split(":");return{host:S,port:Zh(L)}}}(h);v.config.emulator={url:`${S}//${L}${null===Q?"":`:${Q}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:L,port:Q,protocol:S.replace(":",""),options:Object.freeze({disableWarnings:D})}),D||function Kp(){function m(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,p,v)}applyActionCode(p){return function Kh(m,h){return Ma.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return yu(this._delegate,p)}confirmPasswordReset(p,v){return function gc(m,h,p){return Bo.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var D=this;return(0,l.Z)(function*(){return yi(D._delegate,function Xp(m,h,p){return Ln.apply(this,arguments)}(D._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function yc(m,h){return Os.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function mc(m,h){const p=Ss.parseLink(h);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,l.Z)(function*(){qa(vf(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function uo(m,h){return xu.apply(this,arguments)}(p._delegate,ii);return v?yi(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function $c(m,h){nn(m)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,v,D){const{next:S,error:L,complete:Q}=si(p,v,D);return this._delegate.onAuthStateChanged(S,L,Q)}onIdTokenChanged(p,v,D){const{next:S,error:L,complete:Q}=si(p,v,D);return this._delegate.onIdTokenChanged(S,L,Q)}sendSignInLinkToEmail(p,v){return function En(m,h,p){return Ra.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function xa(m,h,p){return pc.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,l.Z)(function*(){let D;switch(function qy(m,h){Gc(Object.values(mi).includes(h),m,"invalid-persistence-type"),(0,N.b$)()?Gc(h!==mi.SESSION,m,"unsupported-persistence-type"):(0,N.UG)()?Gc(h===mi.NONE,m,"unsupported-persistence-type"):Sd()?Gc(h===mi.NONE||h===mi.LOCAL&&(0,N.hl)(),m,"unsupported-persistence-type"):Gc(h===mi.NONE||bg(),m,"unsupported-persistence-type")}(v._delegate,p),p){case mi.SESSION:D=Ni;break;case mi.LOCAL:D=(yield Xt(qn)._isAvailable())?qn:zo;break;case mi.NONE:D=zt;break;default:return Ht("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(D)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return yi(this._delegate,function fc(m){return fu.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return yi(this._delegate,eo(this._delegate,p))}signInWithCustomToken(p){return yi(this._delegate,function Wh(m,h){return Sa.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return yi(this._delegate,function Xn(m,h,p){return eo((0,N.m9)(m),cr.credential(h,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return yi(this._delegate,function Yh(m,h,p){return Qh.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return ia(this._delegate,function Vn(m,h,p){return Jo.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,l.Z)(function*(){return qa(vf(),v._delegate,"operation-not-supported-in-this-environment"),yi(v._delegate,function we(m,h,p){return Ue.apply(this,arguments)}(v._delegate,p,ii))})()}signInWithRedirect(p){var v=this;return(0,l.Z)(function*(){return qa(vf(),v._delegate,"operation-not-supported-in-this-environment"),yield ji(v._delegate),function Ay(m,h,p){return function ig(m,h,p){return Rc.apply(this,arguments)}(m,h,p)}(v._delegate,p,ii)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function _u(m,h){return Jl.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=mi,m})();function si(m,h,p){let v=m;"function"!=typeof m&&({next:v,error:h,complete:p}=m);const D=v;return{next:L=>D(L&&Us.getOrCreate(L)),error:h,complete:p}}function zy(m,h){const p=function wf(m,h){const p=Ig();if(!p)return[];const v=Yr(xd,m,h);switch(p.getItem(v)){case mi.NONE:return[zt];case mi.LOCAL:return[qn,Ni];case mi.SESSION:return[Ni];default:return[]}}(m,h);if("undefined"!=typeof self&&!p.includes(qn)&&p.push(qn),"undefined"!=typeof window)for(const v of[zo,Ni])p.includes(v)||p.push(v);return p.includes(zt)||p.push(zt),p}class Nu{constructor(){this.providerId="phone",this._delegate=new Fs(bf(J.Z.auth()))}static credential(h,p){return Fs.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}Nu.PHONE_SIGN_IN_METHOD=Fs.PHONE_SIGN_IN_METHOD,Nu.PROVIDER_ID=Fs.PROVIDER_ID;const If=Re;class Kc{constructor(h,p,v=J.Z.app()){var D;If(null===(D=v.options)||void 0===D?void 0:D.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Sc(h,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Cf(m){m.INTERNAL.registerComponent(new ft.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new Ag(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:cr,FacebookAuthProvider:Tr,GithubAuthProvider:Ro,GoogleAuthProvider:Fn,OAuthProvider:Dr,SAMLAuthProvider:xs,PhoneAuthProvider:Nu,PhoneMultiFactorGenerator:fg,RecaptchaVerifier:Kc,TwitterAuthProvider:lt,Auth:Ag,AuthCredential:ba,Error:N.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.2.18")}(J.Z)},8306:(We,ve,P)=>{P.d(ve,{y:()=>$});var l=P(2961),J=P(727),N=P(8822),ie=P(4671);var ue=P(2416),se=P(576),le=P(2806);let $=(()=>{class Ee{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const de=new Ee;return de.source=this,de.operator=Le,de}subscribe(Le,de,fe){const Me=function Be(Ee){return Ee&&Ee instanceof l.Lv||function ee(Ee){return Ee&&(0,se.m)(Ee.next)&&(0,se.m)(Ee.error)&&(0,se.m)(Ee.complete)}(Ee)&&(0,J.Nn)(Ee)}(Le)?Le:new l.Hp(Le,de,fe);return(0,le.x)(()=>{const{operator:Ve,source:Ne}=this;Me.add(Ve?Ve.call(Me,Ne):Ne?this._subscribe(Me):this._trySubscribe(Me))}),Me}_trySubscribe(Le){try{return this._subscribe(Le)}catch(de){Le.error(de)}}forEach(Le,de){return new(de=q(de))((fe,Me)=>{let Ve;Ve=this.subscribe(Ne=>{try{Le(Ne)}catch(Ke){Me(Ke),null==Ve||Ve.unsubscribe()}},Me,fe)})}_subscribe(Le){var de;return null===(de=this.source)||void 0===de?void 0:de.subscribe(Le)}[N.L](){return this}pipe(...Le){return function ge(Ee){return 0===Ee.length?ie.y:1===Ee.length?Ee[0]:function(Le){return Ee.reduce((de,fe)=>fe(de),Le)}}(Le)(this)}toPromise(Le){return new(Le=q(Le))((de,fe)=>{let Me;this.subscribe(Ve=>Me=Ve,Ve=>fe(Ve),()=>de(Me))})}}return Ee.create=Oe=>new Ee(Oe),Ee})();function q(Ee){var Oe;return null!==(Oe=null!=Ee?Ee:ue.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(We,ve,P)=>{P.d(ve,{x:()=>ue});var l=P(8306),J=P(727);const ie=(0,P(3888).d)(le=>function(){le(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=P(8737),ge=P(2806);let ue=(()=>{class le extends l.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const ee=new se(this,this);return ee.operator=q,ee}_throwIfClosed(){if(this.closed)throw new ie}next(q){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const ee=this.observers.slice();for(const Be of ee)Be.next(q)}})}error(q){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:ee}=this;for(;ee.length;)ee.shift().error(q)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:ee,isStopped:Be,observers:Ee}=this;return ee||Be?J.Lc:(Ee.push(q),new J.w0(()=>(0,re.P)(Ee,q)))}_checkFinalizedStatuses(q){const{hasError:ee,thrownError:Be,isStopped:Ee}=this;ee?q.error(Be):Ee&&q.complete()}asObservable(){const q=new l.y;return q.source=this,q}}return le.create=($,q)=>new se($,q),le})();class se extends ue{constructor($,q){super(),this.destination=$,this.source=q}next($){var q,ee;null===(ee=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===ee||ee.call(q,$)}error($){var q,ee;null===(ee=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===ee||ee.call(q,$)}complete(){var $,q;null===(q=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===q||q.call($)}_subscribe($){var q,ee;return null!==(ee=null===(q=this.source)||void 0===q?void 0:q.subscribe($))&&void 0!==ee?ee:J.Lc}}},2961:(We,ve,P)=>{P.d(ve,{Hp:()=>Be,Lv:()=>ee});var l=P(576),J=P(727),N=P(2416),ie=P(7849);function re(){}const ge=le("C",void 0,void 0);function le(fe,Me,Ve){return{kind:fe,value:Me,error:Ve}}var $=P(3410),q=P(2806);class ee extends J.w0{constructor(Me){super(),this.isStopped=!1,Me?(this.destination=Me,(0,J.Nn)(Me)&&Me.add(this)):this.destination=de}static create(Me,Ve,Ne){return new Be(Me,Ve,Ne)}next(Me){this.isStopped?Le(function se(fe){return le("N",fe,void 0)}(Me),this):this._next(Me)}error(Me){this.isStopped?Le(function ue(fe){return le("E",void 0,fe)}(Me),this):(this.isStopped=!0,this._error(Me))}complete(){this.isStopped?Le(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Me){this.destination.next(Me)}_error(Me){try{this.destination.error(Me)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Be extends ee{constructor(Me,Ve,Ne){let Ke;if(super(),(0,l.m)(Me))Ke=Me;else if(Me){let Ce;({next:Ke,error:Ve,complete:Ne}=Me),this&&N.v.useDeprecatedNextContext?(Ce=Object.create(Me),Ce.unsubscribe=()=>this.unsubscribe()):Ce=Me,Ke=null==Ke?void 0:Ke.bind(Ce),Ve=null==Ve?void 0:Ve.bind(Ce),Ne=null==Ne?void 0:Ne.bind(Ce)}this.destination={next:Ke?Ee(Ke):re,error:Ee(null!=Ve?Ve:Oe),complete:Ne?Ee(Ne):re}}}function Ee(fe,Me){return(...Ve)=>{try{fe(...Ve)}catch(Ne){N.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(Ne):(0,ie.h)(Ne)}}}function Oe(fe){throw fe}function Le(fe,Me){const{onStoppedNotification:Ve}=N.v;Ve&&$.z.setTimeout(()=>Ve(fe,Me))}const de={closed:!0,next:re,error:Oe,complete:re}},727:(We,ve,P)=>{P.d(ve,{Lc:()=>ge,w0:()=>re,Nn:()=>ue});var l=P(576);const N=(0,P(3888).d)(le=>function(q){le(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((ee,Be)=>`${Be+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var ie=P(8737);class re{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const Ee of q)Ee.remove(this);else q.remove(this);const{initialTeardown:ee}=this;if((0,l.m)(ee))try{ee()}catch(Ee){$=Ee instanceof N?Ee.errors:[Ee]}const{_teardowns:Be}=this;if(Be){this._teardowns=null;for(const Ee of Be)try{se(Ee)}catch(Oe){$=null!=$?$:[],Oe instanceof N?$=[...$,...Oe.errors]:$.push(Oe)}}if($)throw new N($)}}add($){var q;if($&&$!==this)if(this.closed)se($);else{if($ instanceof re){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._teardowns=null!==(q=this._teardowns)&&void 0!==q?q:[]).push($)}}_hasParent($){const{_parentage:q}=this;return q===$||Array.isArray(q)&&q.includes($)}_addParent($){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push($),q):q?[q,$]:$}_removeParent($){const{_parentage:q}=this;q===$?this._parentage=null:Array.isArray(q)&&(0,ie.P)(q,$)}remove($){const{_teardowns:q}=this;q&&(0,ie.P)(q,$),$ instanceof re&&$._removeParent(this)}}re.EMPTY=(()=>{const le=new re;return le.closed=!0,le})();const ge=re.EMPTY;function ue(le){return le instanceof re||le&&"closed"in le&&(0,l.m)(le.remove)&&(0,l.m)(le.add)&&(0,l.m)(le.unsubscribe)}function se(le){(0,l.m)(le)?le():le.unsubscribe()}},2416:(We,ve,P)=>{P.d(ve,{v:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(We,ve,P)=>{P.d(ve,{E:()=>J});const J=new(P(8306).y)(re=>re.complete())},8996:(We,ve,P)=>{P.d(ve,{D:()=>Ke});var l=P(8421),J=P(5363),N=P(9468),ge=P(8306),se=P(2202),le=P(576),$=P(9672);function ee(Ce,Qe){if(!Ce)throw new Error("Iterable cannot be null");return new ge.y(ze=>{(0,$.f)(ze,Qe,()=>{const ye=Ce[Symbol.asyncIterator]();(0,$.f)(ze,Qe,()=>{ye.next().then(Z=>{Z.done?ze.complete():ze.next(Z.value)})},0,!0)})})}var Be=P(3670),Ee=P(8239),Oe=P(1144),Le=P(6495),de=P(2206),fe=P(4532),Me=P(3260);function Ke(Ce,Qe){return Qe?function Ne(Ce,Qe){if(null!=Ce){if((0,Be.c)(Ce))return function ie(Ce,Qe){return(0,l.Xf)(Ce).pipe((0,N.R)(Qe),(0,J.Q)(Qe))}(Ce,Qe);if((0,Oe.z)(Ce))return function ue(Ce,Qe){return new ge.y(ze=>{let ye=0;return Qe.schedule(function(){ye===Ce.length?ze.complete():(ze.next(Ce[ye++]),ze.closed||this.schedule())})})}(Ce,Qe);if((0,Ee.t)(Ce))return function re(Ce,Qe){return(0,l.Xf)(Ce).pipe((0,N.R)(Qe),(0,J.Q)(Qe))}(Ce,Qe);if((0,de.D)(Ce))return ee(Ce,Qe);if((0,Le.T)(Ce))return function q(Ce,Qe){return new ge.y(ze=>{let ye;return(0,$.f)(ze,Qe,()=>{ye=Ce[se.h](),(0,$.f)(ze,Qe,()=>{let Z,X;try{({value:Z,done:X}=ye.next())}catch(ce){return void ze.error(ce)}X?ze.complete():ze.next(Z)},0,!0)}),()=>(0,le.m)(null==ye?void 0:ye.return)&&ye.return()})}(Ce,Qe);if((0,Me.L)(Ce))return function Ve(Ce,Qe){return ee((0,Me.Q)(Ce),Qe)}(Ce,Qe)}throw(0,fe.z)(Ce)}(Ce,Qe):(0,l.Xf)(Ce)}},8421:(We,ve,P)=>{P.d(ve,{Xf:()=>Be});var l=P(5987),J=P(1144),N=P(8239),ie=P(8306),re=P(3670),ge=P(2206),ue=P(4532),se=P(6495),le=P(3260),$=P(576),q=P(7849),ee=P(8822);function Be(Ne){if(Ne instanceof ie.y)return Ne;if(null!=Ne){if((0,re.c)(Ne))return function Ee(Ne){return new ie.y(Ke=>{const Ce=Ne[ee.L]();if((0,$.m)(Ce.subscribe))return Ce.subscribe(Ke);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ne);if((0,J.z)(Ne))return function Oe(Ne){return new ie.y(Ke=>{for(let Ce=0;Ce<Ne.length&&!Ke.closed;Ce++)Ke.next(Ne[Ce]);Ke.complete()})}(Ne);if((0,N.t)(Ne))return function Le(Ne){return new ie.y(Ke=>{Ne.then(Ce=>{Ke.closed||(Ke.next(Ce),Ke.complete())},Ce=>Ke.error(Ce)).then(null,q.h)})}(Ne);if((0,ge.D)(Ne))return fe(Ne);if((0,se.T)(Ne))return function de(Ne){return new ie.y(Ke=>{for(const Ce of Ne)if(Ke.next(Ce),Ke.closed)return;Ke.complete()})}(Ne);if((0,le.L)(Ne))return function Me(Ne){return fe((0,le.Q)(Ne))}(Ne)}throw(0,ue.z)(Ne)}function fe(Ne){return new ie.y(Ke=>{(function Ve(Ne,Ke){var Ce,Qe,ze,ye;return(0,l.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,l.KL)(Ne);!(Qe=yield Ce.next()).done;)if(Ke.next(Qe.value),Ke.closed)return}catch(Z){ze={error:Z}}finally{try{Qe&&!Qe.done&&(ye=Ce.return)&&(yield ye.call(Ce))}finally{if(ze)throw ze.error}}Ke.complete()})})(Ne,Ke).catch(Ce=>Ke.error(Ce))})}},6451:(We,ve,P)=>{P.d(ve,{T:()=>ge});var l=P(8189),J=P(8421),N=P(515),ie=P(7669),re=P(8996);function ge(...ue){const se=(0,ie.yG)(ue),le=(0,ie._6)(ue,1/0),$=ue;return $.length?1===$.length?(0,J.Xf)($[0]):(0,l.J)(le)((0,re.D)($,se)):N.E}},5403:(We,ve,P)=>{P.d(ve,{Q:()=>J});var l=P(2961);class J extends l.Lv{constructor(ie,re,ge,ue,se){super(ie),this.onFinalize=se,this._next=re?function(le){try{re(le)}catch($){ie.error($)}}:super._next,this._error=ue?function(le){try{ue(le)}catch($){ie.error($)}finally{this.unsubscribe()}}:super._error,this._complete=ge?function(){try{ge()}catch(le){ie.error(le)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;const{closed:re}=this;super.unsubscribe(),!re&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}},4004:(We,ve,P)=>{P.d(ve,{U:()=>N});var l=P(4482),J=P(5403);function N(ie,re){return(0,l.e)((ge,ue)=>{let se=0;ge.subscribe(new J.Q(ue,le=>{ue.next(ie.call(re,le,se++))}))})}},8189:(We,ve,P)=>{P.d(ve,{J:()=>N});var l=P(5577),J=P(4671);function N(ie=1/0){return(0,l.z)(J.y,ie)}},5577:(We,ve,P)=>{P.d(ve,{z:()=>se});var l=P(4004),J=P(8421),N=P(4482),ie=P(9672),re=P(5403),ue=P(576);function se(le,$,q=1/0){return(0,ue.m)($)?se((ee,Be)=>(0,l.U)((Ee,Oe)=>$(ee,Ee,Be,Oe))((0,J.Xf)(le(ee,Be))),q):("number"==typeof $&&(q=$),(0,N.e)((ee,Be)=>function ge(le,$,q,ee,Be,Ee,Oe,Le){const de=[];let fe=0,Me=0,Ve=!1;const Ne=()=>{Ve&&!de.length&&!fe&&$.complete()},Ke=Qe=>fe<ee?Ce(Qe):de.push(Qe),Ce=Qe=>{Ee&&$.next(Qe),fe++;let ze=!1;(0,J.Xf)(q(Qe,Me++)).subscribe(new re.Q($,ye=>{null==Be||Be(ye),Ee?Ke(ye):$.next(ye)},()=>{ze=!0},void 0,()=>{if(ze)try{for(fe--;de.length&&fe<ee;){const ye=de.shift();Oe?(0,ie.f)($,Oe,()=>Ce(ye)):Ce(ye)}Ne()}catch(ye){$.error(ye)}}))};return le.subscribe(new re.Q($,Ke,()=>{Ve=!0,Ne()})),()=>{null==Le||Le()}}(ee,Be,le,q)))}},5363:(We,ve,P)=>{P.d(ve,{Q:()=>ie});var l=P(9672),J=P(4482),N=P(5403);function ie(re,ge=0){return(0,J.e)((ue,se)=>{ue.subscribe(new N.Q(se,le=>(0,l.f)(se,re,()=>se.next(le),ge),()=>(0,l.f)(se,re,()=>se.complete(),ge),le=>(0,l.f)(se,re,()=>se.error(le),ge)))})}},3099:(We,ve,P)=>{P.d(ve,{B:()=>ge});var l=P(8996),J=P(5698),N=P(7579),ie=P(2961),re=P(4482);function ge(se={}){const{connector:le=(()=>new N.x),resetOnError:$=!0,resetOnComplete:q=!0,resetOnRefCountZero:ee=!0}=se;return Be=>{let Ee=null,Oe=null,Le=null,de=0,fe=!1,Me=!1;const Ve=()=>{null==Oe||Oe.unsubscribe(),Oe=null},Ne=()=>{Ve(),Ee=Le=null,fe=Me=!1},Ke=()=>{const Ce=Ee;Ne(),null==Ce||Ce.unsubscribe()};return(0,re.e)((Ce,Qe)=>{de++,!Me&&!fe&&Ve();const ze=Le=null!=Le?Le:le();Qe.add(()=>{de--,0===de&&!Me&&!fe&&(Oe=ue(Ke,ee))}),ze.subscribe(Qe),Ee||(Ee=new ie.Hp({next:ye=>ze.next(ye),error:ye=>{Me=!0,Ve(),Oe=ue(Ne,$,ye),ze.error(ye)},complete:()=>{fe=!0,Ve(),Oe=ue(Ne,q),ze.complete()}}),(0,l.D)(Ce).subscribe(Ee))})(Be)}}function ue(se,le,...$){return!0===le?(se(),null):!1===le?null:le(...$).pipe((0,J.q)(1)).subscribe(()=>se())}},9468:(We,ve,P)=>{P.d(ve,{R:()=>J});var l=P(4482);function J(N,ie=0){return(0,l.e)((re,ge)=>{ge.add(N.schedule(()=>re.subscribe(ge),ie))})}},5698:(We,ve,P)=>{P.d(ve,{q:()=>ie});var l=P(515),J=P(4482),N=P(5403);function ie(re){return re<=0?()=>l.E:(0,J.e)((ge,ue)=>{let se=0;ge.subscribe(new N.Q(ue,le=>{++se<=re&&(ue.next(le),re<=se&&ue.complete())}))})}},8505:(We,ve,P)=>{P.d(ve,{b:()=>re});var l=P(576),J=P(4482),N=P(5403),ie=P(4671);function re(ge,ue,se){const le=(0,l.m)(ge)||ue||se?{next:ge,error:ue,complete:se}:ge;return le?(0,J.e)(($,q)=>{var ee;null===(ee=le.subscribe)||void 0===ee||ee.call(le);let Be=!0;$.subscribe(new N.Q(q,Ee=>{var Oe;null===(Oe=le.next)||void 0===Oe||Oe.call(le,Ee),q.next(Ee)},()=>{var Ee;Be=!1,null===(Ee=le.complete)||void 0===Ee||Ee.call(le),q.complete()},Ee=>{var Oe;Be=!1,null===(Oe=le.error)||void 0===Oe||Oe.call(le,Ee),q.error(Ee)},()=>{var Ee,Oe;Be&&(null===(Ee=le.unsubscribe)||void 0===Ee||Ee.call(le)),null===(Oe=le.finalize)||void 0===Oe||Oe.call(le)}))}):ie.y}},4408:(We,ve,P)=>{P.d(ve,{o:()=>re});var l=P(727);class J extends l.w0{constructor(ue,se){super()}schedule(ue,se=0){return this}}const N={setInterval(...ge){const{delegate:ue}=N;return((null==ue?void 0:ue.setInterval)||setInterval)(...ge)},clearInterval(ge){const{delegate:ue}=N;return((null==ue?void 0:ue.clearInterval)||clearInterval)(ge)},delegate:void 0};var ie=P(8737);class re extends J{constructor(ue,se){super(ue,se),this.scheduler=ue,this.work=se,this.pending=!1}schedule(ue,se=0){if(this.closed)return this;this.state=ue;const le=this.id,$=this.scheduler;return null!=le&&(this.id=this.recycleAsyncId($,le,se)),this.pending=!0,this.delay=se,this.id=this.id||this.requestAsyncId($,this.id,se),this}requestAsyncId(ue,se,le=0){return N.setInterval(ue.flush.bind(ue,this),le)}recycleAsyncId(ue,se,le=0){if(null!=le&&this.delay===le&&!1===this.pending)return se;N.clearInterval(se)}execute(ue,se){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const le=this._execute(ue,se);if(le)return le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,se){let $,le=!1;try{this.work(ue)}catch(q){le=!0,$=q||new Error("Scheduled action threw falsy error")}if(le)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:ue,scheduler:se}=this,{actions:le}=se;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(le,this),null!=ue&&(this.id=this.recycleAsyncId(se,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(We,ve,P)=>{P.d(ve,{v:()=>N});var l=P(6063);class J{constructor(re,ge=J.now){this.schedulerActionCtor=re,this.now=ge}schedule(re,ge=0,ue){return new this.schedulerActionCtor(this,re).schedule(ue,ge)}}J.now=l.l.now;class N extends J{constructor(re,ge=J.now){super(re,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:ge}=this;if(this._active)return void ge.push(re);let ue;this._active=!0;do{if(ue=re.execute(re.state,re.delay))break}while(re=ge.shift());if(this._active=!1,ue){for(;re=ge.shift();)re.unsubscribe();throw ue}}}},4986:(We,ve,P)=>{P.d(ve,{z:()=>N});var l=P(4408);const N=new(P(7565).v)(l.o)},6063:(We,ve,P)=>{P.d(ve,{l:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},3410:(We,ve,P)=>{P.d(ve,{z:()=>l});const l={setTimeout(...J){const{delegate:N}=l;return((null==N?void 0:N.setTimeout)||setTimeout)(...J)},clearTimeout(J){const{delegate:N}=l;return((null==N?void 0:N.clearTimeout)||clearTimeout)(J)},delegate:void 0}},2202:(We,ve,P)=>{P.d(ve,{h:()=>J});const J=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(We,ve,P)=>{P.d(ve,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(We,ve,P)=>{P.d(ve,{_6:()=>ge,jO:()=>ie,yG:()=>re});var l=P(576);function N(ue){return ue[ue.length-1]}function ie(ue){return(0,l.m)(N(ue))?ue.pop():void 0}function re(ue){return function J(ue){return ue&&(0,l.m)(ue.schedule)}(N(ue))?ue.pop():void 0}function ge(ue,se){return"number"==typeof N(ue)?ue.pop():se}},8737:(We,ve,P)=>{function l(J,N){if(J){const ie=J.indexOf(N);0<=ie&&J.splice(ie,1)}}P.d(ve,{P:()=>l})},3888:(We,ve,P)=>{function l(J){const ie=J(re=>{Error.call(re),re.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}P.d(ve,{d:()=>l})},2806:(We,ve,P)=>{P.d(ve,{O:()=>ie,x:()=>N});var l=P(2416);let J=null;function N(re){if(l.v.useDeprecatedSynchronousErrorHandling){const ge=!J;if(ge&&(J={errorThrown:!1,error:null}),re(),ge){const{errorThrown:ue,error:se}=J;if(J=null,ue)throw se}}else re()}function ie(re){l.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=re)}},9672:(We,ve,P)=>{function l(J,N,ie,re=0,ge=!1){const ue=N.schedule(function(){ie(),ge?J.add(this.schedule(null,re)):this.unsubscribe()},re);if(J.add(ue),!ge)return ue}P.d(ve,{f:()=>l})},4671:(We,ve,P)=>{function l(J){return J}P.d(ve,{y:()=>l})},1144:(We,ve,P)=>{P.d(ve,{z:()=>l});const l=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(We,ve,P)=>{P.d(ve,{D:()=>J});var l=P(576);function J(N){return Symbol.asyncIterator&&(0,l.m)(null==N?void 0:N[Symbol.asyncIterator])}},576:(We,ve,P)=>{function l(J){return"function"==typeof J}P.d(ve,{m:()=>l})},3670:(We,ve,P)=>{P.d(ve,{c:()=>N});var l=P(8822),J=P(576);function N(ie){return(0,J.m)(ie[l.L])}},6495:(We,ve,P)=>{P.d(ve,{T:()=>N});var l=P(2202),J=P(576);function N(ie){return(0,J.m)(null==ie?void 0:ie[l.h])}},8239:(We,ve,P)=>{P.d(ve,{t:()=>J});var l=P(576);function J(N){return(0,l.m)(null==N?void 0:N.then)}},3260:(We,ve,P)=>{P.d(ve,{L:()=>ie,Q:()=>N});var l=P(5987),J=P(576);function N(re){return(0,l.FC)(this,arguments,function*(){const ue=re.getReader();try{for(;;){const{value:se,done:le}=yield(0,l.qq)(ue.read());if(le)return yield(0,l.qq)(void 0);yield yield(0,l.qq)(se)}}finally{ue.releaseLock()}})}function ie(re){return(0,J.m)(null==re?void 0:re.getReader)}},4482:(We,ve,P)=>{P.d(ve,{A:()=>J,e:()=>N});var l=P(576);function J(ie){return(0,l.m)(null==ie?void 0:ie.lift)}function N(ie){return re=>{if(J(re))return re.lift(function(ge){try{return ie(ge,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(We,ve,P)=>{P.d(ve,{h:()=>N});var l=P(2416),J=P(3410);function N(ie){J.z.setTimeout(()=>{const{onUnhandledError:re}=l.v;if(!re)throw ie;re(ie)})}},4532:(We,ve,P)=>{function l(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(ve,{z:()=>l})},5987:(We,ve,P)=>{function se(Z,X,ce,pe){return new(ce||(ce=Promise))(function(te,ft){function Rt(yt){try{et(pe.next(yt))}catch(vn){ft(vn)}}function _n(yt){try{et(pe.throw(yt))}catch(vn){ft(vn)}}function et(yt){yt.done?te(yt.value):function Se(te){return te instanceof ce?te:new ce(function(ft){ft(te)})}(yt.value).then(Rt,_n)}et((pe=pe.apply(Z,X||[])).next())})}function de(Z){return this instanceof de?(this.v=Z,this):new de(Z)}function fe(Z,X,ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Se,pe=ce.apply(Z,X||[]),te=[];return Se={},ft("next"),ft("throw"),ft("return"),Se[Symbol.asyncIterator]=function(){return this},Se;function ft(Jt){pe[Jt]&&(Se[Jt]=function(sr){return new Promise(function(rn,Gr){te.push([Jt,sr,rn,Gr])>1||Rt(Jt,sr)})})}function Rt(Jt,sr){try{!function _n(Jt){Jt.value instanceof de?Promise.resolve(Jt.value.v).then(et,yt):vn(te[0][2],Jt)}(pe[Jt](sr))}catch(rn){vn(te[0][3],rn)}}function et(Jt){Rt("next",Jt)}function yt(Jt){Rt("throw",Jt)}function vn(Jt,sr){Jt(sr),te.shift(),te.length&&Rt(te[0][0],te[0][1])}}function Ve(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ce,X=Z[Symbol.asyncIterator];return X?X.call(Z):(Z=function ee(Z){var X="function"==typeof Symbol&&Symbol.iterator,ce=X&&Z[X],pe=0;if(ce)return ce.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&pe>=Z.length&&(Z=void 0),{value:Z&&Z[pe++],done:!Z}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),ce={},pe("next"),pe("throw"),pe("return"),ce[Symbol.asyncIterator]=function(){return this},ce);function pe(te){ce[te]=Z[te]&&function(ft){return new Promise(function(Rt,_n){!function Se(te,ft,Rt,_n){Promise.resolve(_n).then(function(et){te({value:et,done:Rt})},ft)}(Rt,_n,(ft=Z[te](ft)).done,ft.value)})}}}P.d(ve,{FC:()=>fe,KL:()=>Ve,mG:()=>se,qq:()=>de})},5e3:(We,ve,P)=>{P.d(ve,{$8M:()=>tr,$Z:()=>eb,AFp:()=>hE,AaK:()=>se,CRH:()=>Uv,CZH:()=>Mh,CqO:()=>Jd,EJc:()=>yE,F4k:()=>$_,FYo:()=>yh,FiY:()=>Ue,G48:()=>Rp,GfV:()=>Dv,Gpc:()=>q,JOm:()=>ji,LFG:()=>Yt,LSH:()=>hf,Lbi:()=>pE,NdJ:()=>Qf,OlP:()=>cn,Oqu:()=>ah,PXZ:()=>xp,Q6J:()=>Xa,QGY:()=>hm,Qsj:()=>Lb,R0b:()=>bi,RDi:()=>Wl,Rgc:()=>pa,SBq:()=>mh,Sil:()=>cy,Suo:()=>vi,TTD:()=>Ca,TgZ:()=>dm,VLi:()=>Qv,X6Q:()=>SE,XFs:()=>st,Xpm:()=>$e,Y36:()=>Kf,YKP:()=>Tv,YNc:()=>Gf,Yjl:()=>Ao,Yz7:()=>rn,ZZ4:()=>py,_Bn:()=>Yu,_UZ:()=>B_,_Vd:()=>Eo,_c5:()=>m0,_uU:()=>lb,aQg:()=>Np,c2e:()=>mE,cJS:()=>qr,cg1:()=>Sm,dDg:()=>Rh,deG:()=>Wo,dqk:()=>Ft,eFA:()=>EE,ekj:()=>J_,g9A:()=>fE,h0i:()=>_h,hGG:()=>$E,iGM:()=>ou,ifc:()=>Gt,ip1:()=>qv,kL8:()=>ap,lG2:()=>To,n5z:()=>Ec,oAB:()=>Pt,oxw:()=>rb,q4F:()=>Nr,qLn:()=>Zc,qOj:()=>b_,qZA:()=>ll,sBO:()=>xE,sIi:()=>Gd,s_b:()=>zm,soG:()=>uy,tBr:()=>we,tb:()=>gE,tp0:()=>ht,uIk:()=>Hf,vHH:()=>Oe,vpe:()=>Io,wAp:()=>mt,xp6:()=>Nd,z2F:()=>Ph,zSh:()=>m_,zs3:()=>$s});var l=P(7579),J=P(727),N=P(8306),ie=P(6451),re=P(3099);function ge(i){for(let s in i)if(i[s]===ge)return s;throw Error("Could not find renamed property on target object.")}function ue(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function se(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(se).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function le(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const $=ge({__forward_ref__:ge});function q(i){return i.__forward_ref__=q,i.toString=function(){return se(this())},i}function ee(i){return Be(i)?i():i}function Be(i){return"function"==typeof i&&i.hasOwnProperty($)&&i.__forward_ref__===q}class Oe extends Error{constructor(s,a){super(function Le(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function de(i){return"string"==typeof i?i:null==i?"":String(i)}function fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():de(i)}function Ke(i,s){const a=s?` in ${s}`:"";throw new Oe(-201,`No provider for ${fe(i)} found${a}`)}function et(i,s){null==i&&function yt(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function rn(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function qr(i){return{providers:i.providers||[],imports:i.imports||[]}}function Hn(i){return vs(i,Ji)||vs(i,_r)}function vs(i,s){return i.hasOwnProperty(s)?i[s]:null}function An(i){return i&&(i.hasOwnProperty(zr)||i.hasOwnProperty(Re))?i[zr]:null}const Ji=ge({\u0275prov:ge}),zr=ge({\u0275inj:ge}),_r=ge({ngInjectableDef:ge}),Re=ge({ngInjectorDef:ge});var st=(()=>((st=st||{})[st.Default=0]="Default",st[st.Host=1]="Host",st[st.Self=2]="Self",st[st.SkipSelf=4]="SkipSelf",st[st.Optional=8]="Optional",st))();let Sn;function Xt(i){const s=Sn;return Sn=i,s}function Ii(i,s,a){const c=Hn(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&st.Optional?null:void 0!==s?s:void Ke(se(i),"Injector")}function Mn(i){return{toString:i}.toString()}var wn=(()=>((wn=wn||{})[wn.OnPush=0]="OnPush",wn[wn.Default=1]="Default",wn))(),Gt=(()=>{return(i=Gt||(Gt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Gt;var i})();const it="undefined"!=typeof globalThis&&globalThis,pt="undefined"!=typeof window&&window,ws="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ft=it||"undefined"!=typeof global&&global||pt||ws,Kr={},ut=[],Di=ge({\u0275cmp:ge}),U=ge({\u0275dir:ge}),H=ge({\u0275pipe:ge}),V=ge({\u0275mod:ge}),B=ge({\u0275fac:ge}),G=ge({__NG_ELEMENT_ID__:ge});let Ae=0;function $e(i){return Mn(()=>{const a={},c={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===wn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||ut,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Gt.Emulated,id:"c",styles:i.styles||ut,_:null,setInput:null,schemas:i.schemas||null,tView:null},d=i.directives,g=i.features,_=i.pipes;return c.id+=Ae++,c.inputs=Xi(i.inputs,a),c.outputs=Xi(i.outputs),g&&g.forEach(w=>w(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map(qt):null,c.pipeDefs=_?()=>("function"==typeof _?_():_).map(tn):null,c})}function qt(i){return On(i)||function Ai(i){return i[U]||null}(i)}function tn(i){return function or(i){return i[H]||null}(i)}const Vr={};function Pt(i){return Mn(()=>{const s={type:i.type,bootstrap:i.bootstrap||ut,declarations:i.declarations||ut,imports:i.imports||ut,exports:i.exports||ut,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Vr[i.id]=i.type),s})}function Xi(i,s){if(null==i)return Kr;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=c,s&&(s[d]=g)}return a}const To=$e;function Ao(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function On(i){return i[Di]||null}function kn(i,s){const a=i[V]||null;if(!a&&!0===s)throw new Error(`Type ${se(i)} does not have '\u0275mod' property.`);return a}function Qr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Si(i){return Array.isArray(i)&&!0===i[1]}function uc(i){return 0!=(8&i.flags)}function Vl(i){return 2==(2&i.flags)}function Ds(i){return 1==(1&i.flags)}function nn(i){return null!==i.template}function Ul(i){return 0!=(512&i[2])}function Ys(i,s){return i.hasOwnProperty(B)?i[B]:null}class du{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ca(){return Qs}function Qs(i){return i.type.prototype.ngOnChanges&&(i.setInput=ql),qh}function qh(){const i=xi(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===Kr)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function ql(i,s,a,c){const d=xi(i)||function Ts(i,s){return i[Oo]=s}(i,{previous:Kr,current:null}),g=d.current||(d.current={}),_=d.previous,w=this.declaredInputs[a],E=_[w];g[w]=new du(E&&E.currentValue,s,_===Kr),i[c]=s}Ca.ngInherit=!0;const Oo="__ngSimpleChanges__";function xi(i){return i[Oo]||null}let hu;function Wl(i){hu=i}function gn(i){return!!i.listen}const Oi={createRenderer:(i,s)=>function Ta(){return void 0!==hu?hu:"undefined"!=typeof document?document:void 0}()};function bn(i){for(;Array.isArray(i);)i=i[0];return i}function ns(i,s){return bn(s[i])}function cr(i,s){return bn(s[i.index])}function Ri(i,s){return i.data[s]}function Tr(i,s){const a=s[i];return Qr(a)?a:a[0]}function Fn(i){return 4==(4&i[2])}function Ro(i){return 128==(128&i[2])}function lr(i,s){return null==s?null:i[s]}function Js(i){i[18]=0}function xs(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const lt={lFrame:Ma(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function fc(){return lt.bindingsEnabled}function Ie(){return lt.lFrame.lView}function Nt(){return lt.lFrame.tView}function an(){let i=ko();for(;null!==i&&64===i.type;)i=i.parent;return i}function ko(){return lt.lFrame.currentTNode}function vr(i,s){const a=lt.lFrame;a.currentTNode=i,a.isParent=s}function rs(){return lt.lFrame.isParent}function Fo(){return lt.isInCheckNoChangesMode}function eo(i){lt.isInCheckNoChangesMode=i}function Pi(){return lt.lFrame.bindingIndex++}function Wh(i,s){const a=lt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Vo(s)}function Vo(i){lt.lFrame.currentDirectiveIndex=i}function Uo(){return lt.lFrame.currentQueryIndex}function xa(i){lt.lFrame.currentQueryIndex=i}function pc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function gc(i,s,a){if(a&st.SkipSelf){let d=s,g=i;for(;!(d=d.parent,null!==d||a&st.Host||(d=pc(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;s=d,i=g}const c=lt.lFrame=Kh();return c.currentTNode=s,c.lView=i,!0}function Bo(i){const s=Kh(),a=i[1];lt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Kh(){const i=lt.lFrame,s=null===i?null:i.child;return null===s?Ma(i):s}function Ma(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function yu(){const i=lt.lFrame;return lt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Oa=yu;function _u(){const i=yu();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Ln(){return lt.lFrame.selectedIndex}function Xn(i){lt.lFrame.selectedIndex=i}function En(){const i=lt.lFrame;return Ri(i.tView,i.selectedIndex)}function yc(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const g=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:w,ngAfterViewInit:E,ngAfterViewChecked:A,ngOnDestroy:x}=g;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=x&&(i.destroyHooks||(i.destroyHooks=[])).push(a,x)}}function Os(i,s,a){Xh(i,s,3,a)}function vu(i,s,a,c){(3&i[2])===a&&Xh(i,s,a,c)}function wu(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Xh(i,s,a,c){const g=null!=c?c:-1,_=s.length-1;let w=0;for(let E=void 0!==c?65535&i[18]:0;E<_;E++)if("number"==typeof s[E+1]){if(w=s[E],null!=c&&w>=c)break}else s[E]<0&&(i[18]+=65536),(w<g||-1==g)&&(ed(i,a,s,E),i[18]=(4294901760&i[18])+E+2),E++}function ed(i,s,a,c){const d=a[c]<0,g=a[c+1],w=i[d?-a[c]:a[c]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{g.call(w)}finally{}}}else try{g.call(w)}finally{}}class In{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Eu(i,s,a){const c=gn(i);let d=0;for(;d<a.length;){const g=a[d];if("number"==typeof g){if(0!==g)break;d++;const _=a[d++],w=a[d++],E=a[d++];c?i.setAttribute(s,w,E,_):s.setAttributeNS(_,w,E)}else{const _=g,w=a[++d];Rs(_)?c&&i.setProperty(s,_,w):c?i.setAttribute(s,_,w):s.setAttribute(_,w),d++}}return d}function mn(i){return 3===i||4===i||6===i}function Rs(i){return 64===i.charCodeAt(0)}function Je(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const d=s[c];"number"==typeof d?a=d:0===a||ss(i,a,d,null,-1===a||2===a?s[++c]:null)}}return i}function ss(i,s,a,c,d){let g=0,_=i.length;if(-1===s)_=-1;else for(;g<i.length;){const w=i[g++];if("number"==typeof w){if(w===s){_=-1;break}if(w>s){_=g-1;break}}}for(;g<i.length;){const w=i[g];if("number"==typeof w)break;if(w===a){if(null===c)return void(null!==d&&(i[g+1]=d));if(c===i[g+1])return void(i[g+2]=d)}g++,null!==c&&g++,null!==d&&g++}-1!==_&&(i.splice(_,0,s),g=_+1),i.splice(g++,0,a),null!==c&&i.splice(g++,0,c),null!==d&&i.splice(g++,0,d)}function Xr(i){return-1!==i}function hr(i){return 32767&i}function Na(i,s){let a=function nf(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let id=!0;function ka(i){const s=id;return id=i,s}let It=0;function ro(i,s){const a=$o(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,Iu(c.data,i),Iu(s,null),Iu(c.blueprint,null));const d=er(i,s),g=i.injectorIndex;if(Xr(d)){const _=hr(d),w=Na(d,s),E=w[1].data;for(let A=0;A<8;A++)s[g+A]=w[_+A]|E[_+A]}return s[g+8]=d,g}function Iu(i,s){i.push(0,0,0,0,0,0,0,0,s)}function $o(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function er(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=s;for(;null!==d;){const g=d[1],_=g.type;if(c=2===_?g.declTNode:1===_?d[6]:null,null===c)return-1;if(a++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function Zo(i,s,a){!function no(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(G)&&(c=a[G]),null==c&&(c=a[G]=It++);const d=255&c;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function Ho(i,s,a){if(a&st.Optional)return i;Ke(s,"NodeInjector")}function bc(i,s,a,c){if(a&st.Optional&&void 0===c&&(c=null),0==(a&(st.Self|st.Host))){const d=i[9],g=Xt(void 0);try{return d?d.get(s,c,a&st.Optional):Ii(s,c,a&st.Optional)}finally{Xt(g)}}return Ho(c,s,a)}function io(i,s,a,c=st.Default,d){if(null!==i){const g=function zo(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(G)?i[G]:void 0;return"number"==typeof s?s>=0?255&s:qo:s}(a);if("function"==typeof g){if(!gc(s,i,c))return c&st.Host?Ho(d,a,c):bc(s,a,c,d);try{const _=g(c);if(null!=_||c&st.Optional)return _;Ke(a)}finally{Oa()}}else if("number"==typeof g){let _=null,w=$o(i,s),E=-1,A=c&st.Host?s[16][6]:null;for((-1===w||c&st.SkipSelf)&&(E=-1===w?er(i,s):s[w+8],-1!==E&&Ni(c,!1)?(_=s[1],w=hr(E),s=Na(E,s)):w=-1);-1!==w;){const x=s[1];if(so(g,w,x.data)){const k=rf(w,s,a,_,c,A);if(k!==Go)return k}E=s[w+8],-1!==E&&Ni(c,s[1].data[w+8]===A)&&so(g,w,s)?(_=x,w=hr(E),s=Na(E,s)):w=-1}}}return bc(s,a,c,d)}const Go={};function qo(){return new Nn(an(),Ie())}function rf(i,s,a,c,d,g){const _=s[1],w=_.data[i+8],x=Ps(w,_,a,null==c?Vl(w)&&id:c!=_&&0!=(3&w.type),d&st.Host&&g===w);return null!==x?os(s,_,x,w):Go}function Ps(i,s,a,c,d){const g=i.providerIndexes,_=s.data,w=1048575&g,E=i.directiveStart,x=g>>20,j=d?w+x:i.directiveEnd;for(let Y=c?w:w+x;Y<j;Y++){const me=_[Y];if(Y<E&&a===me||Y>=E&&me.type===a)return Y}if(d){const Y=_[E];if(Y&&nn(Y)&&Y.type===a)return E}return null}function os(i,s,a,c){let d=i[a];const g=s.data;if(function ef(i){return i instanceof In}(d)){const _=d;_.resolving&&function Me(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${i}${a}`)}(fe(g[a]));const w=ka(_.canSeeViewProviders);_.resolving=!0;const E=_.injectImpl?Xt(_.injectImpl):null;gc(i,c,st.Default);try{d=i[a]=_.factory(void 0,g,i,c),s.firstCreatePass&&a>=c.directiveStart&&function Jh(i,s,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:g}=s.type.prototype;if(c){const _=Qs(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,g))}(a,g[a],s)}finally{null!==E&&Xt(E),ka(w),_.resolving=!1,Oa()}}return d}function so(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Ni(i,s){return!(i&st.Self||i&st.Host&&s)}class Nn{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return io(this._tNode,this._lView,s,c,a)}}function Ec(i){return Mn(()=>{const s=i.prototype.constructor,a=s[B]||as(s),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const g=d[B]||as(d);if(g&&g!==a)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function as(i){return Be(i)?()=>{const s=as(ee(i));return s&&s()}:Ys(i)}function tr(i){return function wc(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const g=a[d];if(mn(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(g===s)return a[d+1];d+=2}}}return null}(an(),i)}const ki="__parameters__";function Sr(i,s,a){return Mn(()=>{const c=function Ar(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(s);function d(...g){if(this instanceof d)return c.apply(this,g),this;const _=new d(...g);return w.annotation=_,w;function w(E,A,x){const k=E.hasOwnProperty(ki)?E[ki]:Object.defineProperty(E,ki,{value:[]})[ki];for(;k.length<=x;)k.push(null);return(k[x]=k[x]||[]).push(_),E}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class cn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=rn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Wo=new cn("AnalyzeForEntryComponents");function qn(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(s===i&&(s=i.slice(0,a)),qn(c,s)):s!==i&&s.push(c)}return s}function Li(i,s){i.forEach(a=>Array.isArray(a)?Li(a,s):s(a))}function od(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Du(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function dt(i,s,a){let c=ti(i,s);return c>=0?i[1|c]=a:(c=~c,function of(i,s,a,c){let d=i.length;if(d==s)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function Dc(i,s){const a=ti(i,s);if(a>=0)return i[1|a]}function ti(i,s){return function Va(i,s,a){let c=0,d=i.length>>a;for(;d!==c;){const g=c+(d-c>>1),_=i[g<<a];if(s===_)return g<<a;_>s?d=g:c=g+1}return~(d<<a)}(i,s,1)}const Vn={},Jo="__NG_DI_FLAG__",Tu="ngTempTokenPath",ks=/\n/gm,ri="__source",dd=ge({provide:String,useValue:ge});let Ua;function Xo(i){const s=Ua;return Ua=i,s}function Fs(i,s=st.Default){if(void 0===Ua)throw new Oe(203,"");return null===Ua?Ii(i,void 0,s):Ua.get(i,s&st.Optional?null:void 0,s)}function Yt(i,s=st.Default){return(function xn(){return Sn}()||Fs)(ee(i),s)}function T(i){const s=[];for(let a=0;a<i.length;a++){const c=ee(i[a]);if(Array.isArray(c)){if(0===c.length)throw new Oe(900,"");let d,g=st.Default;for(let _=0;_<c.length;_++){const w=c[_],E=F(w);"number"==typeof E?-1===E?d=w.token:g|=E:d=w}s.push(Yt(d,g))}else s.push(Yt(c))}return s}function O(i,s){return i[Jo]=s,i.prototype[Jo]=s,i}function F(i){return i[Jo]}const we=O(Sr("Inject",i=>({token:i})),-1),Ue=O(Sr("Optional"),8),ht=O(Sr("SkipSelf"),4);class Mu{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function co(i){return i instanceof Mu?i.changingThisBreaksApplicationSecurity:i}const Ry=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,_d=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Wn=(()=>((Wn=Wn||{})[Wn.NONE=0]="NONE",Wn[Wn.HTML=1]="HTML",Wn[Wn.STYLE=2]="STYLE",Wn[Wn.SCRIPT=3]="SCRIPT",Wn[Wn.URL=4]="URL",Wn[Wn.RESOURCE_URL=5]="RESOURCE_URL",Wn))();function hf(i){const s=function ra(){const i=Ie();return i&&i[12]}();return s?s.sanitize(Wn.URL,i)||"":function ja(i,s){const a=function Sy(i){return i instanceof Mu&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?co(i):function vd(i){return(i=String(i)).match(Ry)||i.match(_d)?i:"unsafe:"+i}(de(i))}const Uc="__ngContext__";function wr(i,s){i[Uc]=s}function mf(i){const s=function Bc(i){return i[Uc]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function _f(i){return i.ngOriginalError}function $c(i,...s){i.error(...s)}class Zc{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),c=function yg(i){return i&&i.ngErrorLogger||$c}(s);c(this._console,"ERROR",s),a&&c(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&_f(s);for(;a&&_f(a);)a=_f(a);return a||null}}const Sd=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ft))();function go(i){return i instanceof Function?i():i}var ji=(()=>((ji=ji||{})[ji.Important=1]="Important",ji[ji.DashCase=2]="DashCase",ji))();function wf(i,s){return undefined(i,s)}function ii(i){const s=i[3];return Si(s)?s[3]:s}function Ef(i){return Md(i[13])}function zc(i){return Md(i[4])}function Md(i){for(;null!==i&&!Si(i);)i=i[4];return i}function ia(i,s,a,c,d){if(null!=c){let g,_=!1;Si(c)?g=c:Qr(c)&&(_=!0,c=c[0]);const w=bn(c);0===i&&null!==a?null==d?Q(s,a,w):L(s,a,w,d||null,!0):1===i&&null!==a?L(s,a,w,d||null,!0):2===i?function Df(i,s,a){const c=Ye(i,s);c&&function De(i,s,a,c){gn(i)?i.removeChild(s,a,c):s.removeChild(a)}(i,c,s,a)}(s,w,_):3===i&&s.destroyNode(w),null!=g&&function Sg(i,s,a,c,d){const g=a[7];g!==bn(a)&&ia(s,i,c,g,d);for(let w=10;w<a.length;w++){const E=a[w];Lu(E[1],E,i,s,c,g)}}(s,i,g,a,d)}}function qa(i,s,a){return gn(i)?i.createElement(s,a):null===a?i.createElement(s):i.createElementNS(a,s)}function za(i,s){const a=i[9],c=a.indexOf(s),d=s[3];1024&s[2]&&(s[2]&=-1025,xs(d,-1)),a.splice(c,1)}function Cf(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const d=c[17];null!==d&&d!==i&&za(d,c),s>0&&(i[a-1][4]=c[4]);const g=Du(i,10+s);!function Ag(i,s){Lu(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const _=g[19];null!==_&&_.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function m(i,s){if(!(256&s[2])){const a=s[11];gn(a)&&a.destroyNode&&Lu(i,s,a,3,null,null),function Nu(i){let s=i[13];if(!s)return h(i[1],i);for(;s;){let a=null;if(Qr(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)Qr(s)&&h(s[1],s),s=s[3];null===s&&(s=i),Qr(s)&&h(s[1],s),a=s&&s[4]}s=a}}(s)}}function h(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function v(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=s[a[c]];if(!(d instanceof In)){const g=a[c+1];if(Array.isArray(g))for(let _=0;_<g.length;_+=2){const w=d[g[_]],E=g[_+1];try{E.call(w)}finally{}}else try{g.call(d)}finally{}}}}(i,s),function p(i,s){const a=i.cleanup,c=s[7];let d=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const _=a[g+1],w="function"==typeof _?_(s):bn(s[_]),E=c[d=a[g+2]],A=a[g+3];"boolean"==typeof A?w.removeEventListener(a[g],E,A):A>=0?c[d=A]():c[d=-A].unsubscribe(),g+=2}else{const _=c[d=a[g+1]];a[g].call(_)}if(null!==c){for(let g=d+1;g<c.length;g++)c[g]();s[7]=null}}(i,s),1===s[1].type&&gn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Si(s[3])){a!==s[3]&&za(a,s);const c=s[19];null!==c&&c.detachView(i)}}}function D(i,s,a){return function S(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];if(2&c.flags){const d=i.data[c.directiveStart].encapsulation;if(d===Gt.None||d===Gt.Emulated)return null}return cr(c,a)}(i,s.parent,a)}function L(i,s,a,c,d){gn(i)?i.insertBefore(s,a,c,d):s.insertBefore(a,c,d)}function Q(i,s,a){gn(i)?i.appendChild(s,a):s.appendChild(a)}function xe(i,s,a,c,d){null!==c?L(i,s,a,c,d):Q(i,s,a)}function Ye(i,s){return gn(i)?i.parentNode(s):s.parentNode}let mo=function nr(i,s,a){return 40&i.type?cr(i,a):null};function Yc(i,s,a,c){const d=D(i,c,s),g=s[11],w=function Lt(i,s,a){return mo(i,s,a)}(c.parent||s[6],c,s);if(null!=d)if(Array.isArray(a))for(let E=0;E<a.length;E++)xe(g,d,a[E],w,!1);else xe(g,d,a,w,!1)}function Qc(i,s){if(null!==s){const a=s.type;if(3&a)return cr(s,i);if(4&a)return Rd(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return Qc(i,c);{const d=i[s.index];return Si(d)?Rd(-1,d):bn(d)}}if(32&a)return wf(s,i)()||bn(i[s.index]);{const c=ku(i,s);return null!==c?Array.isArray(c)?c[0]:Qc(ii(i[16]),c):Qc(i,s.next)}}return null}function ku(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Rd(i,s){const a=10+i+1;if(a<s.length){const c=s[a],d=c[1].firstChild;if(null!==d)return Qc(c,d)}return s[7]}function Fu(i,s,a,c,d,g,_){for(;null!=a;){const w=c[a.index],E=a.type;if(_&&0===s&&(w&&wr(bn(w),c),a.flags|=4),64!=(64&a.flags))if(8&E)Fu(i,s,a.child,c,d,g,!1),ia(s,i,d,w,g);else if(32&E){const A=wf(a,c);let x;for(;x=A();)ia(s,i,d,x,g);ia(s,i,d,w,g)}else 16&E?Pd(i,s,c,a,d,g):ia(s,i,d,w,g);a=_?a.projectionNext:a.next}}function Lu(i,s,a,c,d,g){Fu(a,c,i.firstChild,s,d,g,!1)}function Pd(i,s,a,c,d,g){const _=a[16],E=_[6].projection[c.projection];if(Array.isArray(E))for(let A=0;A<E.length;A++)ia(s,i,d,E[A],g);else Fu(i,s,E,_[3],d,g,!0)}function yo(i,s,a){gn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function Wy(i,s,a){gn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function Ky(i,s,a){let c=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const g=s.length;if(d+g===c||i.charCodeAt(d+g)<=32)return d}a=d+1}}const $0="ng-template";function fI(i,s,a){let c=0;for(;c<i.length;){let d=i[c++];if(a&&"class"===d){if(d=i[c],-1!==Ky(d.toLowerCase(),s,0))return!0}else if(1===d){for(;c<i.length&&"string"==typeof(d=i[c++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function Tf(i){return 4===i.type&&i.value!==$0}function Vu(i,s,a){return s===(4!==i.type||a?i.value:$0)}function Z0(i,s,a){let c=4;const d=i.attrs||[],g=function G0(i){for(let s=0;s<i.length;s++)if(mn(i[s]))return s;return i.length}(d);let _=!1;for(let w=0;w<s.length;w++){const E=s[w];if("number"!=typeof E){if(!_)if(4&c){if(c=2|1&c,""!==E&&!Vu(i,E,a)||""===E&&1===s.length){if(Tn(c))return!1;_=!0}}else{const A=8&c?E:s[++w];if(8&c&&null!==i.attrs){if(!fI(i.attrs,A,a)){if(Tn(c))return!1;_=!0}continue}const k=Uu(8&c?"class":E,d,Tf(i),a);if(-1===k){if(Tn(c))return!1;_=!0;continue}if(""!==A){let j;j=k>g?"":d[k+1].toLowerCase();const Y=8&c?j:null;if(Y&&-1!==Ky(Y,A,0)||2&c&&A!==j){if(Tn(c))return!1;_=!0}}}}else{if(!_&&!Tn(c)&&!Tn(E))return!1;if(_&&Tn(E))continue;_=!1,c=E|1&c}}return Tn(c)||_}function Tn(i){return 0==(1&i)}function Uu(i,s,a,c){if(null===s)return-1;let d=0;if(c||!a){let g=!1;for(;d<s.length;){const _=s[d];if(_===i)return d;if(3===_||6===_)g=!0;else{if(1===_||2===_){let w=s[++d];for(;"string"==typeof w;)w=s[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=g?1:2}return-1}return function q0(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function H0(i,s,a=!1){for(let c=0;c<s.length;c++)if(Z0(i,s[c],a))return!0;return!1}function Yy(i,s){return i?":not("+s.trim()+")":s}function W0(i){let s=i[0],a=1,c=2,d="",g=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&c){const w=i[++a];d+="["+_+(w.length>0?'="'+w+'"':"")+"]"}else 8&c?d+="."+_:4&c&&(d+=" "+_);else""!==d&&!Tn(_)&&(s+=Yy(g,d),d=""),c=_,g=g||!Tn(c);a++}return""!==d&&(s+=Yy(g,d)),s}const At={};function Nd(i){Qy(Nt(),Ie(),Ln()+i,Fo())}function Qy(i,s,a,c){if(!c)if(3==(3&s[2])){const g=i.preOrderCheckHooks;null!==g&&Os(s,g,a)}else{const g=i.preOrderHooks;null!==g&&vu(s,g,0,a)}Xn(a)}function Sf(i,s){return i<<17|s<<2}function Bs(i){return i>>17&32767}function xg(i){return 2|i}function _o(i){return(131068&i)>>2}function Mg(i,s){return-131069&i|s<<2}function Rg(i){return 1|i}function uw(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const d=a[c],g=a[c+1];if(-1!==g){const _=i.data[g];xa(d),_.contentQueries(2,s[g],g)}}}function Fd(i,s,a,c,d,g,_,w,E,A){const x=s.blueprint.slice();return x[0]=d,x[2]=140|c,Js(x),x[3]=x[15]=i,x[8]=a,x[10]=_||i&&i[10],x[11]=w||i&&i[11],x[12]=E||i&&i[12]||null,x[9]=A||i&&i[9]||null,x[6]=g,x[16]=2==s.type?i[16]:x,x}function Bu(i,s,a,c,d){let g=i.data[s];if(null===g)g=function Ld(i,s,a,c,d){const g=ko(),_=rs(),E=i.data[s]=function dw(i,s,a,c,d,g){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?g:g&&g.parent,a,s,c,d);return null===i.firstChild&&(i.firstChild=E),null!==g&&(_?null==g.child&&null!==E.parent&&(g.child=E):null===g.next&&(g.next=E)),E}(i,s,a,c,d),function Ql(){return lt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=c,g.attrs=d;const _=function Ms(){const i=lt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();g.injectorIndex=null===_?-1:_.injectorIndex}return vr(g,!0),g}function Pf(i,s,a,c){if(0===a)return-1;const d=s.length;for(let g=0;g<a;g++)s.push(c),i.blueprint.push(c),i.data.push(null);return d}function el(i,s,a){Bo(s);try{const c=i.viewQuery;null!==c&&Lf(1,c,a);const d=i.template;null!==d&&tl(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&uw(i,s),i.staticViewQueries&&Lf(2,i.viewQuery,a);const g=i.components;null!==g&&function yI(i,s){for(let a=0;a<s.length;a++)SI(i,s[a])}(s,g)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,_u()}}function oa(i,s,a,c){const d=s[2];if(256==(256&d))return;Bo(s);const g=Fo();try{Js(s),function mu(i){return lt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&tl(i,s,a,2,c);const _=3==(3&d);if(!g)if(_){const A=i.preOrderCheckHooks;null!==A&&Os(s,A,null)}else{const A=i.preOrderHooks;null!==A&&vu(s,A,0,null),wu(s,0)}if(function vw(i){for(let s=Ef(i);null!==s;s=zc(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const d=a[c],g=d[3];0==(1024&d[2])&&xs(g,1),d[2]|=1024}}}(s),function TI(i){for(let s=Ef(i);null!==s;s=zc(s))for(let a=10;a<s.length;a++){const c=s[a],d=c[1];Ro(c)&&oa(d,c,d.template,c[8])}}(s),null!==i.contentQueries&&uw(i,s),!g)if(_){const A=i.contentCheckHooks;null!==A&&Os(s,A)}else{const A=i.contentHooks;null!==A&&vu(s,A,1),wu(s,1)}!function nA(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)Xn(~d);else{const g=d,_=a[++c],w=a[++c];Wh(_,g),w(2,s[g])}}}finally{Xn(-1)}}(i,s);const w=i.components;null!==w&&function r_(i,s){for(let a=0;a<s.length;a++)AI(i,s[a])}(s,w);const E=i.viewQuery;if(null!==E&&Lf(2,E,c),!g)if(_){const A=i.viewCheckHooks;null!==A&&Os(s,A)}else{const A=i.viewHooks;null!==A&&vu(s,A,2),wu(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),g||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,xs(s[3],-1))}finally{_u()}}function Vg(i,s,a,c){const d=s[10],g=!Fo(),_=Fn(s);try{g&&!_&&d.begin&&d.begin(),_&&el(i,s,c),oa(i,s,a,c)}finally{g&&!_&&d.end&&d.end()}}function tl(i,s,a,c,d){const g=Ln(),_=2&c;try{Xn(-1),_&&s.length>20&&Qy(i,s,20,Fo()),a(c,d)}finally{Xn(g)}}function i_(i,s,a){!fc()||(function EI(i,s,a,c){const d=a.directiveStart,g=a.directiveEnd;i.firstCreatePass||ro(a,s),wr(c,s);const _=a.initialInputs;for(let w=d;w<g;w++){const E=i.data[w],A=nn(E);A&&oA(s,a,E);const x=os(s,i,w,a);wr(x,s),null!==_&&_w(0,w-d,x,E,0,_),A&&(Tr(a.index,s)[8]=x)}}(i,s,a,cr(a,s)),128==(128&a.flags)&&function pw(i,s,a){const c=a.directiveStart,d=a.directiveEnd,_=a.index,w=function Sa(){return lt.lFrame.currentDirectiveIndex}();try{Xn(_);for(let E=c;E<d;E++){const A=i.data[E],x=s[E];Vo(E),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&gw(A,x)}}finally{Xn(-1),Vo(w)}}(i,s,a))}function Nf(i,s,a=cr){const c=s.localNames;if(null!==c){let d=s.index+1;for(let g=0;g<c.length;g+=2){const _=c[g+1],w=-1===_?a(s,i):i[_];i[d++]=w}}}function s_(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Ud(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Ud(i,s,a,c,d,g,_,w,E,A){const x=20+c,k=x+d,j=function cw(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:At);return a}(x,k),Y="function"==typeof A?A():A;return j[1]={type:i,blueprint:j,template:a,queries:null,viewQuery:w,declTNode:s,data:j.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:E,consts:Y,incompleteFirstPass:!1}}function lw(i,s,a,c){const d=f_(s);null===a?d.push(c):(d.push(a),i.firstCreatePass&&Iw(i).push(c,d.length-1))}function o_(i,s,a){for(let c in i)if(i.hasOwnProperty(c)){const d=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(s,d):a[c]=[s,d]}return a}function fw(i,s,a,c){let d=!1;if(fc()){const g=function mw(i,s,a){const c=i.directiveRegistry;let d=null;if(c)for(let g=0;g<c.length;g++){const _=c[g];H0(a,_.selectors,!1)&&(d||(d=[]),Zo(ro(a,s),i,_.type),nn(_)?(u_(i,a),d.unshift(_)):d.push(_))}return d}(i,s,a),_=null===c?null:{"":-1};if(null!==g){d=!0,c_(a,i.data.length,g.length);for(let x=0;x<g.length;x++){const k=g[x];k.providersResolver&&k.providersResolver(k)}let w=!1,E=!1,A=Pf(i,s,g.length,null);for(let x=0;x<g.length;x++){const k=g[x];a.mergedAttrs=Je(a.mergedAttrs,k.hostAttrs),yw(i,a,s,A,k),II(A,k,_),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const j=k.type.prototype;!w&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!E&&(j.ngOnChanges||j.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),A++}!function hw(i,s){const c=s.directiveEnd,d=i.data,g=s.attrs,_=[];let w=null,E=null;for(let A=s.directiveStart;A<c;A++){const x=d[A],k=x.inputs,j=null===g||Tf(s)?null:CI(k,g);_.push(j),w=o_(k,A,w),E=o_(x.outputs,A,E)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=w,s.outputs=E}(i,a)}_&&function Zg(i,s,a){if(s){const c=i.localNames=[];for(let d=0;d<s.length;d+=2){const g=a[s[d+1]];if(null==g)throw new Oe(-301,`Export of name '${s[d+1]}' not found!`);c.push(s[d],g)}}}(a,c,_)}return a.mergedAttrs=Je(a.mergedAttrs,a.attrs),d}function bI(i,s,a,c,d,g){const _=g.hostBindings;if(_){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const E=~s.index;(function sA(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=E&&w.push(E),w.push(c,d,_)}}function gw(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function u_(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function II(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;nn(s)&&(a[""]=i)}}function c_(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function yw(i,s,a,c,d){i.data[c]=d;const g=d.factory||(d.factory=Ys(d.type)),_=new In(g,nn(d),null);i.blueprint[c]=_,a[c]=_,bI(i,s,0,c,Pf(i,a,d.hostVars,At),d)}function oA(i,s,a){const c=cr(s,i),d=s_(a),g=i[10],_=Gg(i,Fd(i,d,null,a.onPush?64:16,c,s,g,g.createRenderer(c,a),null,null));i[s.index]=_}function vo(i,s,a,c,d,g){const _=cr(i,s);!function l_(i,s,a,c,d,g,_){if(null==g)gn(i)?i.removeAttribute(s,d,a):s.removeAttribute(d);else{const w=null==_?de(g):_(g,c||"",d);gn(i)?i.setAttribute(s,d,w,a):a?s.setAttributeNS(a,d,w):s.setAttribute(d,w)}}(s[11],_,g,i.value,a,c,d)}function _w(i,s,a,c,d,g){const _=g[s];if(null!==_){const w=c.setInput;for(let E=0;E<_.length;){const A=_[E++],x=_[E++],k=_[E++];null!==w?c.setInput(a,k,A,x):a[x]=k}}}function CI(i,s){let a=null,c=0;for(;c<s.length;){const d=s[c];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],s[c+1])),c+=2}else c+=2;else c+=4}return a}function Hg(i,s,a,c){return new Array(i,!0,!1,s,null,0,c,a,null,null)}function AI(i,s){const a=Tr(s,i);if(Ro(a)){const c=a[1];80&a[2]?oa(c,a,c.template,a[8]):a[5]>0&&jd(a)}}function jd(i){for(let c=Ef(i);null!==c;c=zc(c))for(let d=10;d<c.length;d++){const g=c[d];if(1024&g[2]){const _=g[1];oa(_,g,_.template,g[8])}else g[5]>0&&jd(g)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const d=Tr(a[c],i);Ro(d)&&d[5]>0&&jd(d)}}function SI(i,s){const a=Tr(s,i),c=a[1];(function d_(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),el(c,a,a[8])}function Gg(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function kf(i){for(;i;){i[2]|=64;const s=ii(i);if(Ul(i)&&!s)return i;i=s}return null}function Ff(i,s,a){const c=s[10];c.begin&&c.begin();try{oa(i,s,i.template,a)}catch(d){throw qg(s,d),d}finally{c.end&&c.end()}}function bw(i){!function h_(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],c=mf(a),d=c[1];Vg(d,c,d.template,a)}}(i[8])}function Lf(i,s,a){xa(0),s(i,a)}const MI=(()=>Promise.resolve(null))();function f_(i){return i[7]||(i[7]=[])}function Iw(i){return i.cleanup||(i.cleanup=[])}function qg(i,s){const a=i[9],c=a?a.get(Zc,null):null;c&&c.handleError(s)}function Cw(i,s,a,c,d){for(let g=0;g<a.length;){const _=a[g++],w=a[g++],E=s[_],A=i.data[_];null!==A.setInput?A.setInput(E,d,c,w):E[w]=d}}function aa(i,s,a){const c=ns(s,i);!function Tg(i,s,a){gn(i)?i.setValue(s,a):s.textContent=a}(i[11],c,a)}function Vf(i,s,a){let c=a?i.styles:null,d=a?i.classes:null,g=0;if(null!==s)for(let _=0;_<s.length;_++){const w=s[_];"number"==typeof w?g=w:1==g?d=le(d,w):2==g&&(c=le(c,w+": "+s[++_]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}const p_=new cn("INJECTOR",-1);class g_{get(s,a=Vn){if(a===Vn){const c=new Error(`NullInjectorError: No provider for ${se(s)}!`);throw c.name="NullInjectorError",c}return a}}const m_=new cn("Set Injector scope."),Bf={},y_={};let zg;function Dw(){return void 0===zg&&(zg=new g_),zg}function __(i,s=null,a=null,c){const d=Tw(i,s,a,c);return d._resolveInjectorDefTypes(),d}function Tw(i,s=null,a=null,c){return new Aw(i,a,s||Dw(),c)}class Aw{constructor(s,a,c,d=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];a&&Li(a,w=>this.processProvider(w,s,a)),Li([s],w=>this.processInjectorType(w,[],g)),this.records.set(p_,jf(void 0,this));const _=this.records.get(m_);this.scope=null!=_?_.value:null,this.source=d||("object"==typeof s?null:se(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=Vn,c=st.Default){this.assertNotDestroyed();const d=Xo(this),g=Xt(void 0);try{if(!(c&st.SkipSelf)){let w=this.records.get(s);if(void 0===w){const E=function dA(i){return"function"==typeof i||"object"==typeof i&&i instanceof cn}(s)&&Hn(s);w=E&&this.injectableDefInScope(E)?jf(v_(s),Bf):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(c&st.Self?Dw():this.parent).get(s,a=c&st.Optional&&a===Vn?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Tu]=_[Tu]||[]).unshift(se(s)),d)throw _;return function W(i,s,a,c){const d=i[Tu];throw s[ri]&&d.unshift(s[ri]),i.message=function oe(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let d=se(s);if(Array.isArray(s))d=s.map(se).join(" -> ");else if("object"==typeof s){let g=[];for(let _ in s)if(s.hasOwnProperty(_)){let w=s[_];g.push(_+":"+("string"==typeof w?JSON.stringify(w):se(w)))}d=`{${g.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(ks,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[Tu]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{Xt(g),Xo(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((c,d)=>s.push(se(d))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,"")}processInjectorType(s,a,c){if(!(s=ee(s)))return!1;let d=An(s);const g=null==d&&s.ngModule||void 0,_=void 0===g?s:g,w=-1!==c.indexOf(_);if(void 0!==g&&(d=An(g)),null==d)return!1;if(null!=d.imports&&!w){let x;c.push(_);try{Li(d.imports,k=>{this.processInjectorType(k,a,c)&&(void 0===x&&(x=[]),x.push(k))})}finally{}if(void 0!==x)for(let k=0;k<x.length;k++){const{ngModule:j,providers:Y}=x[k];Li(Y,me=>this.processProvider(me,j,Y||ut))}}this.injectorDefTypes.add(_);const E=Ys(_)||(()=>new _);this.records.set(_,jf(E,Bf));const A=d.providers;if(null!=A&&!w){const x=s;Li(A,k=>this.processProvider(k,x,A))}return void 0!==g&&void 0!==s.providers}processProvider(s,a,c){let d=$d(s=ee(s))?s:ee(s&&s.provide);const g=function NI(i,s,a){return kI(i)?jf(void 0,i.useValue):jf(w_(i),Bf)}(s);if($d(s)||!0!==s.multi)this.records.get(d);else{let _=this.records.get(d);_||(_=jf(void 0,Bf,!0),_.factory=()=>T(_.multi),this.records.set(d,_)),d=s,_.multi.push(s)}this.records.set(d,g)}hydrate(s,a){return a.value===Bf&&(a.value=y_,a.value=a.factory()),"object"==typeof a.value&&a.value&&function lA(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=ee(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function v_(i){const s=Hn(i),a=null!==s?s.factory:Ys(i);if(null!==a)return a;if(i instanceof cn)throw new Oe(204,"");if(i instanceof Function)return function Sw(i){const s=i.length;if(s>0)throw function Ns(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new Oe(204,"");const a=function Cr(i){const s=i&&(i[Ji]||i[_r]);if(s){const a=function Ht(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Oe(204,"")}function w_(i,s,a){let c;if($d(i)){const d=ee(i);return Ys(d)||v_(d)}if(kI(i))c=()=>ee(i.useValue);else if(function xw(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...T(i.deps||[]));else if(function uA(i){return!(!i||!i.useExisting)}(i))c=()=>Yt(ee(i.useExisting));else{const d=ee(i&&(i.useClass||i.provide));if(!function cA(i){return!!i.deps}(i))return Ys(d)||v_(d);c=()=>new d(...T(i.deps))}return c}function jf(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function kI(i){return null!==i&&"object"==typeof i&&dd in i}function $d(i){return"function"==typeof i}let $s=(()=>{class i{static create(a,c){var d;if(Array.isArray(a))return __({name:""},c,a,"");{const g=null!==(d=a.name)&&void 0!==d?d:"";return __({name:g},a.parent,a.providers,g)}}}return i.THROW_IF_NOT_FOUND=Vn,i.NULL=new g_,i.\u0275prov=rn({token:i,providedIn:"any",factory:()=>Yt(p_)}),i.__NG_ELEMENT_ID__=-1,i})();function jr(i,s){yc(mf(i)[1],an())}function b_(i){let s=function Nw(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let d;if(nn(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Oe(903,"");d=s.\u0275dir}if(d){if(a){c.push(d);const _=i;_.inputs=Qg(i.inputs),_.declaredInputs=Qg(i.declaredInputs),_.outputs=Qg(i.outputs);const w=d.hostBindings;w&&E_(i,w);const E=d.viewQuery,A=d.contentQueries;if(E&&UI(i,E),A&&Fw(i,A),ue(i.inputs,d.inputs),ue(i.declaredInputs,d.declaredInputs),ue(i.outputs,d.outputs),nn(d)&&d.data.animation){const x=i.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let _=0;_<g.length;_++){const w=g[_];w&&w.ngInherit&&w(i),w===b_&&(a=!1)}}s=Object.getPrototypeOf(s)}!function kw(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=s+=d.hostVars,d.hostAttrs=Je(d.hostAttrs,a=Je(a,d.hostAttrs))}}(c)}function Qg(i){return i===Kr?{}:i===ut?[]:i}function UI(i,s){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{s(c,d),a(c,d)}:s}function Fw(i,s){const a=i.contentQueries;i.contentQueries=a?(c,d,g)=>{s(c,d,g),a(c,d,g)}:s}function E_(i,s){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{s(c,d),a(c,d)}:s}let Hd=null;function fr(){if(!Hd){const i=Ft.Symbol;if(i&&i.iterator)Hd=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Hd=c)}}}return Hd}function Gd(i){return!!Xg(i)&&(Array.isArray(i)||!(i instanceof Map)&&fr()in i)}function Xg(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function oi(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Hf(i,s,a,c){const d=Ie();return oi(d,Pi(),s)&&(Nt(),vo(En(),d,i,s,a,c)),Hf}function Gf(i,s,a,c,d,g,_,w){const E=Ie(),A=Nt(),x=i+20,k=A.firstCreatePass?function BI(i,s,a,c,d,g,_,w,E){const A=s.consts,x=Bu(s,i,4,_||null,lr(A,w));fw(s,a,x,lr(A,E)),yc(s,x);const k=x.tViews=Ud(2,x,c,d,g,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,x),k.queries=s.queries.embeddedTView(x)),x}(x,A,E,s,a,c,d,g,_):A.data[x];vr(k,!1);const j=E[11].createComment("");Yc(A,E,j,k),wr(j,E),Gg(E,E[x]=Hg(j,E,j,k)),Ds(k)&&i_(A,E,k),null!=_&&Nf(E,k,w)}function Kf(i,s=st.Default){const a=Ie();return null===a?Yt(i,s):io(an(),a,ee(i),s)}function eb(){throw new Error("invalid")}function Xa(i,s,a){const c=Ie();return oi(c,Pi(),s)&&function Mr(i,s,a,c,d,g,_,w){const E=cr(s,a);let x,A=s.inputs;!w&&null!=A&&(x=A[c])?(Cw(i,a,x,c,d),Vl(s)&&function jg(i,s){const a=Tr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(c=function a_(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=_?_(d,s.value||"",c):d,gn(g)?g.setProperty(E,c,d):Rs(c)||(E.setProperty?E.setProperty(c,d):E[c]=d))}(Nt(),En(),c,i,s,c[11],a,!1),Xa}function cm(i,s,a,c,d){const _=d?"class":"style";Cw(i,a,s.inputs[_],_,c)}function dm(i,s,a,c){const d=Ie(),g=Nt(),_=20+i,w=d[11],E=d[_]=qa(w,s,function Xl(){return lt.lFrame.currentNamespace}()),A=g.firstCreatePass?function lm(i,s,a,c,d,g,_){const w=s.consts,A=Bu(s,i,2,d,lr(w,g));return fw(s,a,A,lr(w,_)),null!==A.attrs&&Vf(A,A.attrs,!1),null!==A.mergedAttrs&&Vf(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(_,g,d,0,s,a,c):g.data[_];vr(A,!0);const x=A.mergedAttrs;null!==x&&Eu(w,E,x);const k=A.classes;null!==k&&Wy(w,E,k);const j=A.styles;null!==j&&yo(w,E,j),64!=(64&A.flags)&&Yc(g,d,E,A),0===function Po(){return lt.lFrame.elementDepthCount}()&&wr(E,d),function dr(){lt.lFrame.elementDepthCount++}(),Ds(A)&&(i_(g,d,A),function Vd(i,s,a){if(uc(s)){const d=s.directiveEnd;for(let g=s.directiveStart;g<d;g++){const _=i.data[g];_.contentQueries&&_.contentQueries(1,a[g],g)}}}(g,A,d)),null!==c&&Nf(d,A)}function ll(){let i=an();rs()?function pu(){lt.lFrame.isParent=!1}():(i=i.parent,vr(i,!1));const s=i;!function Aa(){lt.lFrame.elementDepthCount--}();const a=Nt();a.firstCreatePass&&(yc(a,i),uc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function _c(i){return 0!=(16&i.flags)}(s)&&cm(a,s,Ie(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function rd(i){return 0!=(32&i.flags)}(s)&&cm(a,s,Ie(),s.stylesWithoutHost,!1)}function B_(i,s,a,c){dm(i,s,a,c),ll()}function hm(i){return!!i&&"function"==typeof i.then}function $_(i){return!!i&&"function"==typeof i.subscribe}const Jd=$_;function Qf(i,s,a,c){const d=Ie(),g=Nt(),_=an();return function Jf(i,s,a,c,d,g,_,w){const E=Ds(c),x=i.firstCreatePass&&Iw(i),k=s[8],j=f_(s);let Y=!0;if(3&c.type||w){const Ze=cr(c,s),Xe=w?w(Ze):Ze,be=j.length,ct=w?kt=>w(bn(kt[c.index])):c.index;if(gn(a)){let kt=null;if(!w&&E&&(kt=function Z_(i,s,a,c){const d=i.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const _=d[g];if(_===a&&d[g+1]===c){const w=s[7],E=d[g+2];return w.length>E?w[E]:null}"string"==typeof _&&(g+=2)}return null}(i,s,d,c.index)),null!==kt)(kt.__ngLastListenerFn__||kt).__ngNextListenerFn__=g,kt.__ngLastListenerFn__=g,Y=!1;else{g=pm(c,s,k,g,!1);const Kt=a.listen(Xe,d,g);j.push(g,Kt),x&&x.push(d,ct,be,be+1)}}else g=pm(c,s,k,g,!0),Xe.addEventListener(d,g,_),j.push(g),x&&x.push(d,ct,be,_)}else g=pm(c,s,k,g,!1);const me=c.outputs;let ke;if(Y&&null!==me&&(ke=me[d])){const Ze=ke.length;if(Ze)for(let Xe=0;Xe<Ze;Xe+=2){const Ei=s[ke[Xe]][ke[Xe+1]].subscribe(g),ic=j.length;j.push(g,Ei),x&&x.push(d,c.index,ic,-(ic+1))}}}(g,d,d[11],_,i,s,!!a,c),Qf}function Xd(i,s,a,c){try{return!1!==a(c)}catch(d){return qg(i,d),!1}}function pm(i,s,a,c,d){return function g(_){if(_===Function)return c;const w=2&i.flags?Tr(i.index,s):s;0==(32&s[2])&&kf(w);let E=Xd(s,0,c,_),A=g.__ngNextListenerFn__;for(;A;)E=Xd(s,0,A,_)&&E,A=A.__ngNextListenerFn__;return d&&!1===E&&(_.preventDefault(),_.returnValue=!1),E}}function rb(i=1){return function Jl(i){return(lt.lFrame.contextLView=function Xp(i,s){for(;i>0;)s=s[15],i--;return s}(i,lt.lFrame.contextLView))[8]}(i)}function _m(i,s,a,c,d){const g=i[a+1],_=null===s;let w=c?Bs(g):_o(g),E=!1;for(;0!==w&&(!1===E||_);){const x=i[w+1];dl(i[w],s)&&(E=!0,i[w+1]=c?Rg(x):xg(x)),w=c?Bs(x):_o(x)}E&&(i[a+1]=c?xg(g):Rg(g))}function dl(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&ti(i,s)>=0}function J_(i,s){return function Rr(i,s,a,c){const d=Ie(),g=Nt(),_=function pi(i){const s=lt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);g.firstUpdatePass&&function ev(i,s,a,c){const d=i.data;if(null===d[a+1]){const g=d[Ln()],_=function X_(i,s){return s>=i.expandoStartIndex}(i,a);(function cb(i,s){return 0!=(i.flags&(s?16:32))})(g,c)&&null===s&&!_&&(s=!1),s=function ih(i,s,a,c){const d=function to(i){const s=lt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let g=c?s.residualClasses:s.residualStyles;if(null===d)0===(c?s.classBindings:s.styleBindings)&&(a=sh(a=tv(null,i,s,a,c),s.attrs,c),g=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==d)if(a=tv(d,i,s,a,c),null===g){let E=function WI(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==_o(c))return i[Bs(c)]}(i,s,c);void 0!==E&&Array.isArray(E)&&(E=tv(null,i,s,E[1],c),E=sh(E,s.attrs,c),function KI(i,s,a,c){i[Bs(a?s.classBindings:s.styleBindings)]=c}(i,s,c,E))}else g=function ab(i,s,a){let c;const d=s.directiveEnd;for(let g=1+s.directiveStylingLast;g<d;g++)c=sh(c,i[g].hostAttrs,a);return sh(c,s.attrs,a)}(i,s,c)}return void 0!==g&&(c?s.residualClasses=g:s.residualStyles=g),a}(d,g,s,c),function K_(i,s,a,c,d,g){let _=g?s.classBindings:s.styleBindings,w=Bs(_),E=_o(_);i[c]=a;let x,A=!1;if(Array.isArray(a)){const k=a;x=k[1],(null===x||ti(k,x)>0)&&(A=!0)}else x=a;if(d)if(0!==E){const j=Bs(i[w+1]);i[c+1]=Sf(j,w),0!==j&&(i[j+1]=Mg(i[j+1],c)),i[w+1]=function J0(i,s){return 131071&i|s<<17}(i[w+1],c)}else i[c+1]=Sf(w,0),0!==w&&(i[w+1]=Mg(i[w+1],c)),w=c;else i[c+1]=Sf(E,0),0===w?w=c:i[E+1]=Mg(i[E+1],c),E=c;A&&(i[c+1]=xg(i[c+1])),_m(i,x,c,!0),_m(i,x,c,!1),function nh(i,s,a,c,d){const g=d?i.residualClasses:i.residualStyles;null!=g&&"string"==typeof s&&ti(g,s)>=0&&(a[c+1]=Rg(a[c+1]))}(s,x,i,c,g),_=Sf(w,E),g?s.classBindings=_:s.styleBindings=_}(d,g,s,a,_,c)}}(g,i,_,c),s!==At&&oi(d,_,s)&&function rv(i,s,a,c,d,g,_,w){if(!(3&s.type))return;const E=i.data,A=E[w+1];oh(function Og(i){return 1==(1&i)}(A)?iv(E,s,a,d,_o(A),_):void 0)||(oh(g)||function Q0(i){return 2==(2&i)}(A)&&(g=iv(E,null,a,d,w,_)),function Jc(i,s,a,c,d){const g=gn(i);if(s)d?g?i.addClass(a,c):a.classList.add(c):g?i.removeClass(a,c):a.classList.remove(c);else{let _=-1===c.indexOf("-")?void 0:ji.DashCase;if(null==d)g?i.removeStyle(a,c,_):a.style.removeProperty(c);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),_|=ji.Important),g?i.setStyle(a,c,d,_):a.style.setProperty(c,d,w?"important":"")}}}(c,_,ns(Ln(),a),d,g))}(g,g.data[Ln()],d,d[11],i,d[_+1]=function YI(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=se(co(i)))),i}(s,a),c,_)}(i,s,null,!0),J_}function tv(i,s,a,c,d){let g=null;const _=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<_&&(g=s[w],c=sh(c,g.hostAttrs,d),g!==i);)w++;return null!==i&&(a.directiveStylingLast=w),c}function sh(i,s,a){const c=a?1:2;let d=-1;if(null!==s)for(let g=0;g<s.length;g++){const _=s[g];"number"==typeof _?d=_:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),dt(i,_,!!a||s[++g]))}return void 0===i?null:i}function iv(i,s,a,c,d,g){const _=null===s;let w;for(;d>0;){const E=i[d],A=Array.isArray(E),x=A?E[1]:E,k=null===x;let j=a[d+1];j===At&&(j=k?ut:void 0);let Y=k?Dc(j,c):x===c?j:void 0;if(A&&!oh(Y)&&(Y=Dc(E,c)),oh(Y)&&(w=Y,_))return w;const me=i[d+1];d=_?Bs(me):_o(me)}if(null!==s){let E=g?s.residualClasses:s.residualStyles;null!=E&&(w=Dc(E,c))}return w}function oh(i){return void 0!==i}function lb(i,s=""){const a=Ie(),c=Nt(),d=i+20,g=c.firstCreatePass?Bu(c,d,1,s,null):c.data[d],_=a[d]=function Wc(i,s){return gn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Yc(c,a,_,g),vr(g,!1)}function ah(i){return fl("",i,""),ah}function fl(i,s,a){const c=Ie(),d=function qd(i,s,a,c){return oi(i,Pi(),a)?s+de(a)+c:At}(c,i,s,a);return d!==At&&aa(c,Ln(),d),fl}const Gu=void 0;var pl=["en",[["a","p"],["AM","PM"],Gu],[["AM","PM"],Gu,Gu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Gu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Gu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Gu,"{1} 'at' {0}",Gu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function wb(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let gl={};function Sm(i){const s=function dh(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Gi(s);if(a)return a;const c=s.split("-")[0];if(a=Gi(c),a)return a;if("en"===c)return pl;throw new Error(`Missing locale data for the locale "${i}".`)}function ap(i){return Sm(i)[mt.PluralCase]}function Gi(i){return i in gl||(gl[i]=Ft.ng&&Ft.ng.common&&Ft.ng.common.locales&&Ft.ng.common.locales[i]),gl[i]}var mt=(()=>((mt=mt||{})[mt.LocaleId=0]="LocaleId",mt[mt.DayPeriodsFormat=1]="DayPeriodsFormat",mt[mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",mt[mt.DaysFormat=3]="DaysFormat",mt[mt.DaysStandalone=4]="DaysStandalone",mt[mt.MonthsFormat=5]="MonthsFormat",mt[mt.MonthsStandalone=6]="MonthsStandalone",mt[mt.Eras=7]="Eras",mt[mt.FirstDayOfWeek=8]="FirstDayOfWeek",mt[mt.WeekendRange=9]="WeekendRange",mt[mt.DateFormat=10]="DateFormat",mt[mt.TimeFormat=11]="TimeFormat",mt[mt.DateTimeFormat=12]="DateTimeFormat",mt[mt.NumberSymbols=13]="NumberSymbols",mt[mt.NumberFormats=14]="NumberFormats",mt[mt.CurrencyCode=15]="CurrencyCode",mt[mt.CurrencySymbol=16]="CurrencySymbol",mt[mt.CurrencyName=17]="CurrencyName",mt[mt.Currencies=18]="Currencies",mt[mt.Directionality=19]="Directionality",mt[mt.PluralCase=20]="PluralCase",mt[mt.ExtraData=21]="ExtraData",mt))();const hh="en-US";let bb=hh;function El(i,s,a,c,d){if(i=ee(i),Array.isArray(i))for(let g=0;g<i.length;g++)El(i[g],s,a,c,d);else{const g=Nt(),_=Ie();let w=$d(i)?i:ee(i.provide),E=w_(i);const A=an(),x=1048575&A.providerIndexes,k=A.directiveStart,j=A.providerIndexes>>20;if($d(i)||!i.multi){const Y=new In(E,d,Kf),me=Il(w,s,d?x:x+j,k);-1===me?(Zo(ro(A,_),g,w),wv(g,i,s.length),s.push(w),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(Y),_.push(Y)):(a[me]=Y,_[me]=Y)}else{const Y=Il(w,s,x+j,k),me=Il(w,s,x,x+j),ke=Y>=0&&a[Y],Ze=me>=0&&a[me];if(d&&!Ze||!d&&!ke){Zo(ro(A,_),g,w);const Xe=function Fm(i,s,a,c,d){const g=new In(i,a,Kf);return g.multi=[],g.index=s,g.componentProviders=0,la(g,d,c&&!a),g}(d?kb:mp,a.length,d,c,E);!d&&Ze&&(a[me].providerFactory=Xe),wv(g,i,s.length,0),s.push(w),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(Xe),_.push(Xe)}else wv(g,i,Y>-1?Y:me,la(a[d?me:Y],E,!d&&c));!d&&c&&Ze&&a[me].componentProviders++}}}function wv(i,s,a,c){const d=$d(s),g=function FI(i){return!!i.useClass}(s);if(d||g){const E=(g?ee(s.useClass):s).prototype.ngOnDestroy;if(E){const A=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const x=A.indexOf(a);-1===x?A.push(a,[c,E]):A[x+1].push(c,E)}else A.push(a,E)}}}function la(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Il(i,s,a,c){for(let d=a;d<c;d++)if(s[d]===i)return d;return-1}function mp(i,s,a,c){return da(this.multi,[])}function kb(i,s,a,c){const d=this.multi;let g;if(this.providerFactory){const _=this.providerFactory.componentProviders,w=os(a,a[1],this.providerFactory.index,c);g=w.slice(0,_),da(d,g);for(let E=_;E<w.length;E++)g.push(w[E])}else g=[],da(d,g);return g}function da(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Yu(i,s=[]){return a=>{a.providersResolver=(c,d)=>function Nb(i,s,a){const c=Nt();if(c.firstCreatePass){const d=nn(i);El(a,c.data,c.blueprint,d,!0),El(s,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,s)}}class gh{}class Ev{resolveComponentFactory(s){throw function Qu(i){const s=Error(`No component factory found for ${se(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Eo=(()=>{class i{}return i.NULL=new Ev,i})();function Iv(){return fa(an(),Ie())}function fa(i,s){return new mh(cr(i,s))}let mh=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Iv,i})();function Fb(i){return i instanceof mh?i.nativeElement:i}class yh{}let Lb=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function wC(){const i=Ie(),a=Tr(an().index,i);return function vC(i){return i[11]}(Qr(a)?a:i)}(),i})(),Vb=(()=>{class i{}return i.\u0275prov=rn({token:i,providedIn:"root",factory:()=>null}),i})();class Dv{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Nr=new Dv("13.1.3"),Lm={};function dn(i,s,a,c,d=!1){for(;null!==a;){const g=s[a.index];if(null!==g&&c.push(bn(g)),Si(g))for(let w=10;w<g.length;w++){const E=g[w],A=E[1].firstChild;null!==A&&dn(E[1],E,A,c)}const _=a.type;if(8&_)dn(i,s,a.child,c);else if(32&_){const w=wf(a,s);let E;for(;E=w();)c.push(E)}else if(16&_){const w=ku(s,a);if(Array.isArray(w))c.push(...w);else{const E=ii(s[16]);dn(E[1],E,w,c,!0)}}a=d?a.projectionNext:a.next}return c}class _p{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return dn(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Si(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(Cf(s,c),Du(a,c))}this._attachedToViewContainer=!1}m(this._lView[1],this._lView)}onDestroy(s){lw(this._lView[1],this._lView,null,s)}markForCheck(){kf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ff(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Ew(i,s,a){eo(!0);try{Ff(i,s,a)}finally{eo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function zy(i,s){Lu(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Oe(902,"");this._appRef=s}}class Ub extends _p{constructor(s){super(s),this._view=s}detectChanges(){bw(this._view)}checkNoChanges(){!function xI(i){eo(!0);try{bw(i)}finally{eo(!1)}}(this._view)}get context(){return null}}class Ju extends Eo{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=On(s);return new Bm(a,this.ngModule)}}function Bb(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}const Vm=new cn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Sd});class Bm extends gh{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function K0(i){return i.map(W0).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Bb(this.componentDef.inputs)}get outputs(){return Bb(this.componentDef.outputs)}create(s,a,c,d){const g=(d=d||this.ngModule)?function Um(i,s){return{get:(a,c,d)=>{const g=i.get(a,Lm,d);return g!==Lm||c===Lm?g:s.get(a,c,d)}}}(s,d.injector):s,_=g.get(yh,Oi),w=g.get(Vb,null),E=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",x=c?function Bg(i,s,a){if(gn(i))return i.selectRootElement(s,a===Gt.ShadowDom);let c="string"==typeof s?i.querySelector(s):s;return c.textContent="",c}(E,c,this.componentDef.encapsulation):qa(_.createRenderer(null,this.componentDef),A,function vp(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(A)),k=this.componentDef.onPush?576:528,j=function Zf(i,s){return{components:[],scheduler:i||Sd,clean:MI,playerHandler:s||null,flags:0}}(),Y=Ud(0,null,null,1,0,null,null,null,null,null),me=Fd(null,Y,j,k,null,null,_,E,w,g);let ke,Ze;Bo(me);try{const Xe=function Pw(i,s,a,c,d,g){const _=a[1];a[20]=i;const E=Bu(_,20,2,"#host",null),A=E.mergedAttrs=s.hostAttrs;null!==A&&(Vf(E,A,!0),null!==i&&(Eu(d,i,A),null!==E.classes&&Wy(d,i,E.classes),null!==E.styles&&yo(d,i,E.styles)));const x=c.createRenderer(i,s),k=Fd(a,s_(s),null,s.onPush?64:16,a[20],E,c,x,g||null,null);return _.firstCreatePass&&(Zo(ro(E,a),_,s.type),u_(_,E),c_(E,a.length,1)),Gg(a,k),a[20]=k}(x,this.componentDef,me,_,E);if(x)if(c)Eu(E,x,["ng-version",Nr.full]);else{const{attrs:be,classes:ct}=function Y0(i){const s=[],a=[];let c=1,d=2;for(;c<i.length;){let g=i[c];if("string"==typeof g)2===d?""!==g&&s.push(g,i[++c]):8===d&&a.push(g);else{if(!Tn(d))break;d=g}c++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);be&&Eu(E,x,be),ct&&ct.length>0&&Wy(E,x,ct.join(" "))}if(Ze=Ri(Y,20),void 0!==a){const be=Ze.projection=[];for(let ct=0;ct<this.ngContentSelectors.length;ct++){const kt=a[ct];be.push(null!=kt?Array.from(kt):null)}}ke=function Or(i,s,a,c,d){const g=a[1],_=function iA(i,s,a){const c=an();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),yw(i,c,s,Pf(i,s,1,null),a));const d=os(s,i,c.directiveStart,c);wr(d,s);const g=cr(c,s);return g&&wr(g,s),d}(g,a,s);if(c.components.push(_),i[8]=_,d&&d.forEach(E=>E(_,s)),s.contentQueries){const E=an();s.contentQueries(1,_,E.directiveStart)}const w=an();return!g.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Xn(w.index),bI(a[1],w,0,w.directiveStart,w.directiveEnd,s),gw(s,_)),_}(Xe,this.componentDef,me,j,[jr]),el(Y,me,null)}finally{_u()}return new bC(this.componentType,ke,fa(Ze,me),me,Ze)}}class bC extends class ha{}{constructor(s,a,c,d,g){super(),this.location=c,this._rootLView=d,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new Ub(d),this.componentType=s}get injector(){return new Nn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class _h{}class Tv{}const vh=new Map;class Av extends _h{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ju(this);const c=kn(s);this._bootstrapComponents=go(c.bootstrap),this._r3Injector=Tw(s,a,[{provide:_h,useValue:this},{provide:Eo,useValue:this.componentFactoryResolver}],se(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=$s.THROW_IF_NOT_FOUND,c=st.Default){return s===$s||s===_h||s===p_?this:this._r3Injector.get(s,a,c)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class jm extends Tv{constructor(s){super(),this.moduleType=s,null!==kn(s)&&function IC(i){const s=new Set;!function a(c){const d=kn(c,!0),g=d.id;null!==g&&(function $b(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${se(s)} vs ${se(s.name)}`)}(g,vh.get(g),c),vh.set(g,c));const _=go(d.imports);for(const w of _)s.has(w)||(s.add(w),a(w))}(i)}(s)}create(s){return new Av(this.moduleType,s)}}function su(i){return s=>{setTimeout(i,void 0,s)}}const Io=class Ih extends l.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){var d,g,_;let w=s,E=a||(()=>null),A=c;if(s&&"object"==typeof s){const k=s;w=null===(d=k.next)||void 0===d?void 0:d.bind(k),E=null===(g=k.error)||void 0===g?void 0:g.bind(k),A=null===(_=k.complete)||void 0===_?void 0:_.bind(k)}this.__isAsync&&(E=su(E),w&&(w=su(w)),A&&(A=su(A)));const x=super.subscribe({next:w,error:E,complete:A});return s instanceof J.w0&&s.add(x),x}};function Tl(){return this._results[fr()]()}class Gm{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=fr(),c=Gm.prototype;c[a]||(c[a]=Tl)}get changes(){return this._changes||(this._changes=new Io)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const d=qn(s);(this._changesDetected=!function sf(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],g=s[c];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let pa=(()=>{class i{}return i.__NG_ELEMENT_ID__=wp,i})();const Wb=pa,Kb=class extends Wb{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s){const a=this._declarationTContainer.tViews,c=Fd(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(c[19]=g.createEmbeddedView(a)),el(a,c,s),new _p(c)}};function wp(){return qm(an(),Ie())}function qm(i,s){return 4&i.type?new Kb(s,i,fa(i,s)):null}let zm=(()=>{class i{}return i.__NG_ELEMENT_ID__=$n,i})();function $n(){return Ch(an(),Ie())}const Wm=zm,bp=class extends Wm{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return fa(this._hostTNode,this._hostLView)}get injector(){return new Nn(this._hostTNode,this._hostLView)}get parentInjector(){const s=er(this._hostTNode,this._hostLView);if(Xr(s)){const a=Na(s,this._hostLView),c=hr(s);return new Nn(a[1].data[c+8],a)}return new Nn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Nv(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){const d=s.createEmbeddedView(a||{});return this.insert(d,c),d}createComponent(s,a,c,d,g){const _=s&&!function Yo(i){return"function"==typeof i}(s);let w;if(_)w=a;else{const k=a||{};w=k.index,c=k.injector,d=k.projectableNodes,g=k.ngModuleRef}const E=_?s:new Bm(On(s)),A=c||this.parentInjector;if(!g&&null==E.ngModule&&A){const k=A.get(_h,null);k&&(g=k)}const x=E.create(A,d,void 0,g);return this.insert(x.hostView,w),x}insert(s,a){const c=s._lView,d=c[1];if(function hc(i){return Si(i[3])}(c)){const x=this.indexOf(s);if(-1!==x)this.detach(x);else{const k=c[3],j=new bp(k,k[6],k[3]);j.detach(j.indexOf(s))}}const g=this._adjustIndex(a),_=this._lContainer;!function If(i,s,a,c){const d=10+c,g=a.length;c>0&&(a[d-1][4]=s),c<g-10?(s[4]=a[d],od(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function Kc(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=128}(d,c,_,g);const w=Rd(g,_),E=c[11],A=Ye(E,_[7]);return null!==A&&function si(i,s,a,c,d,g){c[0]=d,c[6]=s,Lu(i,c,a,1,d,g)}(d,_[6],E,c,A,w),s.attachToViewContainerRef(),od(kv(_),g,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Nv(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=Cf(this._lContainer,a);c&&(Du(kv(this._lContainer),a),m(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=Cf(this._lContainer,a);return c&&null!=Du(kv(this._lContainer),a)?new _p(c):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function Nv(i){return i[8]}function kv(i){return i[8]||(i[8]=[])}function Ch(i,s){let a;const c=s[i.index];if(Si(c))a=c;else{let d;if(8&i.type)d=bn(c);else{const g=s[11];d=g.createComment("");const _=cr(i,s);L(g,Ye(g,_),d,function tt(i,s){return gn(i)?i.nextSibling(s):s.nextSibling}(g,_),!1)}s[i.index]=a=Hg(c,s,d,i),Gg(s,a)}return new bp(a,i,s)}class Co{constructor(s){this.queryList=s,this.matches=null}clone(){return new Co(this.queryList)}setDirty(){this.queryList.setDirty()}}class Km{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let g=0;g<c;g++){const _=a.getByIndex(g);d.push(this.queries[_.indexInDeclarationView].clone())}return new Km(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Dh(s,a).matches&&this.queries[a].setDirty()}}class Fv{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class Ym{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,g=this.getByIndex(c).embeddedTView(s,d);g&&(g.indexInDeclarationView=c,null!==a?a.push(g):a=[g])}return null!==a?new Ym(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Xu{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Xu(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const g=c[d];this.matchTNodeWithReadOption(s,a,Lv(a,g)),this.matchTNodeWithReadOption(s,a,Ps(a,s,g,!1,!1))}else c===pa?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Ps(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===mh||d===zm||d===pa&&4&a.type)this.addMatch(a.index,-2);else{const g=Ps(a,s,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Lv(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function yr(i,s,a,c){return-1===a?function xC(i,s){return 11&i.type?fa(i,s):4&i.type?qm(i,s):null}(s,i):-2===a?function Wt(i,s,a){return a===mh?fa(s,i):a===pa?qm(s,i):a===zm?Ch(s,i):void 0}(i,s,c):os(i,i[1],a,s)}function Vv(i,s,a,c){const d=s[19].queries[c];if(null===d.matches){const g=i.data,_=a.matches,w=[];for(let E=0;E<_.length;E+=2){const A=_[E];w.push(A<0?null:yr(s,g[A],_[E+1],a.metadata.read))}d.matches=w}return d.matches}function Qm(i,s,a,c){const d=i.queries.getByIndex(a),g=d.matches;if(null!==g){const _=Vv(i,s,d,a);for(let w=0;w<g.length;w+=2){const E=g[w];if(E>0)c.push(_[w/2]);else{const A=g[w+1],x=s[-E];for(let k=10;k<x.length;k++){const j=x[k];j[17]===j[3]&&Qm(j[1],j,A,c)}if(null!==x[9]){const k=x[9];for(let j=0;j<k.length;j++){const Y=k[j];Qm(Y[1],Y,A,c)}}}}}return c}function ou(i){const s=Ie(),a=Nt(),c=Uo();xa(c+1);const d=Dh(a,c);if(i.dirty&&Fn(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const g=d.crossesNgTemplate?Qm(a,s,c,[]):Vv(a,s,d,c);i.reset(g,Fb),i.notifyOnChanges()}return!0}return!1}function vi(i,s,a,c){const d=Nt();if(d.firstCreatePass){const g=an();(function Do(i,s,a){null===i.queries&&(i.queries=new Ym),i.queries.track(new Xu(s,a))})(d,new Fv(s,a,c),g.index),function Qb(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function Bv(i,s,a){const c=new Gm(4==(4&a));lw(i,s,c,c.destroy),null===s[19]&&(s[19]=new Km),s[19].queries.push(new Co(c))}(d,Ie(),a)}function Uv(){return function Ip(i,s){return i[19].queries[s].queryList}(Ie(),Uo())}function Dh(i,s){return i.queries.getByIndex(s)}function Tp(...i){}const qv=new cn("Application Initializer");let Mh=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Tp,this.reject=Tp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(hm(g))a.push(g);else if(Jd(g)){const _=new Promise((w,E)=>{g.subscribe({complete:w,error:E})});a.push(_)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Yt(qv,8))},i.\u0275prov=rn({token:i,factory:i.\u0275fac}),i})();const hE=new cn("AppId"),jC={provide:hE,useFactory:function BC(){return`${zv()}${zv()}${zv()}`},deps:[]};function zv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const fE=new cn("Platform Initializer"),pE=new cn("Platform ID"),gE=new cn("appBootstrapListener");let mE=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=rn({token:i,factory:i.\u0275fac}),i})();const uy=new cn("LocaleId"),yE=new cn("DefaultCurrencyCode");class _E{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let cy=(()=>{class i{compileModuleSync(a){return new jm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),g=go(kn(a).declarations).reduce((_,w)=>{const E=On(w);return E&&_.push(new Bm(E)),_},[]);return new _E(c,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=rn({token:i,factory:i.\u0275fac}),i})();const Fr=(()=>Promise.resolve(0))();function Ap(i){"undefined"==typeof Zone?Fr.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class bi{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Io(!1),this.onMicrotaskEmpty=new Io(!1),this.onStable=new Io(!1),this.onError=new Io(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Wv(){let i=Ft.requestAnimationFrame,s=Ft.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function wE(i){const s=()=>{!function HC(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ft,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Oh(i),i.isCheckStableRunning=!0,ly(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Oh(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,g,_,w)=>{try{return tc(i),a.invokeTask(d,g,_,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||i.shouldCoalesceRunChangeDetection)&&s(),nc(i)}},onInvoke:(a,c,d,g,_,w,E)=>{try{return tc(i),a.invoke(d,g,_,w,E)}finally{i.shouldCoalesceRunChangeDetection&&s(),nc(i)}},onHasTask:(a,c,d,g)=>{a.hasTask(d,g),c===d&&("microTask"==g.change?(i._hasPendingMicrotasks=g.microTask,Oh(i),ly(i)):"macroTask"==g.change&&(i.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,c,d,g)=>(a.handleError(d,g),i.runOutsideAngular(()=>i.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!bi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(bi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,d){const g=this._inner,_=g.scheduleEventTask("NgZoneEvent: "+d,s,ec,Tp,Tp);try{return g.runTask(_,a,c)}finally{g.cancelTask(_)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const ec={};function ly(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Oh(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function tc(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function nc(i){i._nesting--,ly(i)}class Sl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Io,this.onMicrotaskEmpty=new Io,this.onStable=new Io,this.onError=new Io}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,d){return s.apply(a,c)}}let Rh=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{bi.assertNotInAngularZone(),Ap(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ap(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==g),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Yt(bi))},i.\u0275prov=rn({token:i,factory:i.\u0275fac}),i})(),Kv=(()=>{class i{constructor(){this._applications=new Map,dy.addToWindow(this)}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return dy.findTestabilityInTree(this,a,c)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=rn({token:i,factory:i.\u0275fac}),i})();class Yv{addToWindow(s){}findTestabilityInTree(s,a,c){return null}}function Qv(i){dy=i}let qs,dy=new Yv;const Sp=new cn("AllowMultipleToken");class xp{constructor(s,a){this.name=s,this.token=a}}function EE(i,s,a=[]){const c=`Platform: ${s}`,d=new cn(c);return(g=[])=>{let _=CE();if(!_||_.injector.get(Sp,!1))if(i)i(a.concat(g).concat({provide:d,useValue:!0}));else{const w=a.concat(g).concat({provide:d,useValue:!0},{provide:m_,useValue:"platform"});!function xl(i){if(qs&&!qs.destroyed&&!qs.injector.get(Sp,!1))throw new Oe(400,"");qs=i.get(DE);const s=i.get(fE,null);s&&s.forEach(a=>a())}($s.create({providers:w,name:c}))}return function IE(i){const s=CE();if(!s)throw new Oe(401,"");return s}()}}function CE(){return qs&&!qs.destroyed?qs:null}let DE=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const w=function Mp(i,s){let a;return a="noop"===i?new Sl:("zone.js"===i?void 0:i)||new bi({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),E=[{provide:bi,useValue:w}];return w.run(()=>{const A=$s.create({providers:E,parent:this.injector,name:a.moduleType.name}),x=a.create(A),k=x.injector.get(Zc,null);if(!k)throw new Oe(402,"");return w.runOutsideAngular(()=>{const j=w.onError.subscribe({next:Y=>{k.handleError(Y)}});x.onDestroy(()=>{Jv(this._modules,x),j.unsubscribe()})}),function Ml(i,s,a){try{const c=a();return hm(c)?c.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(k,w,()=>{const j=x.injector.get(Mh);return j.runInitializers(),j.donePromise.then(()=>(function Eb(i){et(i,"Expected localeId to be defined"),"string"==typeof i&&(bb=i.toLowerCase().replace(/_/g,"-"))}(x.injector.get(uy,hh)||hh),this._moduleDoBootstrap(x),x))})})}bootstrapModule(a,c=[]){const d=rc({},c);return function GC(i,s,a){const c=new jm(a);return Promise.resolve(c)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const c=a.injector.get(Ph);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Oe(403,"");a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Yt($s))},i.\u0275prov=rn({token:i,factory:i.\u0275fac}),i})();function rc(i,s){return Array.isArray(s)?s.reduce(rc,i):Object.assign(Object.assign({},i),s)}let Ph=(()=>{class i{constructor(a,c,d,g,_){this._zone=a,this._injector=c,this._exceptionHandler=d,this._componentFactoryResolver=g,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new N.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),E=new N.y(A=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{bi.assertNotInAngularZone(),Ap(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{bi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{x.unsubscribe(),k.unsubscribe()}});this.isStable=(0,ie.T)(w,E.pipe((0,re.B)()))}bootstrap(a,c){if(!this._initStatus.done)throw new Oe(405,"");let d;d=a instanceof gh?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const g=function bE(i){return i.isBoundToModule}(d)?void 0:this._injector.get(_h),w=d.create($s.NULL,[],c||d.selector,g),E=w.location.nativeElement,A=w.injector.get(Rh,null),x=A&&w.injector.get(Kv);return A&&x&&x.registerApplication(E,A),w.onDestroy(()=>{this.detachView(w.hostView),Jv(this.components,w),x&&x.unregisterApplication(E)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Oe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Jv(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(gE,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Yt(bi),Yt($s),Yt(Zc),Yt(Eo),Yt(Mh))},i.\u0275prov=rn({token:i,factory:i.\u0275fac}),i})();function Jv(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Op=!0,AE=!1;function SE(){return AE=!0,Op}function Rp(){if(AE)throw new Error("Cannot enable prod mode after platform setup.");Op=!1}let xE=(()=>{class i{}return i.__NG_ELEMENT_ID__=Wi,i})();function Wi(i){return function ME(i,s,a){if(Vl(i)&&!a){const c=Tr(i.index,s);return new _p(c,c)}return 47&i.type?new _p(s[16],s):null}(an(),Ie(),16==(16&i))}class PE{constructor(){}supports(s){return Gd(s)}create(s){return new eD(s)}}const NE=(i,s)=>s;class eD{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||NE}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,d=0,g=null;for(;a||c;){const _=!c||a&&a.currentIndex<kE(c,d,g)?a:c,w=kE(_,d,g),E=_.currentIndex;if(_===c)d--,c=c._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{g||(g=[]);const A=w-d,x=E-d;if(A!=x){for(let j=0;j<A;j++){const Y=j<g.length?g[j]:g[j]=0,me=Y+j;x<=me&&me<A&&(g[j]=Y+1)}g[_.previousIndex]=x-A}}w!==E&&s(_,w,E)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Gd(s))throw new Oe(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,g,_,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)g=s[w],_=this._trackByFn(w,g),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,g,_,w)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,_,w),c=!0),a=a._next}else d=0,function Uw(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[fr()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,w=>{_=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,w,_,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,_,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,d){let g;return null===s?g=this._itTail:(g=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,g,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,g,d)):s=this._addAfter(new tD(a,c),g,d),s}_verifyReinsertion(s,a,c,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?s=this._reinsertAfter(g,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,g=s._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Ir),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ir),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class tD{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class d0{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Ir{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new d0,this.map.set(a,c)),c.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function kE(i,s,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+s+d}class FE{constructor(){}supports(s){return s instanceof Map||Xg(s)}create(){return new nD}}class nD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Xg(s)))throw new Oe(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const g=d._prev,_=d._next;return g&&(g._next=_),_&&(_._prev=g),d._next=null,d._prev=null,d}const c=new rD(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class rD{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function h0(){return new py([new PE])}let py=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||h0()),deps:[[i,new ht,new Ue]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new Oe(901,"")}}return i.\u0275prov=rn({token:i,providedIn:"root",factory:h0}),i})();function LE(){return new Np([new FE])}let Np=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||LE()),deps:[[i,new ht,new Ue]]}}find(a){const c=this.factories.find(g=>g.supports(a));if(c)return c;throw new Oe(901,"")}}return i.\u0275prov=rn({token:i,providedIn:"root",factory:LE}),i})();const p0=[new FE],kp=new py([new PE]),gy=new Np(p0),m0=EE(null,"core",[{provide:pE,useValue:"unknown"},{provide:DE,deps:[$s]},{provide:Kv,deps:[]},{provide:mE,deps:[]}]),y0=[{provide:Ph,useClass:Ph,deps:[bi,$s,Zc,Eo,Mh]},{provide:Vm,deps:[bi],useFactory:function sD(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(a){s.push(a)}}},{provide:Mh,useClass:Mh,deps:[[new Ue,qv]]},{provide:cy,useClass:cy,deps:[]},jC,{provide:py,useFactory:function UE(){return kp},deps:[]},{provide:Np,useFactory:function iD(){return gy},deps:[]},{provide:uy,useFactory:function BE(i){return i||function jE(){return"undefined"!=typeof $localize&&$localize.locale||hh}()},deps:[[new we(uy),new Ue,new ht]]},{provide:yE,useValue:"USD"}];let $E=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Yt(Ph))},i.\u0275mod=Pt({type:i}),i.\u0275inj=qr({providers:y0}),i})()},3942:(We,ve,P)=>{P.d(ve,{Z:()=>Oe});var l=P(2090),J=P(4859),N=P(9681),ie=P(1877);class re{constructor(de,fe){this._delegate=de,this.firebase=fe,(0,N._addComponent)(de,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=de.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(de){this._delegate.automaticDataCollectionEnabled=de}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(de=>{this._delegate.checkDestroyed(),de()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(de,fe=N._DEFAULT_ENTRY_NAME){var Me;this._delegate.checkDestroyed();const Ve=this._delegate.container.getProvider(de);return!Ve.isInitialized()&&"EXPLICIT"===(null===(Me=Ve.getComponent())||void 0===Me?void 0:Me.instantiationMode)&&Ve.initialize(),Ve.getImmediate({identifier:fe})}_removeServiceInstance(de,fe=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(de).clearInstance(fe)}_addComponent(de){(0,N._addComponent)(this._delegate,de)}_addOrOverwriteComponent(de){(0,N._addOrOverwriteComponent)(this._delegate,de)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function le(){const Le=function se(Le){const de={},fe={__esModule:!0,initializeApp:function Ne(ze,ye={}){const Z=N.initializeApp(ze,ye);if((0,l.r3)(de,Z.name))return de[Z.name];const X=new Le(Z,fe);return de[Z.name]=X,X},app:Ve,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function Ce(ze){const ye=ze.name,Z=ye.replace("-compat","");if(N._registerComponent(ze)&&"PUBLIC"===ze.type){const X=(ce=Ve())=>{if("function"!=typeof ce[Z])throw ue.create("invalid-app-argument",{appName:ye});return ce[Z]()};void 0!==ze.serviceProps&&(0,l.ZB)(X,ze.serviceProps),fe[Z]=X,Le.prototype[Z]=function(...ce){return this._getService.bind(this,ye).apply(this,ze.multipleInstances?ce:[])}}return"PUBLIC"===ze.type?fe[Z]:null},removeApp:function Me(ze){delete de[ze]},useAsService:function Qe(ze,ye){return"serverAuth"===ye?null:ye},modularAPIs:N}};function Ve(ze){if(!(0,l.r3)(de,ze=ze||N._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:ze});return de[ze]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function Ke(){return Object.keys(de).map(ze=>de[ze])}}),Ve.App=Le,fe}(re);return Le.INTERNAL=Object.assign(Object.assign({},Le.INTERNAL),{createFirebaseNamespace:le,extendNamespace:function de(fe){(0,l.ZB)(Le,fe)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),Le}(),q=new ie.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Le=self.firebase.SDK_VERSION;Le&&Le.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Oe=$;!function Ee(Le){(0,N.registerVersion)("@firebase/app-compat","0.1.29",Le)}()},9681:(We,ve,P)=>{P.r(ve),P.d(ve,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>Ji,_DEFAULT_ENTRY_NAME:()=>et,_addComponent:()=>sr,_addOrOverwriteComponent:()=>rn,_apps:()=>vn,_clearComponents:()=>vs,_components:()=>Jt,_getProvider:()=>qr,_registerComponent:()=>Gr,_removeServiceInstance:()=>Hn,deleteApp:()=>st,getApp:()=>_r,getApps:()=>Re,initializeApp:()=>zr,onLog:()=>Xt,registerVersion:()=>xn,setLogLevel:()=>Ii});var l=P(5861),J=P(4859),N=P(1877),ie=P(2090),re=P(8766);class ge{constructor(B){this.container=B}getPlatformInfoString(){return this.container.getProviders().map(G=>{if(function ue(V){const B=V.getComponent();return"VERSION"===(null==B?void 0:B.type)}(G)){const Ae=G.getImmediate();return`${Ae.library}/${Ae.version}`}return null}).filter(G=>G).join(" ")}}const se="@firebase/app",$=new N.Yd("@firebase/app"),et="[DEFAULT]",yt={[se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},vn=new Map,Jt=new Map;function sr(V,B){try{V.container.addComponent(B)}catch(G){$.debug(`Component ${B.name} failed to register with FirebaseApp ${V.name}`,G)}}function rn(V,B){V.container.addOrOverwriteComponent(B)}function Gr(V){const B=V.name;if(Jt.has(B))return $.debug(`There were multiple attempts to register component ${B}.`),!1;Jt.set(B,V);for(const G of vn.values())sr(G,V);return!0}function qr(V,B){const G=V.container.getProvider("heartbeat").getImmediate({optional:!0});return G&&G.triggerHeartbeat(),V.container.getProvider(B)}function Hn(V,B,G=et){qr(V,B).clearInstance(G)}function vs(){Jt.clear()}const Ht=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class An{constructor(B,G,Ae){this._isDeleted=!1,this._options=Object.assign({},B),this._config=Object.assign({},G),this._name=G.name,this._automaticDataCollectionEnabled=G.automaticDataCollectionEnabled,this._container=Ae,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(B){this.checkDestroyed(),this._automaticDataCollectionEnabled=B}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(B){this._isDeleted=B}checkDestroyed(){if(this.isDeleted)throw Ht.create("app-deleted",{appName:this._name})}}const Ji="9.9.0";function zr(V,B={}){"object"!=typeof B&&(B={name:B});const G=Object.assign({name:et,automaticDataCollectionEnabled:!1},B),Ae=G.name;if("string"!=typeof Ae||!Ae)throw Ht.create("bad-app-name",{appName:String(Ae)});const $e=vn.get(Ae);if($e){if((0,ie.vZ)(V,$e.options)&&(0,ie.vZ)(G,$e.config))return $e;throw Ht.create("duplicate-app",{appName:Ae})}const gt=new J.H0(Ae);for(const tn of Jt.values())gt.addComponent(tn);const qt=new An(V,G,gt);return vn.set(Ae,qt),qt}function _r(V=et){const B=vn.get(V);if(!B)throw Ht.create("no-app",{appName:V});return B}function Re(){return Array.from(vn.values())}function st(V){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,l.Z)(function*(V){const B=V.name;vn.has(B)&&(vn.delete(B),yield Promise.all(V.container.getProviders().map(G=>G.delete())),V.isDeleted=!0)})).apply(this,arguments)}function xn(V,B,G){var Ae;let $e=null!==(Ae=yt[V])&&void 0!==Ae?Ae:V;G&&($e+=`-${G}`);const gt=$e.match(/\s|\//),qt=B.match(/\s|\//);if(gt||qt){const tn=[`Unable to register library "${$e}" with version "${B}":`];return gt&&tn.push(`library name "${$e}" contains illegal characters (whitespace or "/")`),gt&&qt&&tn.push("and"),qt&&tn.push(`version name "${B}" contains illegal characters (whitespace or "/")`),void $.warn(tn.join(" "))}Gr(new J.wA(`${$e}-version`,()=>({library:$e,version:B}),"VERSION"))}function Xt(V,B){if(null!==V&&"function"!=typeof V)throw Ht.create("invalid-log-argument");(0,N.Am)(V,B)}function Ii(V){(0,N.Ub)(V)}const wn="firebase-heartbeat-store";let Wr=null;function lu(){return Wr||(Wr=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(V,B)=>{0===B&&V.createObjectStore(wn)}}).catch(V=>{throw Ht.create("storage-open",{originalErrorMessage:V.message})})),Wr}function it(){return(it=(0,l.Z)(function*(V){var B;try{return(yield lu()).transaction(wn).objectStore(wn).get(Ci(V))}catch(G){throw Ht.create("storage-get",{originalErrorMessage:null===(B=G)||void 0===B?void 0:B.message})}})).apply(this,arguments)}function pt(V,B){return ws.apply(this,arguments)}function ws(){return(ws=(0,l.Z)(function*(V,B){var G;try{const $e=(yield lu()).transaction(wn,"readwrite");return yield $e.objectStore(wn).put(B,Ci(V)),$e.done}catch(Ae){throw Ht.create("storage-set",{originalErrorMessage:null===(G=Ae)||void 0===G?void 0:G.message})}})).apply(this,arguments)}function Ci(V){return`${V.name}!${V.options.appId}`}class $t{constructor(B){this.container=B,this._heartbeatsCache=null;const G=this.container.getProvider("app").getImmediate();this._storage=new Di(G),this._heartbeatsCachePromise=this._storage.read().then(Ae=>(this._heartbeatsCache=Ae,Ae))}triggerHeartbeat(){var B=this;return(0,l.Z)(function*(){const Ae=B.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),$e=Kr();if(null===B._heartbeatsCache&&(B._heartbeatsCache=yield B._heartbeatsCachePromise),B._heartbeatsCache.lastSentHeartbeatDate!==$e&&!B._heartbeatsCache.heartbeats.some(gt=>gt.date===$e))return B._heartbeatsCache.heartbeats.push({date:$e,agent:Ae}),B._heartbeatsCache.heartbeats=B._heartbeatsCache.heartbeats.filter(gt=>{const qt=new Date(gt.date).valueOf();return Date.now()-qt<=2592e6}),B._storage.overwrite(B._heartbeatsCache)})()}getHeartbeatsHeader(){var B=this;return(0,l.Z)(function*(){if(null===B._heartbeatsCache&&(yield B._heartbeatsCachePromise),null===B._heartbeatsCache||0===B._heartbeatsCache.heartbeats.length)return"";const G=Kr(),{heartbeatsToSend:Ae,unsentEntries:$e}=function ut(V,B=1024){const G=[];let Ae=V.slice();for(const $e of V){const gt=G.find(qt=>qt.agent===$e.agent);if(gt){if(gt.dates.push($e.date),U(G)>B){gt.dates.pop();break}}else if(G.push({agent:$e.agent,dates:[$e.date]}),U(G)>B){G.pop();break}Ae=Ae.slice(1)}return{heartbeatsToSend:G,unsentEntries:Ae}}(B._heartbeatsCache.heartbeats),gt=(0,ie.L)(JSON.stringify({version:2,heartbeats:Ae}));return B._heartbeatsCache.lastSentHeartbeatDate=G,$e.length>0?(B._heartbeatsCache.heartbeats=$e,yield B._storage.overwrite(B._heartbeatsCache)):(B._heartbeatsCache.heartbeats=[],B._storage.overwrite(B._heartbeatsCache)),gt})()}}function Kr(){return(new Date).toISOString().substring(0,10)}class Di{constructor(B){this.app=B,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var B=this;return(0,l.Z)(function*(){return(yield B._canUseIndexedDBPromise)&&(yield function Gt(V){return it.apply(this,arguments)}(B.app))||{heartbeats:[]}})()}overwrite(B){var G=this;return(0,l.Z)(function*(){var Ae;if(yield G._canUseIndexedDBPromise){const gt=yield G.read();return pt(G.app,{lastSentHeartbeatDate:null!==(Ae=B.lastSentHeartbeatDate)&&void 0!==Ae?Ae:gt.lastSentHeartbeatDate,heartbeats:B.heartbeats})}})()}add(B){var G=this;return(0,l.Z)(function*(){var Ae;if(yield G._canUseIndexedDBPromise){const gt=yield G.read();return pt(G.app,{lastSentHeartbeatDate:null!==(Ae=B.lastSentHeartbeatDate)&&void 0!==Ae?Ae:gt.lastSentHeartbeatDate,heartbeats:[...gt.heartbeats,...B.heartbeats]})}})()}}function U(V){return(0,ie.L)(JSON.stringify({version:2,heartbeats:V})).length}!function H(V){Gr(new J.wA("platform-logger",B=>new ge(B),"PRIVATE")),Gr(new J.wA("heartbeat",B=>new $t(B),"PRIVATE")),xn(se,"0.7.28",V),xn(se,"0.7.28","esm2017"),xn("fire-js","")}("")},4859:(We,ve,P)=>{P.d(ve,{H0:()=>se,wA:()=>N});var l=P(5861),J=P(2090);class N{constructor($,q,ee){this.name=$,this.instanceFactory=q,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ie="[DEFAULT]";class re{constructor($,q){this.name=$,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const q=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(q)){const ee=new J.BH;if(this.instancesDeferred.set(q,ee),this.isInitialized(q)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:q});Be&&ee.resolve(Be)}catch(Be){}}return this.instancesDeferred.get(q).promise}getImmediate($){var q;const ee=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),Be=null!==(q=null==$?void 0:$.optional)&&void 0!==q&&q;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(Ee){if(Be)return null;throw Ee}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function ue(le){return"EAGER"===le.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ie})}catch(q){}for(const[q,ee]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier(q);try{const Ee=this.getOrInitializeService({instanceIdentifier:Be});ee.resolve(Ee)}catch(Ee){}}}}clearInstance($=ie){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,l.Z)(function*(){const q=Array.from($.instances.values());yield Promise.all([...q.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...q.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ie){return this.instances.has($)}getOptions($=ie){return this.instancesOptions.get($)||{}}initialize($={}){const{options:q={}}=$,ee=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:ee,options:q});for(const[Ee,Oe]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(Ee)&&Oe.resolve(Be);return Be}onInit($,q){var ee;const Be=this.normalizeInstanceIdentifier(q),Ee=null!==(ee=this.onInitCallbacks.get(Be))&&void 0!==ee?ee:new Set;Ee.add($),this.onInitCallbacks.set(Be,Ee);const Oe=this.instances.get(Be);return Oe&&$(Oe,Be),()=>{Ee.delete($)}}invokeOnInitCallbacks($,q){const ee=this.onInitCallbacks.get(q);if(ee)for(const Be of ee)try{Be($,q)}catch(Ee){}}getOrInitializeService({instanceIdentifier:$,options:q={}}){let ee=this.instances.get($);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(le=$,le===ie?void 0:le),options:q}),this.instances.set($,ee),this.instancesOptions.set($,q),this.invokeOnInitCallbacks(ee,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,ee)}catch(Be){}var le;return ee||null}normalizeInstanceIdentifier($=ie){return this.component?this.component.multipleInstances?$:ie:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class se{constructor($){this.name=$,this.providers=new Map}addComponent($){const q=this.getProvider($.name);if(q.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);q.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const q=new re($,this);return this.providers.set($,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(We,ve,P)=>{P.d(ve,{Am:()=>le,Ub:()=>se,Yd:()=>ue,in:()=>J});const l=[];var J=(()=>{return($=J||(J={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",J;var $})();const N={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},ie=J.INFO,re={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},ge=($,q,...ee)=>{if(q<$.logLevel)return;const Be=(new Date).toISOString(),Ee=re[q];if(!Ee)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[Ee](`[${Be}]  ${$.name}:`,...ee)};class ue{constructor(q){this.name=q,this._logLevel=ie,this._logHandler=ge,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in J))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?N[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...q),this._logHandler(this,J.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...q),this._logHandler(this,J.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,J.INFO,...q),this._logHandler(this,J.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,J.WARN,...q),this._logHandler(this,J.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...q),this._logHandler(this,J.ERROR,...q)}}function se($){l.forEach(q=>{q.setLogLevel($)})}function le($,q){for(const ee of l){let Be=null;q&&q.level&&(Be=N[q.level]),ee.userLogHandler=null===$?null:(Ee,Oe,...Le)=>{const de=Le.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch(Me){return null}}).filter(fe=>fe).join(" ");Oe>=(null!=Be?Be:Ee.logLevel)&&$({level:J[Oe].toLowerCase(),message:de,args:Le,type:Ee.name})}}}},8766:(We,ve,P)=>{P.d(ve,{Lj:()=>Ne,X3:()=>Ve});var l=P(5861);let N,ie;const ue=new WeakMap,se=new WeakMap,le=new WeakMap,$=new WeakMap,q=new WeakMap;let Ee={get(ye,Z,X){if(ye instanceof IDBTransaction){if("done"===Z)return se.get(ye);if("objectStoreNames"===Z)return ye.objectStoreNames||le.get(ye);if("store"===Z)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return fe(ye[Z])},set:(ye,Z,X)=>(ye[Z]=X,!0),has:(ye,Z)=>ye instanceof IDBTransaction&&("done"===Z||"store"===Z)||Z in ye};function de(ye){return"function"==typeof ye?function Le(ye){return ye!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return ie||(ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ye)?function(...Z){return ye.apply(Me(this),Z),fe(ue.get(this))}:function(...Z){return fe(ye.apply(Me(this),Z))}:function(Z,...X){const ce=ye.call(Me(this),Z,...X);return le.set(ce,Z.sort?Z.sort():[Z]),fe(ce)}}(ye):(ye instanceof IDBTransaction&&function Be(ye){if(se.has(ye))return;const Z=new Promise((X,ce)=>{const pe=()=>{ye.removeEventListener("complete",Se),ye.removeEventListener("error",te),ye.removeEventListener("abort",te)},Se=()=>{X(),pe()},te=()=>{ce(ye.error||new DOMException("AbortError","AbortError")),pe()};ye.addEventListener("complete",Se),ye.addEventListener("error",te),ye.addEventListener("abort",te)});se.set(ye,Z)}(ye),((ye,Z)=>Z.some(X=>ye instanceof X))(ye,function re(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ye,Ee):ye)}function fe(ye){if(ye instanceof IDBRequest)return function ee(ye){const Z=new Promise((X,ce)=>{const pe=()=>{ye.removeEventListener("success",Se),ye.removeEventListener("error",te)},Se=()=>{X(fe(ye.result)),pe()},te=()=>{ce(ye.error),pe()};ye.addEventListener("success",Se),ye.addEventListener("error",te)});return Z.then(X=>{X instanceof IDBCursor&&ue.set(X,ye)}).catch(()=>{}),q.set(Z,ye),Z}(ye);if($.has(ye))return $.get(ye);const Z=de(ye);return Z!==ye&&($.set(ye,Z),q.set(Z,ye)),Z}const Me=ye=>q.get(ye);function Ve(ye,Z,{blocked:X,upgrade:ce,blocking:pe,terminated:Se}={}){const te=indexedDB.open(ye,Z),ft=fe(te);return ce&&te.addEventListener("upgradeneeded",Rt=>{ce(fe(te.result),Rt.oldVersion,Rt.newVersion,fe(te.transaction))}),X&&te.addEventListener("blocked",()=>X()),ft.then(Rt=>{Se&&Rt.addEventListener("close",()=>Se()),pe&&Rt.addEventListener("versionchange",()=>pe())}).catch(()=>{}),ft}function Ne(ye,{blocked:Z}={}){const X=indexedDB.deleteDatabase(ye);return Z&&X.addEventListener("blocked",()=>Z()),fe(X).then(()=>{})}const Ke=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],Qe=new Map;function ze(ye,Z){if(!(ye instanceof IDBDatabase)||Z in ye||"string"!=typeof Z)return;if(Qe.get(Z))return Qe.get(Z);const X=Z.replace(/FromIndex$/,""),ce=Z!==X,pe=Ce.includes(X);if(!(X in(ce?IDBIndex:IDBObjectStore).prototype)||!pe&&!Ke.includes(X))return;const Se=function(){var te=(0,l.Z)(function*(ft,...Rt){const _n=this.transaction(ft,pe?"readwrite":"readonly");let et=_n.store;return ce&&(et=et.index(Rt.shift())),(yield Promise.all([et[X](...Rt),pe&&_n.done]))[0]});return function(Rt){return te.apply(this,arguments)}}();return Qe.set(Z,Se),Se}!function Oe(ye){Ee=ye(Ee)}(ye=>Fx(kx({},ye),{get:(Z,X,ce)=>ze(Z,X)||ye.get(Z,X,ce),has:(Z,X)=>!!ze(Z,X)||ye.has(Z,X)}))},5861:(We,ve,P)=>{function l(N,ie,re,ge,ue,se,le){try{var $=N[se](le),q=$.value}catch(ee){return void re(ee)}$.done?ie(q):Promise.resolve(q).then(ge,ue)}function J(N){return function(){var ie=this,re=arguments;return new Promise(function(ge,ue){var se=N.apply(ie,re);function le(q){l(se,ge,ue,le,$,"next",q)}function $(q){l(se,ge,ue,le,$,"throw",q)}le(void 0)})}}P.d(ve,{Z:()=>J})}},We=>{We(We.s=8358)}]);